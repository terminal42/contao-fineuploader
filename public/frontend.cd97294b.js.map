{"version":3,"file":"frontend.cd97294b.js","mappings":"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","sources":["webpack://contao-fineuploader/./assets/_handler.js","webpack://contao-fineuploader/./assets/frontend.js","webpack://contao-fineuploader/./node_modules/fine-uploader/fine-uploader/fine-uploader.js","webpack://contao-fineuploader/./node_modules/fine-uploader/lib/traditional.js","webpack://contao-fineuploader/webpack/bootstrap","webpack://contao-fineuploader/webpack/runtime/amd options","webpack://contao-fineuploader/webpack/runtime/compat get default export","webpack://contao-fineuploader/webpack/runtime/define property getters","webpack://contao-fineuploader/webpack/runtime/global","webpack://contao-fineuploader/webpack/runtime/harmony module decorator","webpack://contao-fineuploader/webpack/runtime/hasOwnProperty shorthand","webpack://contao-fineuploader/webpack/startup"],"sourcesContent":["import \"./handler.css\"\nimport { FineUploader } from 'fine-uploader';\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define([], factory(root));\n    } else if (typeof exports === 'object') {\n        module.exports = factory(root);\n    } else {\n        root.ContaoFineUploader = factory(root);\n    }\n})(typeof global !== \"undefined\" ? global : this.window || this.global, function (root) {\n    'use strict';\n\n    /**\n     * Default settings\n     */\n    var defaults = {\n        // AJAX\n        ajaxActionName: 'fineuploader_upload',\n        ajaxUrl: null,\n\n        // Selectors\n        ajaxContainerSelector: '[data-fineuploader=\"ajax-container\"]',\n        deleteButtonsSelector: '[data-fineuploader=\"delete\"]',\n        fieldSelector: '[data-fineuploader=\"field\"]',\n        itemSelector: '[data-fineuploader=\"item\"]',\n        uploaderSelector: '[data-fineuploader=\"uploader\"]',\n\n        // Callbacks\n        configCallback: null\n    };\n\n    /**\n     * Plugin constructor\n     * @param {object} container\n     * @param {object} options\n     * @constructor\n     */\n    function Plugin(container, options) {\n        this.container = container;\n        options = options || {};\n\n        // Clone the \"defaults\" object\n        this.settings = JSON.parse(JSON.stringify(defaults));\n\n        // Extend default with options\n        for (var item in options) {\n            if (options.hasOwnProperty(item)) {\n                this.settings[item] = options[item];\n            }\n        }\n\n        this.initEnvironment();\n        this.bindFormEventListeners();\n\n        this.currentValue = this.field.value;\n        this.submitForm = true;\n    }\n\n    Plugin.prototype = {\n        /**\n         * Initialize the environment\n         */\n        initEnvironment: function () {\n            this.ajaxContainer = this.container.querySelector(this.settings.ajaxContainerSelector);\n            this.deleteButtons = this.container.querySelectorAll(this.settings.deleteButtonsSelector);\n            this.field = this.container.querySelector(this.settings.fieldSelector);\n            this.items = this.container.querySelectorAll(this.settings.itemSelector);\n            this.uploader = this.container.querySelector(this.settings.uploaderSelector);\n\n            this.bindDeleteEventListeners.apply(this);\n        },\n\n        /**\n         * Initialize the FineUploader\n         */\n        initFineUploader: function () {\n            var templateElement = this.container.querySelector('script[type=\"text/template\"][id^=\"qq-template\"]');\n\n            // Remove all HTML comments, especially the <!-- TEMPLATE START: … --> Contao debug template comment,\n            // which would cause the FineUploader to not initialize due to an error.\n            templateElement.innerHTML = templateElement.innerHTML.replace(/<!--[\\s\\S]*?-->/g, '');\n\n            var config = {\n                element: this.uploader,\n                debug: !!this.settings.debug,\n                template: templateElement,\n                request: {\n                    endpoint: this.settings.ajaxUrl || this.field.form.action || root.location.href,\n                    inputName: this.field.name + '_fineuploader',\n                    params: {\n                        action: this.settings.ajaxActionName,\n                        name: this.field.name,\n                        REQUEST_TOKEN: this.field.form.querySelector('input[name=\"REQUEST_TOKEN\"]').value\n                    }\n                },\n                failedUploadTextDisplay: {\n                    mode: 'custom',\n                    maxChars: 1000,\n                    responseProperty: 'error'\n                },\n                callbacks: {\n                    onValidateBatch: this.onValidateBatch.bind(this),\n                    onStatusChange: this.onStatusChange.bind(this),\n                    onComplete: this.onComplete.bind(this)\n                }\n            };\n\n            // Set the maximum number of connections\n            if (this.settings.maxConnections) {\n                config.maxConnections = this.settings.maxConnections;\n            }\n\n            // Set the chunking\n            if (this.settings.chunking) {\n                config.chunking = {\n                    enabled: true,\n                    partSize: this.settings.chunkSize,\n                    concurrent: this.settings.concurrent ? true : false\n                };\n            }\n\n            // Set the validation\n            if (this.settings.extensions || this.settings.minSizeLimit || this.settings.sizeLimit) {\n                config.validation = {};\n\n                if (this.settings.extensions) {\n                    config.validation.allowedExtensions = this.settings.extensions;\n                }\n                if (this.settings.minSizeLimit) {\n                    config.validation.minSizeLimit = this.settings.minSizeLimit;\n                }\n                if (this.settings.sizeLimit) {\n                    config.validation.sizeLimit = this.settings.sizeLimit\n                }\n                if (this.settings.minWidth || this.settings.maxWidth || this.settings.minHeight || this.settings.maxHeight) {\n                    config.validation.image = {};\n                }\n                if (this.settings.minWidth) {\n                    config.validation.image.minWidth = this.settings.minWidth\n                }\n                if (this.settings.maxWidth) {\n                    config.validation.image.maxWidth = this.settings.maxWidth\n                }\n                if (this.settings.minHeight) {\n                    config.validation.image.minHeight = this.settings.minHeight\n                }\n                if (this.settings.maxHeight) {\n                    config.validation.image.maxHeight = this.settings.maxHeight\n                }\n            }\n\n            // Set the upload button title\n            if (this.settings.uploadButtonTitle) {\n                config.text = {\n                    fileInputTitle: this.settings.uploadButtonTitle\n                };\n            }\n\n            // Set the messages\n            if (this.settings.messages && !Array.isArray(this.settings.messages)) {\n                config.messages = this.settings.messages;\n            }\n\n            // Call the config callback\n            if (typeof this.settings.configCallback === 'function') {\n                this.settings.configCallback(config);\n            }\n\n            this.fineUploader = new FineUploader(config);\n        },\n\n        /**\n         * Set the AJAX container content\n         *\n         * @param {string} buffer\n         */\n        setAjaxContainerContent: function (buffer) {\n            this.ajaxContainer.innerHTML = buffer;\n            this.initEnvironment();\n        },\n\n        /**\n         * Bind the event listeners to delete buttons\n         */\n        bindDeleteEventListeners: function () {\n            var self = this;\n\n            // Handle the delete buttons\n            Array.from(self.deleteButtons).forEach(function (el) {\n                el.addEventListener('click', function (e) {\n                    e.preventDefault();\n                    self.deleteFile(this.dataset.deleteId);\n                });\n            });\n        },\n\n        /**\n         * Bind the event listeners to the form\n         */\n        bindFormEventListeners: function () {\n            // Prevent the form submit if e.g. the file upload is in progress\n            this.field.form.addEventListener('submit', function (e) {\n                if (!this.submitForm) {\n                    e.preventDefault();\n                }\n            }.bind(this));\n        },\n\n        /**\n         * Trigger the validate batch callback\n         *\n         * @param {array} files\n         * @returns {boolean}\n         */\n        onValidateBatch: function (files) {\n            var count = (this.currentValue === '') ? 0 : this.currentValue.split(',').length;\n\n            // If the limit is set to 1 file and user attempts to upload 1 file\n            // then it should replace the current value instead of throwing an error\n            if (this.settings.limit == 1 && files.length == 1 && count == 1) {\n                count = 0;\n                this.currentValue = '';\n                this.fineUploader.clearStoredFiles();\n            }\n\n            // Trigger an error if there are too many items\n            if (this.settings.limit > 0 && this.settings.limit < (count + files.length)) {\n                this.fineUploader._batchError(\n                    this.fineUploader._options.messages.tooManyItemsError\n                        .replace(/\\{netItems\\}/g, count + files.length)\n                        .replace(/\\{itemLimit\\}/g, this.settings.limit)\n                );\n\n                return false;\n            }\n\n            return true;\n        },\n\n        /**\n         * Trigger the status change callback\n         */\n        onStatusChange: function () {\n            this.submitForm = this.fineUploader.getInProgress() === 0;\n\n            // Disable the form buttons alongside the form\n            Array.from(document.querySelectorAll('[type=\"submit\"]')).forEach(function (button) {\n                if (button.form === this.field.form) {\n                    button.disabled = !this.submitForm;\n                }\n            }.bind(this));\n        },\n\n        /**\n         * Trigger the complete callback\n         *\n         * @param {string} id\n         * @param {string} name\n         * @param {object} result\n         */\n        onComplete: function (id, name, result) {\n            if (!result.success) {\n                return;\n            }\n\n            // Add the uploaded file to value\n            if (result.file) {\n                this.currentValue = (this.currentValue.length ? (this.currentValue + ',') : '') + result.file;\n            }\n\n            // Update the value if there are no files in progress\n            if (this.fineUploader.getInProgress() === 0) {\n                this.field.value = this.currentValue;\n            }\n        },\n\n        /**\n         * Delete the file\n         *\n         * @param {string} file The file to delete\n         */\n        deleteFile: function (file) {\n            var current = this.currentValue.split(',');\n            var i;\n\n            // Remove the file from the current value\n            for (i = 0; i < current.length; i++) {\n                if (current[i] === file) {\n                    current.splice(i, 1);\n                    break;\n                }\n            }\n\n            // Update the current value\n            this.currentValue = current.join(',');\n            this.field.value = this.currentValue;\n\n            // Remove the DOM element\n            for (i = 0; i < this.items.length; i++) {\n                var el = this.items[i];\n\n                if (el.dataset.itemId === file) {\n                    el.parentElement.removeChild(el);\n                    break;\n                }\n            }\n        }\n    };\n\n    return Plugin;\n});\n","import \"./frontend.css\"\nimport \"./_handler.js\"\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define([], factory(root));\n    } else if (typeof exports === 'object') {\n        module.exports = factory(root);\n    } else {\n        root.ContaoFineUploaderFrontend = factory(root);\n    }\n})(typeof global !== \"undefined\" ? global : this.window || this.global, function (root) {\n    'use strict';\n\n    /**\n     * Default settings\n     */\n    var defaults = {\n        ajaxActionName: 'fineuploader_reload',\n        ajaxUrl: null,\n        errorMessage: '',\n    };\n\n    /**\n     * Plugin constructor\n     * @param {object} container\n     * @param {object} config\n     * @param {object} options\n     * @constructor\n     */\n    function Plugin(container, config, options) {\n        this.container = container;\n        this.config = config;\n        options = options || {};\n\n        // Clone the \"defaults\" object\n        this.settings = JSON.parse(JSON.stringify(defaults));\n\n        // Extend default with options\n        for (var item in options) {\n            if (options.hasOwnProperty(item)) {\n                this.settings[item] = options[item];\n            }\n        }\n\n        this.initUploader();\n        this.makeSortable();\n    }\n\n    Plugin.prototype = {\n        /**\n         * Initialize the uploader\n         */\n        initUploader: function () {\n            this.config.configCallback = this.configCallback.bind(this);\n            this.uploader = new ContaoFineUploader(this.container, this.config);\n            this.uploader.initFineUploader();\n        },\n\n        /**\n         * Config callback\n         *\n         * @param {object} config\n         */\n        configCallback: function (config) {\n            config.callbacks.onComplete = this.onCompleteCallback.bind(this);\n        },\n\n        /**\n         * Make items sortable\n         */\n        makeSortable: function () {\n            var sortable = this.uploader.ajaxContainer.querySelector('.sortable');\n\n            if (sortable === null) {\n                return;\n            }\n\n            new Sortable(sortable, {\n                dataIdAttr: 'data-item-id',\n                store: {\n                    get: function () {\n                        return this.uploader.field.value.split(',');\n                    }.bind(this),\n                    set: function (sortable) {\n                        this.uploader.field.value = sortable.toArray().join(',');\n                    }.bind(this)\n                }\n            });\n        },\n\n        /**\n         * Handle the onComplete callback\n         *\n         * @param {string} id\n         * @param {string} name\n         * @param {object} result\n         */\n        onCompleteCallback: function (id, name, result) {\n            if (!result.success) {\n                return;\n            }\n\n            // Trigger the default callback\n            this.uploader.onComplete.apply(this.uploader, arguments);\n\n            // Return if there are still files in progress\n            if (this.uploader.fineUploader.getInProgress() > 0) {\n                return;\n            }\n\n            this.uploader.ajaxContainer.classList.add('ajax-loading');\n\n            var request = new XMLHttpRequest();\n\n            request.open('POST', this.settings.ajaxUrl || this.uploader.field.form.action || window.location.href, true);\n            request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n            request.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n\n            request.onload = function () {\n                if (request.status >= 200 && request.status < 400) {\n                    this.uploader.setAjaxContainerContent(request.response);\n\n                    // Make the elements sortable\n                    this.makeSortable();\n                } else {\n                    alert(this.settings.errorMessage);\n                }\n\n                this.uploader.ajaxContainer.classList.remove('ajax-loading');\n            }.bind(this);\n\n            request.onerror = function() {\n                alert(this.settings.errorMessage);\n                this.uploader.ajaxContainer.classList.remove('ajax-loading');\n            }.bind(this);\n\n            request.send(\n                'action=' + this.settings.ajaxActionName\n                + '&name=' + this.uploader.field.name\n                + '&value=' + this.uploader.currentValue\n                + '&REQUEST_TOKEN=' + this.uploader.field.form.querySelector('input[name=\"REQUEST_TOKEN\"]').value\n            );\n        }\n    };\n\n    return Plugin;\n});\n","// Fine Uploader 5.16.2 - MIT licensed. http://fineuploader.com\n(function(global) {\n    var qq = function(element) {\n        \"use strict\";\n        return {\n            hide: function() {\n                element.style.display = \"none\";\n                return this;\n            },\n            attach: function(type, fn) {\n                if (element.addEventListener) {\n                    element.addEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.attachEvent(\"on\" + type, fn);\n                }\n                return function() {\n                    qq(element).detach(type, fn);\n                };\n            },\n            detach: function(type, fn) {\n                if (element.removeEventListener) {\n                    element.removeEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.detachEvent(\"on\" + type, fn);\n                }\n                return this;\n            },\n            contains: function(descendant) {\n                if (!descendant) {\n                    return false;\n                }\n                if (element === descendant) {\n                    return true;\n                }\n                if (element.contains) {\n                    return element.contains(descendant);\n                } else {\n                    return !!(descendant.compareDocumentPosition(element) & 8);\n                }\n            },\n            insertBefore: function(elementB) {\n                elementB.parentNode.insertBefore(element, elementB);\n                return this;\n            },\n            remove: function() {\n                element.parentNode.removeChild(element);\n                return this;\n            },\n            css: function(styles) {\n                if (element.style == null) {\n                    throw new qq.Error(\"Can't apply style to node as it is not on the HTMLElement prototype chain!\");\n                }\n                if (styles.opacity != null) {\n                    if (typeof element.style.opacity !== \"string\" && typeof element.filters !== \"undefined\") {\n                        styles.filter = \"alpha(opacity=\" + Math.round(100 * styles.opacity) + \")\";\n                    }\n                }\n                qq.extend(element.style, styles);\n                return this;\n            },\n            hasClass: function(name, considerParent) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                return re.test(element.className) || !!(considerParent && re.test(element.parentNode.className));\n            },\n            addClass: function(name) {\n                if (!qq(element).hasClass(name)) {\n                    element.className += \" \" + name;\n                }\n                return this;\n            },\n            removeClass: function(name) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                element.className = element.className.replace(re, \" \").replace(/^\\s+|\\s+$/g, \"\");\n                return this;\n            },\n            getByClass: function(className, first) {\n                var candidates, result = [];\n                if (first && element.querySelector) {\n                    return element.querySelector(\".\" + className);\n                } else if (element.querySelectorAll) {\n                    return element.querySelectorAll(\".\" + className);\n                }\n                candidates = element.getElementsByTagName(\"*\");\n                qq.each(candidates, function(idx, val) {\n                    if (qq(val).hasClass(className)) {\n                        result.push(val);\n                    }\n                });\n                return first ? result[0] : result;\n            },\n            getFirstByClass: function(className) {\n                return qq(element).getByClass(className, true);\n            },\n            children: function() {\n                var children = [], child = element.firstChild;\n                while (child) {\n                    if (child.nodeType === 1) {\n                        children.push(child);\n                    }\n                    child = child.nextSibling;\n                }\n                return children;\n            },\n            setText: function(text) {\n                element.innerText = text;\n                element.textContent = text;\n                return this;\n            },\n            clearText: function() {\n                return qq(element).setText(\"\");\n            },\n            hasAttribute: function(attrName) {\n                var attrVal;\n                if (element.hasAttribute) {\n                    if (!element.hasAttribute(attrName)) {\n                        return false;\n                    }\n                    return /^false$/i.exec(element.getAttribute(attrName)) == null;\n                } else {\n                    attrVal = element[attrName];\n                    if (attrVal === undefined) {\n                        return false;\n                    }\n                    return /^false$/i.exec(attrVal) == null;\n                }\n            }\n        };\n    };\n    (function() {\n        \"use strict\";\n        qq.canvasToBlob = function(canvas, mime, quality) {\n            return qq.dataUriToBlob(canvas.toDataURL(mime, quality));\n        };\n        qq.dataUriToBlob = function(dataUri) {\n            var arrayBuffer, byteString, createBlob = function(data, mime) {\n                var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n                if (blobBuilder) {\n                    blobBuilder.append(data);\n                    return blobBuilder.getBlob(mime);\n                } else {\n                    return new Blob([ data ], {\n                        type: mime\n                    });\n                }\n            }, intArray, mimeString;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return createBlob(arrayBuffer, mimeString);\n        };\n        qq.log = function(message, level) {\n            if (window.console) {\n                if (!level || level === \"info\") {\n                    window.console.log(message);\n                } else {\n                    if (window.console[level]) {\n                        window.console[level](message);\n                    } else {\n                        window.console.log(\"<\" + level + \"> \" + message);\n                    }\n                }\n            }\n        };\n        qq.isObject = function(variable) {\n            return variable && !variable.nodeType && Object.prototype.toString.call(variable) === \"[object Object]\";\n        };\n        qq.isFunction = function(variable) {\n            return typeof variable === \"function\";\n        };\n        qq.isArray = function(value) {\n            return Object.prototype.toString.call(value) === \"[object Array]\" || value && window.ArrayBuffer && value.buffer && value.buffer.constructor === ArrayBuffer;\n        };\n        qq.isItemList = function(maybeItemList) {\n            return Object.prototype.toString.call(maybeItemList) === \"[object DataTransferItemList]\";\n        };\n        qq.isNodeList = function(maybeNodeList) {\n            return Object.prototype.toString.call(maybeNodeList) === \"[object NodeList]\" || maybeNodeList.item && maybeNodeList.namedItem;\n        };\n        qq.isString = function(maybeString) {\n            return Object.prototype.toString.call(maybeString) === \"[object String]\";\n        };\n        qq.trimStr = function(string) {\n            if (String.prototype.trim) {\n                return string.trim();\n            }\n            return string.replace(/^\\s+|\\s+$/g, \"\");\n        };\n        qq.format = function(str) {\n            var args = Array.prototype.slice.call(arguments, 1), newStr = str, nextIdxToReplace = newStr.indexOf(\"{}\");\n            qq.each(args, function(idx, val) {\n                var strBefore = newStr.substring(0, nextIdxToReplace), strAfter = newStr.substring(nextIdxToReplace + 2);\n                newStr = strBefore + val + strAfter;\n                nextIdxToReplace = newStr.indexOf(\"{}\", nextIdxToReplace + val.length);\n                if (nextIdxToReplace < 0) {\n                    return false;\n                }\n            });\n            return newStr;\n        };\n        qq.isFile = function(maybeFile) {\n            return window.File && Object.prototype.toString.call(maybeFile) === \"[object File]\";\n        };\n        qq.isFileList = function(maybeFileList) {\n            return window.FileList && Object.prototype.toString.call(maybeFileList) === \"[object FileList]\";\n        };\n        qq.isFileOrInput = function(maybeFileOrInput) {\n            return qq.isFile(maybeFileOrInput) || qq.isInput(maybeFileOrInput);\n        };\n        qq.isInput = function(maybeInput, notFile) {\n            var evaluateType = function(type) {\n                var normalizedType = type.toLowerCase();\n                if (notFile) {\n                    return normalizedType !== \"file\";\n                }\n                return normalizedType === \"file\";\n            };\n            if (window.HTMLInputElement) {\n                if (Object.prototype.toString.call(maybeInput) === \"[object HTMLInputElement]\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            if (maybeInput.tagName) {\n                if (maybeInput.tagName.toLowerCase() === \"input\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        qq.isBlob = function(maybeBlob) {\n            if (window.Blob && Object.prototype.toString.call(maybeBlob) === \"[object Blob]\") {\n                return true;\n            }\n        };\n        qq.isXhrUploadSupported = function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return input.multiple !== undefined && typeof File !== \"undefined\" && typeof FormData !== \"undefined\" && typeof qq.createXhrInstance().upload !== \"undefined\";\n        };\n        qq.createXhrInstance = function() {\n            if (window.XMLHttpRequest) {\n                return new XMLHttpRequest();\n            }\n            try {\n                return new ActiveXObject(\"MSXML2.XMLHTTP.3.0\");\n            } catch (error) {\n                qq.log(\"Neither XHR or ActiveX are supported!\", \"error\");\n                return null;\n            }\n        };\n        qq.isFolderDropSupported = function(dataTransfer) {\n            return dataTransfer.items && dataTransfer.items.length > 0 && dataTransfer.items[0].webkitGetAsEntry;\n        };\n        qq.isFileChunkingSupported = function() {\n            return !qq.androidStock() && qq.isXhrUploadSupported() && (File.prototype.slice !== undefined || File.prototype.webkitSlice !== undefined || File.prototype.mozSlice !== undefined);\n        };\n        qq.sliceBlob = function(fileOrBlob, start, end) {\n            var slicer = fileOrBlob.slice || fileOrBlob.mozSlice || fileOrBlob.webkitSlice;\n            return slicer.call(fileOrBlob, start, end);\n        };\n        qq.arrayBufferToHex = function(buffer) {\n            var bytesAsHex = \"\", bytes = new Uint8Array(buffer);\n            qq.each(bytes, function(idx, byt) {\n                var byteAsHexStr = byt.toString(16);\n                if (byteAsHexStr.length < 2) {\n                    byteAsHexStr = \"0\" + byteAsHexStr;\n                }\n                bytesAsHex += byteAsHexStr;\n            });\n            return bytesAsHex;\n        };\n        qq.readBlobToHex = function(blob, startOffset, length) {\n            var initialBlob = qq.sliceBlob(blob, startOffset, startOffset + length), fileReader = new FileReader(), promise = new qq.Promise();\n            fileReader.onload = function() {\n                promise.success(qq.arrayBufferToHex(fileReader.result));\n            };\n            fileReader.onerror = promise.failure;\n            fileReader.readAsArrayBuffer(initialBlob);\n            return promise;\n        };\n        qq.extend = function(first, second, extendNested) {\n            qq.each(second, function(prop, val) {\n                if (extendNested && qq.isObject(val)) {\n                    if (first[prop] === undefined) {\n                        first[prop] = {};\n                    }\n                    qq.extend(first[prop], val, true);\n                } else {\n                    first[prop] = val;\n                }\n            });\n            return first;\n        };\n        qq.override = function(target, sourceFn) {\n            var super_ = {}, source = sourceFn(super_);\n            qq.each(source, function(srcPropName, srcPropVal) {\n                if (target[srcPropName] !== undefined) {\n                    super_[srcPropName] = target[srcPropName];\n                }\n                target[srcPropName] = srcPropVal;\n            });\n            return target;\n        };\n        qq.indexOf = function(arr, elt, from) {\n            if (arr.indexOf) {\n                return arr.indexOf(elt, from);\n            }\n            from = from || 0;\n            var len = arr.length;\n            if (from < 0) {\n                from += len;\n            }\n            for (;from < len; from += 1) {\n                if (arr.hasOwnProperty(from) && arr[from] === elt) {\n                    return from;\n                }\n            }\n            return -1;\n        };\n        qq.getUniqueId = function() {\n            return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n                var r = Math.random() * 16 | 0, v = c == \"x\" ? r : r & 3 | 8;\n                return v.toString(16);\n            });\n        };\n        qq.ie = function() {\n            return navigator.userAgent.indexOf(\"MSIE\") !== -1 || navigator.userAgent.indexOf(\"Trident\") !== -1;\n        };\n        qq.ie7 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 7\") !== -1;\n        };\n        qq.ie8 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 8\") !== -1;\n        };\n        qq.ie10 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 10\") !== -1;\n        };\n        qq.ie11 = function() {\n            return qq.ie() && navigator.userAgent.indexOf(\"rv:11\") !== -1;\n        };\n        qq.edge = function() {\n            return navigator.userAgent.indexOf(\"Edge\") >= 0;\n        };\n        qq.safari = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Apple\") !== -1;\n        };\n        qq.chrome = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Google\") !== -1;\n        };\n        qq.opera = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Opera\") !== -1;\n        };\n        qq.firefox = function() {\n            return !qq.edge() && !qq.ie11() && navigator.userAgent.indexOf(\"Mozilla\") !== -1 && navigator.vendor !== undefined && navigator.vendor === \"\";\n        };\n        qq.windows = function() {\n            return navigator.platform === \"Win32\";\n        };\n        qq.android = function() {\n            return navigator.userAgent.toLowerCase().indexOf(\"android\") !== -1;\n        };\n        qq.androidStock = function() {\n            return qq.android() && navigator.userAgent.toLowerCase().indexOf(\"chrome\") < 0;\n        };\n        qq.ios6 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 6_\") !== -1;\n        };\n        qq.ios7 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 7_\") !== -1;\n        };\n        qq.ios8 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_\") !== -1;\n        };\n        qq.ios800 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_0 \") !== -1;\n        };\n        qq.ios = function() {\n            return navigator.userAgent.indexOf(\"iPad\") !== -1 || navigator.userAgent.indexOf(\"iPod\") !== -1 || navigator.userAgent.indexOf(\"iPhone\") !== -1;\n        };\n        qq.iosChrome = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\"CriOS\") !== -1;\n        };\n        qq.iosSafari = function() {\n            return qq.ios() && !qq.iosChrome() && navigator.userAgent.indexOf(\"Safari\") !== -1;\n        };\n        qq.iosSafariWebView = function() {\n            return qq.ios() && !qq.iosChrome() && !qq.iosSafari();\n        };\n        qq.preventDefault = function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            } else {\n                e.returnValue = false;\n            }\n        };\n        qq.toElement = function() {\n            var div = document.createElement(\"div\");\n            return function(html) {\n                div.innerHTML = html;\n                var element = div.firstChild;\n                div.removeChild(element);\n                return element;\n            };\n        }();\n        qq.each = function(iterableItem, callback) {\n            var keyOrIndex, retVal;\n            if (iterableItem) {\n                if (window.Storage && iterableItem.constructor === window.Storage) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(iterableItem.key(keyOrIndex), iterableItem.getItem(iterableItem.key(keyOrIndex)));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isArray(iterableItem) || qq.isItemList(iterableItem) || qq.isNodeList(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isString(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem.charAt(keyOrIndex));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else {\n                    for (keyOrIndex in iterableItem) {\n                        if (Object.prototype.hasOwnProperty.call(iterableItem, keyOrIndex)) {\n                            retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                            if (retVal === false) {\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        qq.bind = function(oldFunc, context) {\n            if (qq.isFunction(oldFunc)) {\n                var args = Array.prototype.slice.call(arguments, 2);\n                return function() {\n                    var newArgs = qq.extend([], args);\n                    if (arguments.length) {\n                        newArgs = newArgs.concat(Array.prototype.slice.call(arguments));\n                    }\n                    return oldFunc.apply(context, newArgs);\n                };\n            }\n            throw new Error(\"first parameter must be a function!\");\n        };\n        qq.obj2url = function(obj, temp, prefixDone) {\n            var uristrings = [], prefix = \"&\", add = function(nextObj, i) {\n                var nextTemp = temp ? /\\[\\]$/.test(temp) ? temp : temp + \"[\" + i + \"]\" : i;\n                if (nextTemp !== \"undefined\" && i !== \"undefined\") {\n                    uristrings.push(typeof nextObj === \"object\" ? qq.obj2url(nextObj, nextTemp, true) : Object.prototype.toString.call(nextObj) === \"[object Function]\" ? encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj()) : encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj));\n                }\n            };\n            if (!prefixDone && temp) {\n                prefix = /\\?/.test(temp) ? /\\?$/.test(temp) ? \"\" : \"&\" : \"?\";\n                uristrings.push(temp);\n                uristrings.push(qq.obj2url(obj));\n            } else if (Object.prototype.toString.call(obj) === \"[object Array]\" && typeof obj !== \"undefined\") {\n                qq.each(obj, function(idx, val) {\n                    add(val, idx);\n                });\n            } else if (typeof obj !== \"undefined\" && obj !== null && typeof obj === \"object\") {\n                qq.each(obj, function(prop, val) {\n                    add(val, prop);\n                });\n            } else {\n                uristrings.push(encodeURIComponent(temp) + \"=\" + encodeURIComponent(obj));\n            }\n            if (temp) {\n                return uristrings.join(prefix);\n            } else {\n                return uristrings.join(prefix).replace(/^&/, \"\").replace(/%20/g, \"+\");\n            }\n        };\n        qq.obj2FormData = function(obj, formData, arrayKeyName) {\n            if (!formData) {\n                formData = new FormData();\n            }\n            qq.each(obj, function(key, val) {\n                key = arrayKeyName ? arrayKeyName + \"[\" + key + \"]\" : key;\n                if (qq.isObject(val)) {\n                    qq.obj2FormData(val, formData, key);\n                } else if (qq.isFunction(val)) {\n                    formData.append(key, val());\n                } else {\n                    formData.append(key, val);\n                }\n            });\n            return formData;\n        };\n        qq.obj2Inputs = function(obj, form) {\n            var input;\n            if (!form) {\n                form = document.createElement(\"form\");\n            }\n            qq.obj2FormData(obj, {\n                append: function(key, val) {\n                    input = document.createElement(\"input\");\n                    input.setAttribute(\"name\", key);\n                    input.setAttribute(\"value\", val);\n                    form.appendChild(input);\n                }\n            });\n            return form;\n        };\n        qq.parseJson = function(json) {\n            if (window.JSON && qq.isFunction(JSON.parse)) {\n                return JSON.parse(json);\n            } else {\n                return eval(\"(\" + json + \")\");\n            }\n        };\n        qq.getExtension = function(filename) {\n            var extIdx = filename.lastIndexOf(\".\") + 1;\n            if (extIdx > 0) {\n                return filename.substr(extIdx, filename.length - extIdx);\n            }\n        };\n        qq.getFilename = function(blobOrFileInput) {\n            if (qq.isInput(blobOrFileInput)) {\n                return blobOrFileInput.value.replace(/.*(\\/|\\\\)/, \"\");\n            } else if (qq.isFile(blobOrFileInput)) {\n                if (blobOrFileInput.fileName !== null && blobOrFileInput.fileName !== undefined) {\n                    return blobOrFileInput.fileName;\n                }\n            }\n            return blobOrFileInput.name;\n        };\n        qq.DisposeSupport = function() {\n            var disposers = [];\n            return {\n                dispose: function() {\n                    var disposer;\n                    do {\n                        disposer = disposers.shift();\n                        if (disposer) {\n                            disposer();\n                        }\n                    } while (disposer);\n                },\n                attach: function() {\n                    var args = arguments;\n                    this.addDisposer(qq(args[0]).attach.apply(this, Array.prototype.slice.call(arguments, 1)));\n                },\n                addDisposer: function(disposeFunction) {\n                    disposers.push(disposeFunction);\n                }\n            };\n        };\n    })();\n    (function() {\n        \"use strict\";\n        if (typeof define === \"function\" && define.amd) {\n            define(function() {\n                return qq;\n            });\n        } else if (typeof module !== \"undefined\" && module.exports) {\n            module.exports = qq;\n        } else {\n            global.qq = qq;\n        }\n    })();\n    (function() {\n        \"use strict\";\n        qq.Error = function(message) {\n            this.message = \"[Fine Uploader \" + qq.version + \"] \" + message;\n        };\n        qq.Error.prototype = new Error();\n    })();\n    qq.version = \"5.16.2\";\n    qq.supportedFeatures = function() {\n        \"use strict\";\n        var supportsUploading, supportsUploadingBlobs, supportsFileDrop, supportsAjaxFileUploading, supportsFolderDrop, supportsChunking, supportsResume, supportsUploadViaPaste, supportsUploadCors, supportsDeleteFileXdr, supportsDeleteFileCorsXhr, supportsDeleteFileCors, supportsFolderSelection, supportsImagePreviews, supportsUploadProgress;\n        function testSupportsFileInputElement() {\n            var supported = true, tempInput;\n            try {\n                tempInput = document.createElement(\"input\");\n                tempInput.type = \"file\";\n                qq(tempInput).hide();\n                if (tempInput.disabled) {\n                    supported = false;\n                }\n            } catch (ex) {\n                supported = false;\n            }\n            return supported;\n        }\n        function isChrome14OrHigher() {\n            return (qq.chrome() || qq.opera()) && navigator.userAgent.match(/Chrome\\/[1][4-9]|Chrome\\/[2-9][0-9]/) !== undefined;\n        }\n        function isCrossOriginXhrSupported() {\n            if (window.XMLHttpRequest) {\n                var xhr = qq.createXhrInstance();\n                return xhr.withCredentials !== undefined;\n            }\n            return false;\n        }\n        function isXdrSupported() {\n            return window.XDomainRequest !== undefined;\n        }\n        function isCrossOriginAjaxSupported() {\n            if (isCrossOriginXhrSupported()) {\n                return true;\n            }\n            return isXdrSupported();\n        }\n        function isFolderSelectionSupported() {\n            return document.createElement(\"input\").webkitdirectory !== undefined;\n        }\n        function isLocalStorageSupported() {\n            try {\n                return !!window.localStorage && qq.isFunction(window.localStorage.setItem);\n            } catch (error) {\n                return false;\n            }\n        }\n        function isDragAndDropSupported() {\n            var span = document.createElement(\"span\");\n            return (\"draggable\" in span || \"ondragstart\" in span && \"ondrop\" in span) && !qq.android() && !qq.ios();\n        }\n        supportsUploading = testSupportsFileInputElement();\n        supportsAjaxFileUploading = supportsUploading && qq.isXhrUploadSupported();\n        supportsUploadingBlobs = supportsAjaxFileUploading && !qq.androidStock();\n        supportsFileDrop = supportsAjaxFileUploading && isDragAndDropSupported();\n        supportsFolderDrop = supportsFileDrop && function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return !!(\"webkitdirectory\" in (input || document.querySelectorAll(\"input[type=file]\")[0]));\n        }();\n        supportsChunking = supportsAjaxFileUploading && qq.isFileChunkingSupported();\n        supportsResume = supportsAjaxFileUploading && supportsChunking && isLocalStorageSupported();\n        supportsUploadViaPaste = supportsAjaxFileUploading && isChrome14OrHigher();\n        supportsUploadCors = supportsUploading && (window.postMessage !== undefined || supportsAjaxFileUploading);\n        supportsDeleteFileCorsXhr = isCrossOriginXhrSupported();\n        supportsDeleteFileXdr = isXdrSupported();\n        supportsDeleteFileCors = isCrossOriginAjaxSupported();\n        supportsFolderSelection = isFolderSelectionSupported();\n        supportsImagePreviews = supportsAjaxFileUploading && window.FileReader !== undefined;\n        supportsUploadProgress = function() {\n            if (supportsAjaxFileUploading) {\n                return !qq.androidStock() && !qq.iosChrome();\n            }\n            return false;\n        }();\n        return {\n            ajaxUploading: supportsAjaxFileUploading,\n            blobUploading: supportsUploadingBlobs,\n            canDetermineSize: supportsAjaxFileUploading,\n            chunking: supportsChunking,\n            deleteFileCors: supportsDeleteFileCors,\n            deleteFileCorsXdr: supportsDeleteFileXdr,\n            deleteFileCorsXhr: supportsDeleteFileCorsXhr,\n            dialogElement: !!window.HTMLDialogElement,\n            fileDrop: supportsFileDrop,\n            folderDrop: supportsFolderDrop,\n            folderSelection: supportsFolderSelection,\n            imagePreviews: supportsImagePreviews,\n            imageValidation: supportsImagePreviews,\n            itemSizeValidation: supportsAjaxFileUploading,\n            pause: supportsChunking,\n            progressBar: supportsUploadProgress,\n            resume: supportsResume,\n            scaling: supportsImagePreviews && supportsUploadingBlobs,\n            tiffPreviews: qq.safari(),\n            unlimitedScaledImageSize: !qq.ios(),\n            uploading: supportsUploading,\n            uploadCors: supportsUploadCors,\n            uploadCustomHeaders: supportsAjaxFileUploading,\n            uploadNonMultipart: supportsAjaxFileUploading,\n            uploadViaPaste: supportsUploadViaPaste\n        };\n    }();\n    qq.isGenericPromise = function(maybePromise) {\n        \"use strict\";\n        return !!(maybePromise && maybePromise.then && qq.isFunction(maybePromise.then));\n    };\n    qq.Promise = function() {\n        \"use strict\";\n        var successArgs, failureArgs, successCallbacks = [], failureCallbacks = [], doneCallbacks = [], state = 0;\n        qq.extend(this, {\n            then: function(onSuccess, onFailure) {\n                if (state === 0) {\n                    if (onSuccess) {\n                        successCallbacks.push(onSuccess);\n                    }\n                    if (onFailure) {\n                        failureCallbacks.push(onFailure);\n                    }\n                } else if (state === -1) {\n                    onFailure && onFailure.apply(null, failureArgs);\n                } else if (onSuccess) {\n                    onSuccess.apply(null, successArgs);\n                }\n                return this;\n            },\n            done: function(callback) {\n                if (state === 0) {\n                    doneCallbacks.push(callback);\n                } else {\n                    callback.apply(null, failureArgs === undefined ? successArgs : failureArgs);\n                }\n                return this;\n            },\n            success: function() {\n                state = 1;\n                successArgs = arguments;\n                if (successCallbacks.length) {\n                    qq.each(successCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                return this;\n            },\n            failure: function() {\n                state = -1;\n                failureArgs = arguments;\n                if (failureCallbacks.length) {\n                    qq.each(failureCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                return this;\n            }\n        });\n    };\n    qq.BlobProxy = function(referenceBlob, onCreate) {\n        \"use strict\";\n        qq.extend(this, {\n            referenceBlob: referenceBlob,\n            create: function() {\n                return onCreate(referenceBlob);\n            }\n        });\n    };\n    qq.UploadButton = function(o) {\n        \"use strict\";\n        var self = this, disposeSupport = new qq.DisposeSupport(), options = {\n            acceptFiles: null,\n            element: null,\n            focusClass: \"qq-upload-button-focus\",\n            folders: false,\n            hoverClass: \"qq-upload-button-hover\",\n            ios8BrowserCrashWorkaround: false,\n            multiple: false,\n            name: \"qqfile\",\n            onChange: function(input) {},\n            title: null\n        }, input, buttonId;\n        qq.extend(options, o);\n        buttonId = qq.getUniqueId();\n        function createInput() {\n            var input = document.createElement(\"input\");\n            input.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME, buttonId);\n            input.setAttribute(\"title\", options.title);\n            self.setMultiple(options.multiple, input);\n            if (options.folders && qq.supportedFeatures.folderSelection) {\n                input.setAttribute(\"webkitdirectory\", \"\");\n            }\n            if (options.acceptFiles) {\n                input.setAttribute(\"accept\", options.acceptFiles);\n            }\n            input.setAttribute(\"type\", \"file\");\n            input.setAttribute(\"name\", options.name);\n            qq(input).css({\n                position: \"absolute\",\n                right: 0,\n                top: 0,\n                fontFamily: \"Arial\",\n                fontSize: qq.ie() && !qq.ie8() ? \"3500px\" : \"118px\",\n                margin: 0,\n                padding: 0,\n                cursor: \"pointer\",\n                opacity: 0\n            });\n            !qq.ie7() && qq(input).css({\n                height: \"100%\"\n            });\n            options.element.appendChild(input);\n            disposeSupport.attach(input, \"change\", function() {\n                options.onChange(input);\n            });\n            disposeSupport.attach(input, \"mouseover\", function() {\n                qq(options.element).addClass(options.hoverClass);\n            });\n            disposeSupport.attach(input, \"mouseout\", function() {\n                qq(options.element).removeClass(options.hoverClass);\n            });\n            disposeSupport.attach(input, \"focus\", function() {\n                qq(options.element).addClass(options.focusClass);\n            });\n            disposeSupport.attach(input, \"blur\", function() {\n                qq(options.element).removeClass(options.focusClass);\n            });\n            return input;\n        }\n        qq(options.element).css({\n            position: \"relative\",\n            overflow: \"hidden\",\n            direction: \"ltr\"\n        });\n        qq.extend(this, {\n            getInput: function() {\n                return input;\n            },\n            getButtonId: function() {\n                return buttonId;\n            },\n            setMultiple: function(isMultiple, optInput) {\n                var input = optInput || this.getInput();\n                if (options.ios8BrowserCrashWorkaround && qq.ios8() && (qq.iosChrome() || qq.iosSafariWebView())) {\n                    input.setAttribute(\"multiple\", \"\");\n                } else {\n                    if (isMultiple) {\n                        input.setAttribute(\"multiple\", \"\");\n                    } else {\n                        input.removeAttribute(\"multiple\");\n                    }\n                }\n            },\n            setAcceptFiles: function(acceptFiles) {\n                if (acceptFiles !== options.acceptFiles) {\n                    input.setAttribute(\"accept\", acceptFiles);\n                }\n            },\n            reset: function() {\n                if (input.parentNode) {\n                    qq(input).remove();\n                }\n                qq(options.element).removeClass(options.focusClass);\n                input = null;\n                input = createInput();\n            }\n        });\n        input = createInput();\n    };\n    qq.UploadButton.BUTTON_ID_ATTR_NAME = \"qq-button-id\";\n    qq.UploadData = function(uploaderProxy) {\n        \"use strict\";\n        var data = [], byUuid = {}, byStatus = {}, byProxyGroupId = {}, byBatchId = {};\n        function getDataByIds(idOrIds) {\n            if (qq.isArray(idOrIds)) {\n                var entries = [];\n                qq.each(idOrIds, function(idx, id) {\n                    entries.push(data[id]);\n                });\n                return entries;\n            }\n            return data[idOrIds];\n        }\n        function getDataByUuids(uuids) {\n            if (qq.isArray(uuids)) {\n                var entries = [];\n                qq.each(uuids, function(idx, uuid) {\n                    entries.push(data[byUuid[uuid]]);\n                });\n                return entries;\n            }\n            return data[byUuid[uuids]];\n        }\n        function getDataByStatus(status) {\n            var statusResults = [], statuses = [].concat(status);\n            qq.each(statuses, function(index, statusEnum) {\n                var statusResultIndexes = byStatus[statusEnum];\n                if (statusResultIndexes !== undefined) {\n                    qq.each(statusResultIndexes, function(i, dataIndex) {\n                        statusResults.push(data[dataIndex]);\n                    });\n                }\n            });\n            return statusResults;\n        }\n        qq.extend(this, {\n            addFile: function(spec) {\n                var status = spec.status || qq.status.SUBMITTING, id = data.push({\n                    name: spec.name,\n                    originalName: spec.name,\n                    uuid: spec.uuid,\n                    size: spec.size == null ? -1 : spec.size,\n                    status: status,\n                    file: spec.file\n                }) - 1;\n                if (spec.batchId) {\n                    data[id].batchId = spec.batchId;\n                    if (byBatchId[spec.batchId] === undefined) {\n                        byBatchId[spec.batchId] = [];\n                    }\n                    byBatchId[spec.batchId].push(id);\n                }\n                if (spec.proxyGroupId) {\n                    data[id].proxyGroupId = spec.proxyGroupId;\n                    if (byProxyGroupId[spec.proxyGroupId] === undefined) {\n                        byProxyGroupId[spec.proxyGroupId] = [];\n                    }\n                    byProxyGroupId[spec.proxyGroupId].push(id);\n                }\n                data[id].id = id;\n                byUuid[spec.uuid] = id;\n                if (byStatus[status] === undefined) {\n                    byStatus[status] = [];\n                }\n                byStatus[status].push(id);\n                spec.onBeforeStatusChange && spec.onBeforeStatusChange(id);\n                uploaderProxy.onStatusChange(id, null, status);\n                return id;\n            },\n            retrieve: function(optionalFilter) {\n                if (qq.isObject(optionalFilter) && data.length) {\n                    if (optionalFilter.id !== undefined) {\n                        return getDataByIds(optionalFilter.id);\n                    } else if (optionalFilter.uuid !== undefined) {\n                        return getDataByUuids(optionalFilter.uuid);\n                    } else if (optionalFilter.status) {\n                        return getDataByStatus(optionalFilter.status);\n                    }\n                } else {\n                    return qq.extend([], data, true);\n                }\n            },\n            removeFileRef: function(id) {\n                var record = getDataByIds(id);\n                if (record) {\n                    delete record.file;\n                }\n            },\n            reset: function() {\n                data = [];\n                byUuid = {};\n                byStatus = {};\n                byBatchId = {};\n            },\n            setStatus: function(id, newStatus) {\n                var oldStatus = data[id].status, byStatusOldStatusIndex = qq.indexOf(byStatus[oldStatus], id);\n                byStatus[oldStatus].splice(byStatusOldStatusIndex, 1);\n                data[id].status = newStatus;\n                if (byStatus[newStatus] === undefined) {\n                    byStatus[newStatus] = [];\n                }\n                byStatus[newStatus].push(id);\n                uploaderProxy.onStatusChange(id, oldStatus, newStatus);\n            },\n            uuidChanged: function(id, newUuid) {\n                var oldUuid = data[id].uuid;\n                data[id].uuid = newUuid;\n                byUuid[newUuid] = id;\n                delete byUuid[oldUuid];\n            },\n            updateName: function(id, newName) {\n                data[id].name = newName;\n            },\n            updateSize: function(id, newSize) {\n                data[id].size = newSize;\n            },\n            setParentId: function(targetId, parentId) {\n                data[targetId].parentId = parentId;\n            },\n            getIdsInProxyGroup: function(id) {\n                var proxyGroupId = data[id].proxyGroupId;\n                if (proxyGroupId) {\n                    return byProxyGroupId[proxyGroupId];\n                }\n                return [];\n            },\n            getIdsInBatch: function(id) {\n                var batchId = data[id].batchId;\n                return byBatchId[batchId];\n            }\n        });\n    };\n    qq.status = {\n        SUBMITTING: \"submitting\",\n        SUBMITTED: \"submitted\",\n        REJECTED: \"rejected\",\n        QUEUED: \"queued\",\n        CANCELED: \"canceled\",\n        PAUSED: \"paused\",\n        UPLOADING: \"uploading\",\n        UPLOAD_FINALIZING: \"upload finalizing\",\n        UPLOAD_RETRYING: \"retrying upload\",\n        UPLOAD_SUCCESSFUL: \"upload successful\",\n        UPLOAD_FAILED: \"upload failed\",\n        DELETE_FAILED: \"delete failed\",\n        DELETING: \"deleting\",\n        DELETED: \"deleted\"\n    };\n    (function() {\n        \"use strict\";\n        qq.basePublicApi = {\n            addBlobs: function(blobDataOrArray, params, endpoint) {\n                this.addFiles(blobDataOrArray, params, endpoint);\n            },\n            addInitialFiles: function(cannedFileList) {\n                var self = this;\n                qq.each(cannedFileList, function(index, cannedFile) {\n                    self._addCannedFile(cannedFile);\n                });\n            },\n            addFiles: function(data, params, endpoint) {\n                this._maybeHandleIos8SafariWorkaround();\n                var batchId = this._storedIds.length === 0 ? qq.getUniqueId() : this._currentBatchId, processBlob = qq.bind(function(blob) {\n                    this._handleNewFile({\n                        blob: blob,\n                        name: this._options.blobs.defaultName\n                    }, batchId, verifiedFiles);\n                }, this), processBlobData = qq.bind(function(blobData) {\n                    this._handleNewFile(blobData, batchId, verifiedFiles);\n                }, this), processCanvas = qq.bind(function(canvas) {\n                    var blob = qq.canvasToBlob(canvas);\n                    this._handleNewFile({\n                        blob: blob,\n                        name: this._options.blobs.defaultName + \".png\"\n                    }, batchId, verifiedFiles);\n                }, this), processCanvasData = qq.bind(function(canvasData) {\n                    var normalizedQuality = canvasData.quality && canvasData.quality / 100, blob = qq.canvasToBlob(canvasData.canvas, canvasData.type, normalizedQuality);\n                    this._handleNewFile({\n                        blob: blob,\n                        name: canvasData.name\n                    }, batchId, verifiedFiles);\n                }, this), processFileOrInput = qq.bind(function(fileOrInput) {\n                    if (qq.isInput(fileOrInput) && qq.supportedFeatures.ajaxUploading) {\n                        var files = Array.prototype.slice.call(fileOrInput.files), self = this;\n                        qq.each(files, function(idx, file) {\n                            self._handleNewFile(file, batchId, verifiedFiles);\n                        });\n                    } else {\n                        this._handleNewFile(fileOrInput, batchId, verifiedFiles);\n                    }\n                }, this), normalizeData = function() {\n                    if (qq.isFileList(data)) {\n                        data = Array.prototype.slice.call(data);\n                    }\n                    data = [].concat(data);\n                }, self = this, verifiedFiles = [];\n                this._currentBatchId = batchId;\n                if (data) {\n                    normalizeData();\n                    qq.each(data, function(idx, fileContainer) {\n                        if (qq.isFileOrInput(fileContainer)) {\n                            processFileOrInput(fileContainer);\n                        } else if (qq.isBlob(fileContainer)) {\n                            processBlob(fileContainer);\n                        } else if (qq.isObject(fileContainer)) {\n                            if (fileContainer.blob && fileContainer.name) {\n                                processBlobData(fileContainer);\n                            } else if (fileContainer.canvas && fileContainer.name) {\n                                processCanvasData(fileContainer);\n                            }\n                        } else if (fileContainer.tagName && fileContainer.tagName.toLowerCase() === \"canvas\") {\n                            processCanvas(fileContainer);\n                        } else {\n                            self.log(fileContainer + \" is not a valid file container!  Ignoring!\", \"warn\");\n                        }\n                    });\n                    this.log(\"Received \" + verifiedFiles.length + \" files.\");\n                    this._prepareItemsForUpload(verifiedFiles, params, endpoint);\n                }\n            },\n            cancel: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (uploadData && uploadData.status === qq.status.UPLOAD_FINALIZING) {\n                    this.log(qq.format(\"Ignoring cancel for file ID {} ({}).  Finalizing upload.\", id, this.getName(id)), \"error\");\n                } else {\n                    this._handler.cancel(id);\n                }\n            },\n            cancelAll: function() {\n                var storedIdsCopy = [], self = this;\n                qq.extend(storedIdsCopy, this._storedIds);\n                qq.each(storedIdsCopy, function(idx, storedFileId) {\n                    self.cancel(storedFileId);\n                });\n                this._handler.cancelAll();\n            },\n            clearStoredFiles: function() {\n                this._storedIds = [];\n            },\n            continueUpload: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) {\n                    return false;\n                }\n                if (uploadData.status === qq.status.PAUSED) {\n                    this.log(qq.format(\"Paused file ID {} ({}) will be continued.  Not paused.\", id, this.getName(id)));\n                    this._uploadFile(id);\n                    return true;\n                } else {\n                    this.log(qq.format(\"Ignoring continue for file ID {} ({}).  Not paused.\", id, this.getName(id)), \"error\");\n                }\n                return false;\n            },\n            deleteFile: function(id) {\n                return this._onSubmitDelete(id);\n            },\n            doesExist: function(fileOrBlobId) {\n                return this._handler.isValid(fileOrBlobId);\n            },\n            drawThumbnail: function(fileId, imgOrCanvas, maxSize, fromServer, customResizeFunction) {\n                var promiseToReturn = new qq.Promise(), fileOrUrl, options;\n                if (this._imageGenerator) {\n                    fileOrUrl = this._thumbnailUrls[fileId];\n                    options = {\n                        customResizeFunction: customResizeFunction,\n                        maxSize: maxSize > 0 ? maxSize : null,\n                        scale: maxSize > 0\n                    };\n                    if (!fromServer && qq.supportedFeatures.imagePreviews) {\n                        fileOrUrl = this.getFile(fileId);\n                    }\n                    if (fileOrUrl == null) {\n                        promiseToReturn.failure({\n                            container: imgOrCanvas,\n                            error: \"File or URL not found.\"\n                        });\n                    } else {\n                        this._imageGenerator.generate(fileOrUrl, imgOrCanvas, options).then(function success(modifiedContainer) {\n                            promiseToReturn.success(modifiedContainer);\n                        }, function failure(container, reason) {\n                            promiseToReturn.failure({\n                                container: container,\n                                error: reason || \"Problem generating thumbnail\"\n                            });\n                        });\n                    }\n                } else {\n                    promiseToReturn.failure({\n                        container: imgOrCanvas,\n                        error: \"Missing image generator module\"\n                    });\n                }\n                return promiseToReturn;\n            },\n            getButton: function(fileId) {\n                return this._getButton(this._buttonIdsForFileIds[fileId]);\n            },\n            getEndpoint: function(fileId) {\n                return this._endpointStore.get(fileId);\n            },\n            getFile: function(fileOrBlobId) {\n                var file = this._handler.getFile(fileOrBlobId);\n                var uploadDataRecord;\n                if (!file) {\n                    uploadDataRecord = this._uploadData.retrieve({\n                        id: fileOrBlobId\n                    });\n                    if (uploadDataRecord) {\n                        file = uploadDataRecord.file;\n                    }\n                }\n                return file || null;\n            },\n            getInProgress: function() {\n                return this._uploadData.retrieve({\n                    status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED ]\n                }).length;\n            },\n            getName: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).name;\n            },\n            getParentId: function(id) {\n                var uploadDataEntry = this.getUploads({\n                    id: id\n                }), parentId = null;\n                if (uploadDataEntry) {\n                    if (uploadDataEntry.parentId !== undefined) {\n                        parentId = uploadDataEntry.parentId;\n                    }\n                }\n                return parentId;\n            },\n            getResumableFilesData: function() {\n                return this._handler.getResumableFilesData();\n            },\n            getSize: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).size;\n            },\n            getNetUploads: function() {\n                return this._netUploaded;\n            },\n            getRemainingAllowedItems: function() {\n                var allowedItems = this._currentItemLimit;\n                if (allowedItems > 0) {\n                    return allowedItems - this._netUploadedOrQueued;\n                }\n                return null;\n            },\n            getUploads: function(optionalFilter) {\n                return this._uploadData.retrieve(optionalFilter);\n            },\n            getUuid: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).uuid;\n            },\n            isResumable: function(id) {\n                return this._handler.hasResumeRecord(id);\n            },\n            log: function(str, level) {\n                if (this._options.debug && (!level || level === \"info\")) {\n                    qq.log(\"[Fine Uploader \" + qq.version + \"] \" + str);\n                } else if (level && level !== \"info\") {\n                    qq.log(\"[Fine Uploader \" + qq.version + \"] \" + str, level);\n                }\n            },\n            pauseUpload: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) {\n                    return false;\n                }\n                if (qq.indexOf([ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING ], uploadData.status) >= 0) {\n                    if (this._handler.pause(id)) {\n                        this._uploadData.setStatus(id, qq.status.PAUSED);\n                        return true;\n                    } else {\n                        this.log(qq.format(\"Unable to pause file ID {} ({}).\", id, this.getName(id)), \"error\");\n                    }\n                } else {\n                    this.log(qq.format(\"Ignoring pause for file ID {} ({}).  Not in progress.\", id, this.getName(id)), \"error\");\n                }\n                return false;\n            },\n            removeFileRef: function(id) {\n                this._handler.expunge(id);\n                this._uploadData.removeFileRef(id);\n            },\n            reset: function() {\n                this.log(\"Resetting uploader...\");\n                this._handler.reset();\n                this._storedIds = [];\n                this._autoRetries = [];\n                this._retryTimeouts = [];\n                this._preventRetries = [];\n                this._thumbnailUrls = [];\n                qq.each(this._buttons, function(idx, button) {\n                    button.reset();\n                });\n                this._paramsStore.reset();\n                this._endpointStore.reset();\n                this._netUploadedOrQueued = 0;\n                this._netUploaded = 0;\n                this._uploadData.reset();\n                this._buttonIdsForFileIds = [];\n                this._pasteHandler && this._pasteHandler.reset();\n                this._options.session.refreshOnReset && this._refreshSessionData();\n                this._succeededSinceLastAllComplete = [];\n                this._failedSinceLastAllComplete = [];\n                this._totalProgress && this._totalProgress.reset();\n                this._customResumeDataStore.reset();\n            },\n            retry: function(id) {\n                return this._manualRetry(id);\n            },\n            scaleImage: function(id, specs) {\n                var self = this;\n                return qq.Scaler.prototype.scaleImage(id, specs, {\n                    log: qq.bind(self.log, self),\n                    getFile: qq.bind(self.getFile, self),\n                    uploadData: self._uploadData\n                });\n            },\n            setCustomHeaders: function(headers, id) {\n                this._customHeadersStore.set(headers, id);\n            },\n            setCustomResumeData: function(id, data) {\n                this._customResumeDataStore.set(data, id);\n            },\n            setDeleteFileCustomHeaders: function(headers, id) {\n                this._deleteFileCustomHeadersStore.set(headers, id);\n            },\n            setDeleteFileEndpoint: function(endpoint, id) {\n                this._deleteFileEndpointStore.set(endpoint, id);\n            },\n            setDeleteFileParams: function(params, id) {\n                this._deleteFileParamsStore.set(params, id);\n            },\n            setEndpoint: function(endpoint, id) {\n                this._endpointStore.set(endpoint, id);\n            },\n            setForm: function(elementOrId) {\n                this._updateFormSupportAndParams(elementOrId);\n            },\n            setItemLimit: function(newItemLimit) {\n                this._currentItemLimit = newItemLimit;\n            },\n            setName: function(id, newName) {\n                this._uploadData.updateName(id, newName);\n            },\n            setParams: function(params, id) {\n                this._paramsStore.set(params, id);\n            },\n            setUuid: function(id, newUuid) {\n                return this._uploadData.uuidChanged(id, newUuid);\n            },\n            setStatus: function(id, newStatus) {\n                var fileRecord = this.getUploads({\n                    id: id\n                });\n                if (!fileRecord) {\n                    throw new qq.Error(id + \" is not a valid file ID.\");\n                }\n                switch (newStatus) {\n                  case qq.status.DELETED:\n                    this._onDeleteComplete(id, null, false);\n                    break;\n\n                  case qq.status.DELETE_FAILED:\n                    this._onDeleteComplete(id, null, true);\n                    break;\n\n                  default:\n                    var errorMessage = \"Method setStatus called on '\" + name + \"' not implemented yet for \" + newStatus;\n                    this.log(errorMessage);\n                    throw new qq.Error(errorMessage);\n                }\n            },\n            uploadStoredFiles: function() {\n                if (this._storedIds.length === 0) {\n                    this._itemError(\"noFilesError\");\n                } else {\n                    this._uploadStoredFiles();\n                }\n            }\n        };\n        qq.basePrivateApi = {\n            _addCannedFile: function(sessionData) {\n                var self = this;\n                return this._uploadData.addFile({\n                    uuid: sessionData.uuid,\n                    name: sessionData.name,\n                    size: sessionData.size,\n                    status: qq.status.UPLOAD_SUCCESSFUL,\n                    onBeforeStatusChange: function(id) {\n                        sessionData.deleteFileEndpoint && self.setDeleteFileEndpoint(sessionData.deleteFileEndpoint, id);\n                        sessionData.deleteFileParams && self.setDeleteFileParams(sessionData.deleteFileParams, id);\n                        if (sessionData.thumbnailUrl) {\n                            self._thumbnailUrls[id] = sessionData.thumbnailUrl;\n                        }\n                        self._netUploaded++;\n                        self._netUploadedOrQueued++;\n                    }\n                });\n            },\n            _annotateWithButtonId: function(file, associatedInput) {\n                if (qq.isFile(file)) {\n                    file.qqButtonId = this._getButtonId(associatedInput);\n                }\n            },\n            _batchError: function(message) {\n                this._options.callbacks.onError(null, null, message, undefined);\n            },\n            _createDeleteHandler: function() {\n                var self = this;\n                return new qq.DeleteFileAjaxRequester({\n                    method: this._options.deleteFile.method.toUpperCase(),\n                    maxConnections: this._options.maxConnections,\n                    uuidParamName: this._options.request.uuidName,\n                    customHeaders: this._deleteFileCustomHeadersStore,\n                    paramsStore: this._deleteFileParamsStore,\n                    endpointStore: this._deleteFileEndpointStore,\n                    cors: this._options.cors,\n                    log: qq.bind(self.log, self),\n                    onDelete: function(id) {\n                        self._onDelete(id);\n                        self._options.callbacks.onDelete(id);\n                    },\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {\n                        self._onDeleteComplete(id, xhrOrXdr, isError);\n                        self._options.callbacks.onDeleteComplete(id, xhrOrXdr, isError);\n                    }\n                });\n            },\n            _createPasteHandler: function() {\n                var self = this;\n                return new qq.PasteSupport({\n                    targetElement: this._options.paste.targetElement,\n                    callbacks: {\n                        log: qq.bind(self.log, self),\n                        pasteReceived: function(blob) {\n                            self._handleCheckedCallback({\n                                name: \"onPasteReceived\",\n                                callback: qq.bind(self._options.callbacks.onPasteReceived, self, blob),\n                                onSuccess: qq.bind(self._handlePasteSuccess, self, blob),\n                                identifier: \"pasted image\"\n                            });\n                        }\n                    }\n                });\n            },\n            _createStore: function(initialValue, _readOnlyValues_) {\n                var store = {}, catchall = initialValue, perIdReadOnlyValues = {}, readOnlyValues = _readOnlyValues_, copy = function(orig) {\n                    if (qq.isObject(orig)) {\n                        return qq.extend({}, orig);\n                    }\n                    return orig;\n                }, getReadOnlyValues = function() {\n                    if (qq.isFunction(readOnlyValues)) {\n                        return readOnlyValues();\n                    }\n                    return readOnlyValues;\n                }, includeReadOnlyValues = function(id, existing) {\n                    if (readOnlyValues && qq.isObject(existing)) {\n                        qq.extend(existing, getReadOnlyValues());\n                    }\n                    if (perIdReadOnlyValues[id]) {\n                        qq.extend(existing, perIdReadOnlyValues[id]);\n                    }\n                };\n                return {\n                    set: function(val, id) {\n                        if (id == null) {\n                            store = {};\n                            catchall = copy(val);\n                        } else {\n                            store[id] = copy(val);\n                        }\n                    },\n                    get: function(id) {\n                        var values;\n                        if (id != null && store[id]) {\n                            values = store[id];\n                        } else {\n                            values = copy(catchall);\n                        }\n                        includeReadOnlyValues(id, values);\n                        return copy(values);\n                    },\n                    addReadOnly: function(id, values) {\n                        if (qq.isObject(store)) {\n                            if (id === null) {\n                                if (qq.isFunction(values)) {\n                                    readOnlyValues = values;\n                                } else {\n                                    readOnlyValues = readOnlyValues || {};\n                                    qq.extend(readOnlyValues, values);\n                                }\n                            } else {\n                                perIdReadOnlyValues[id] = perIdReadOnlyValues[id] || {};\n                                qq.extend(perIdReadOnlyValues[id], values);\n                            }\n                        }\n                    },\n                    remove: function(fileId) {\n                        return delete store[fileId];\n                    },\n                    reset: function() {\n                        store = {};\n                        perIdReadOnlyValues = {};\n                        catchall = initialValue;\n                    }\n                };\n            },\n            _createUploadDataTracker: function() {\n                var self = this;\n                return new qq.UploadData({\n                    getName: function(id) {\n                        return self.getName(id);\n                    },\n                    getUuid: function(id) {\n                        return self.getUuid(id);\n                    },\n                    getSize: function(id) {\n                        return self.getSize(id);\n                    },\n                    onStatusChange: function(id, oldStatus, newStatus) {\n                        self._onUploadStatusChange(id, oldStatus, newStatus);\n                        self._options.callbacks.onStatusChange(id, oldStatus, newStatus);\n                        self._maybeAllComplete(id, newStatus);\n                        if (self._totalProgress) {\n                            setTimeout(function() {\n                                self._totalProgress.onStatusChange(id, oldStatus, newStatus);\n                            }, 0);\n                        }\n                    }\n                });\n            },\n            _createUploadButton: function(spec) {\n                var self = this, acceptFiles = spec.accept || this._options.validation.acceptFiles, allowedExtensions = spec.allowedExtensions || this._options.validation.allowedExtensions, button;\n                function allowMultiple() {\n                    if (qq.supportedFeatures.ajaxUploading) {\n                        if (self._options.workarounds.iosEmptyVideos && qq.ios() && !qq.ios6() && self._isAllowedExtension(allowedExtensions, \".mov\")) {\n                            return false;\n                        }\n                        if (spec.multiple === undefined) {\n                            return self._options.multiple;\n                        }\n                        return spec.multiple;\n                    }\n                    return false;\n                }\n                button = new qq.UploadButton({\n                    acceptFiles: acceptFiles,\n                    element: spec.element,\n                    focusClass: this._options.classes.buttonFocus,\n                    folders: spec.folders,\n                    hoverClass: this._options.classes.buttonHover,\n                    ios8BrowserCrashWorkaround: this._options.workarounds.ios8BrowserCrash,\n                    multiple: allowMultiple(),\n                    name: this._options.request.inputName,\n                    onChange: function(input) {\n                        self._onInputChange(input);\n                    },\n                    title: spec.title == null ? this._options.text.fileInputTitle : spec.title\n                });\n                this._disposeSupport.addDisposer(function() {\n                    button.dispose();\n                });\n                self._buttons.push(button);\n                return button;\n            },\n            _createUploadHandler: function(additionalOptions, namespace) {\n                var self = this, lastOnProgress = {}, options = {\n                    debug: this._options.debug,\n                    maxConnections: this._options.maxConnections,\n                    cors: this._options.cors,\n                    paramsStore: this._paramsStore,\n                    endpointStore: this._endpointStore,\n                    chunking: this._options.chunking,\n                    resume: this._options.resume,\n                    blobs: this._options.blobs,\n                    log: qq.bind(self.log, self),\n                    preventRetryParam: this._options.retry.preventRetryResponseProperty,\n                    onProgress: function(id, name, loaded, total) {\n                        if (loaded < 0 || total < 0) {\n                            return;\n                        }\n                        if (lastOnProgress[id]) {\n                            if (lastOnProgress[id].loaded !== loaded || lastOnProgress[id].total !== total) {\n                                self._onProgress(id, name, loaded, total);\n                                self._options.callbacks.onProgress(id, name, loaded, total);\n                            }\n                        } else {\n                            self._onProgress(id, name, loaded, total);\n                            self._options.callbacks.onProgress(id, name, loaded, total);\n                        }\n                        lastOnProgress[id] = {\n                            loaded: loaded,\n                            total: total\n                        };\n                    },\n                    onComplete: function(id, name, result, xhr) {\n                        delete lastOnProgress[id];\n                        var status = self.getUploads({\n                            id: id\n                        }).status, retVal;\n                        if (status === qq.status.UPLOAD_SUCCESSFUL || status === qq.status.UPLOAD_FAILED) {\n                            return;\n                        }\n                        retVal = self._onComplete(id, name, result, xhr);\n                        if (retVal instanceof qq.Promise) {\n                            retVal.done(function() {\n                                self._options.callbacks.onComplete(id, name, result, xhr);\n                            });\n                        } else {\n                            self._options.callbacks.onComplete(id, name, result, xhr);\n                        }\n                    },\n                    onCancel: function(id, name, cancelFinalizationEffort) {\n                        var promise = new qq.Promise();\n                        self._handleCheckedCallback({\n                            name: \"onCancel\",\n                            callback: qq.bind(self._options.callbacks.onCancel, self, id, name),\n                            onFailure: promise.failure,\n                            onSuccess: function() {\n                                cancelFinalizationEffort.then(function() {\n                                    self._onCancel(id, name);\n                                });\n                                promise.success();\n                            },\n                            identifier: id\n                        });\n                        return promise;\n                    },\n                    onUploadPrep: qq.bind(this._onUploadPrep, this),\n                    onUpload: function(id, name) {\n                        self._onUpload(id, name);\n                        var onUploadResult = self._options.callbacks.onUpload(id, name);\n                        if (qq.isGenericPromise(onUploadResult)) {\n                            self.log(qq.format(\"onUpload for {} returned a Promise - waiting for resolution.\", id));\n                            return onUploadResult;\n                        }\n                        return new qq.Promise().success();\n                    },\n                    onUploadChunk: function(id, name, chunkData) {\n                        self._onUploadChunk(id, chunkData);\n                        var onUploadChunkResult = self._options.callbacks.onUploadChunk(id, name, chunkData);\n                        if (qq.isGenericPromise(onUploadChunkResult)) {\n                            self.log(qq.format(\"onUploadChunk for {}.{} returned a Promise - waiting for resolution.\", id, chunkData.partIndex));\n                            return onUploadChunkResult;\n                        }\n                        return new qq.Promise().success();\n                    },\n                    onUploadChunkSuccess: function(id, chunkData, result, xhr) {\n                        self._onUploadChunkSuccess(id, chunkData);\n                        self._options.callbacks.onUploadChunkSuccess.apply(self, arguments);\n                    },\n                    onResume: function(id, name, chunkData, customResumeData) {\n                        return self._options.callbacks.onResume(id, name, chunkData, customResumeData);\n                    },\n                    onAutoRetry: function(id, name, responseJSON, xhr) {\n                        return self._onAutoRetry.apply(self, arguments);\n                    },\n                    onUuidChanged: function(id, newUuid) {\n                        self.log(\"Server requested UUID change from '\" + self.getUuid(id) + \"' to '\" + newUuid + \"'\");\n                        self.setUuid(id, newUuid);\n                    },\n                    getName: qq.bind(self.getName, self),\n                    getUuid: qq.bind(self.getUuid, self),\n                    getSize: qq.bind(self.getSize, self),\n                    setSize: qq.bind(self._setSize, self),\n                    getDataByUuid: function(uuid) {\n                        return self.getUploads({\n                            uuid: uuid\n                        });\n                    },\n                    isQueued: function(id) {\n                        var status = self.getUploads({\n                            id: id\n                        }).status;\n                        return status === qq.status.QUEUED || status === qq.status.SUBMITTED || status === qq.status.UPLOAD_RETRYING || status === qq.status.PAUSED;\n                    },\n                    getIdsInProxyGroup: self._uploadData.getIdsInProxyGroup,\n                    getIdsInBatch: self._uploadData.getIdsInBatch,\n                    isInProgress: function(id) {\n                        return self.getUploads({\n                            id: id\n                        }).status === qq.status.UPLOADING;\n                    },\n                    getCustomResumeData: qq.bind(self._getCustomResumeData, self),\n                    setStatus: function(id, status) {\n                        self._uploadData.setStatus(id, status);\n                    }\n                };\n                qq.each(this._options.request, function(prop, val) {\n                    options[prop] = val;\n                });\n                options.customHeaders = this._customHeadersStore;\n                if (additionalOptions) {\n                    qq.each(additionalOptions, function(key, val) {\n                        options[key] = val;\n                    });\n                }\n                return new qq.UploadHandlerController(options, namespace);\n            },\n            _fileOrBlobRejected: function(id) {\n                this._netUploadedOrQueued--;\n                this._uploadData.setStatus(id, qq.status.REJECTED);\n            },\n            _formatSize: function(bytes) {\n                if (bytes === 0) {\n                    return bytes + this._options.text.sizeSymbols[0];\n                }\n                var i = -1;\n                do {\n                    bytes = bytes / 1e3;\n                    i++;\n                } while (bytes > 999);\n                return Math.max(bytes, .1).toFixed(1) + this._options.text.sizeSymbols[i];\n            },\n            _generateExtraButtonSpecs: function() {\n                var self = this;\n                this._extraButtonSpecs = {};\n                qq.each(this._options.extraButtons, function(idx, extraButtonOptionEntry) {\n                    var multiple = extraButtonOptionEntry.multiple, validation = qq.extend({}, self._options.validation, true), extraButtonSpec = qq.extend({}, extraButtonOptionEntry);\n                    if (multiple === undefined) {\n                        multiple = self._options.multiple;\n                    }\n                    if (extraButtonSpec.validation) {\n                        qq.extend(validation, extraButtonOptionEntry.validation, true);\n                    }\n                    qq.extend(extraButtonSpec, {\n                        multiple: multiple,\n                        validation: validation\n                    }, true);\n                    self._initExtraButton(extraButtonSpec);\n                });\n            },\n            _getButton: function(buttonId) {\n                var extraButtonsSpec = this._extraButtonSpecs[buttonId];\n                if (extraButtonsSpec) {\n                    return extraButtonsSpec.element;\n                } else if (buttonId === this._defaultButtonId) {\n                    return this._options.button;\n                }\n            },\n            _getButtonId: function(buttonOrFileInputOrFile) {\n                var inputs, fileInput, fileBlobOrInput = buttonOrFileInputOrFile;\n                if (fileBlobOrInput instanceof qq.BlobProxy) {\n                    fileBlobOrInput = fileBlobOrInput.referenceBlob;\n                }\n                if (fileBlobOrInput && !qq.isBlob(fileBlobOrInput)) {\n                    if (qq.isFile(fileBlobOrInput)) {\n                        return fileBlobOrInput.qqButtonId;\n                    } else if (fileBlobOrInput.tagName.toLowerCase() === \"input\" && fileBlobOrInput.type.toLowerCase() === \"file\") {\n                        return fileBlobOrInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);\n                    }\n                    inputs = fileBlobOrInput.getElementsByTagName(\"input\");\n                    qq.each(inputs, function(idx, input) {\n                        if (input.getAttribute(\"type\") === \"file\") {\n                            fileInput = input;\n                            return false;\n                        }\n                    });\n                    if (fileInput) {\n                        return fileInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);\n                    }\n                }\n            },\n            _getCustomResumeData: function(fileId) {\n                return this._customResumeDataStore.get(fileId);\n            },\n            _getNotFinished: function() {\n                return this._uploadData.retrieve({\n                    status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED, qq.status.SUBMITTING, qq.status.SUBMITTED, qq.status.PAUSED ]\n                }).length;\n            },\n            _getValidationBase: function(buttonId) {\n                var extraButtonSpec = this._extraButtonSpecs[buttonId];\n                return extraButtonSpec ? extraButtonSpec.validation : this._options.validation;\n            },\n            _getValidationDescriptor: function(fileWrapper) {\n                if (fileWrapper.file instanceof qq.BlobProxy) {\n                    return {\n                        name: qq.getFilename(fileWrapper.file.referenceBlob),\n                        size: fileWrapper.file.referenceBlob.size\n                    };\n                }\n                return {\n                    name: this.getUploads({\n                        id: fileWrapper.id\n                    }).name,\n                    size: this.getUploads({\n                        id: fileWrapper.id\n                    }).size\n                };\n            },\n            _getValidationDescriptors: function(fileWrappers) {\n                var self = this, fileDescriptors = [];\n                qq.each(fileWrappers, function(idx, fileWrapper) {\n                    fileDescriptors.push(self._getValidationDescriptor(fileWrapper));\n                });\n                return fileDescriptors;\n            },\n            _handleCameraAccess: function() {\n                if (this._options.camera.ios && qq.ios()) {\n                    var acceptIosCamera = \"image/*;capture=camera\", button = this._options.camera.button, buttonId = button ? this._getButtonId(button) : this._defaultButtonId, optionRoot = this._options;\n                    if (buttonId && buttonId !== this._defaultButtonId) {\n                        optionRoot = this._extraButtonSpecs[buttonId];\n                    }\n                    optionRoot.multiple = false;\n                    if (optionRoot.validation.acceptFiles === null) {\n                        optionRoot.validation.acceptFiles = acceptIosCamera;\n                    } else {\n                        optionRoot.validation.acceptFiles += \",\" + acceptIosCamera;\n                    }\n                    qq.each(this._buttons, function(idx, button) {\n                        if (button.getButtonId() === buttonId) {\n                            button.setMultiple(optionRoot.multiple);\n                            button.setAcceptFiles(optionRoot.acceptFiles);\n                            return false;\n                        }\n                    });\n                }\n            },\n            _handleCheckedCallback: function(details) {\n                var self = this, callbackRetVal = details.callback();\n                if (qq.isGenericPromise(callbackRetVal)) {\n                    this.log(details.name + \" - waiting for \" + details.name + \" promise to be fulfilled for \" + details.identifier);\n                    return callbackRetVal.then(function(successParam) {\n                        self.log(details.name + \" promise success for \" + details.identifier);\n                        details.onSuccess(successParam);\n                    }, function() {\n                        if (details.onFailure) {\n                            self.log(details.name + \" promise failure for \" + details.identifier);\n                            details.onFailure();\n                        } else {\n                            self.log(details.name + \" promise failure for \" + details.identifier);\n                        }\n                    });\n                }\n                if (callbackRetVal !== false) {\n                    details.onSuccess(callbackRetVal);\n                } else {\n                    if (details.onFailure) {\n                        this.log(details.name + \" - return value was 'false' for \" + details.identifier + \".  Invoking failure callback.\");\n                        details.onFailure();\n                    } else {\n                        this.log(details.name + \" - return value was 'false' for \" + details.identifier + \".  Will not proceed.\");\n                    }\n                }\n                return callbackRetVal;\n            },\n            _handleNewFile: function(file, batchId, newFileWrapperList) {\n                var self = this, uuid = qq.getUniqueId(), size = -1, name = qq.getFilename(file), actualFile = file.blob || file, handler = this._customNewFileHandler ? this._customNewFileHandler : qq.bind(self._handleNewFileGeneric, self);\n                if (!qq.isInput(actualFile) && actualFile.size >= 0) {\n                    size = actualFile.size;\n                }\n                handler(actualFile, name, uuid, size, newFileWrapperList, batchId, this._options.request.uuidName, {\n                    uploadData: self._uploadData,\n                    paramsStore: self._paramsStore,\n                    addFileToHandler: function(id, file) {\n                        self._handler.add(id, file);\n                        self._netUploadedOrQueued++;\n                        self._trackButton(id);\n                    }\n                });\n            },\n            _handleNewFileGeneric: function(file, name, uuid, size, fileList, batchId) {\n                var id = this._uploadData.addFile({\n                    uuid: uuid,\n                    name: name,\n                    size: size,\n                    batchId: batchId,\n                    file: file\n                });\n                this._handler.add(id, file);\n                this._trackButton(id);\n                this._netUploadedOrQueued++;\n                fileList.push({\n                    id: id,\n                    file: file\n                });\n            },\n            _handlePasteSuccess: function(blob, extSuppliedName) {\n                var extension = blob.type.split(\"/\")[1], name = extSuppliedName;\n                if (name == null) {\n                    name = this._options.paste.defaultName;\n                }\n                name += \".\" + extension;\n                this.addFiles({\n                    name: name,\n                    blob: blob\n                });\n            },\n            _handleDeleteSuccess: function(id) {\n                if (this.getUploads({\n                    id: id\n                }).status !== qq.status.DELETED) {\n                    var name = this.getName(id);\n                    this._netUploadedOrQueued--;\n                    this._netUploaded--;\n                    this._handler.expunge(id);\n                    this._uploadData.setStatus(id, qq.status.DELETED);\n                    this.log(\"Delete request for '\" + name + \"' has succeeded.\");\n                }\n            },\n            _handleDeleteFailed: function(id, xhrOrXdr) {\n                var name = this.getName(id);\n                this._uploadData.setStatus(id, qq.status.DELETE_FAILED);\n                this.log(\"Delete request for '\" + name + \"' has failed.\", \"error\");\n                if (!xhrOrXdr || xhrOrXdr.withCredentials === undefined) {\n                    this._options.callbacks.onError(id, name, \"Delete request failed\", xhrOrXdr);\n                } else {\n                    this._options.callbacks.onError(id, name, \"Delete request failed with response code \" + xhrOrXdr.status, xhrOrXdr);\n                }\n            },\n            _initExtraButton: function(spec) {\n                var button = this._createUploadButton({\n                    accept: spec.validation.acceptFiles,\n                    allowedExtensions: spec.validation.allowedExtensions,\n                    element: spec.element,\n                    folders: spec.folders,\n                    multiple: spec.multiple,\n                    title: spec.fileInputTitle\n                });\n                this._extraButtonSpecs[button.getButtonId()] = spec;\n            },\n            _initFormSupportAndParams: function() {\n                this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this));\n                if (this._formSupport && this._formSupport.attachedToForm) {\n                    this._paramsStore = this._createStore(this._options.request.params, this._formSupport.getFormInputsAsObject);\n                    this._options.autoUpload = this._formSupport.newAutoUpload;\n                    if (this._formSupport.newEndpoint) {\n                        this._options.request.endpoint = this._formSupport.newEndpoint;\n                    }\n                } else {\n                    this._paramsStore = this._createStore(this._options.request.params);\n                }\n            },\n            _isDeletePossible: function() {\n                if (!qq.DeleteFileAjaxRequester || !this._options.deleteFile.enabled) {\n                    return false;\n                }\n                if (this._options.cors.expected) {\n                    if (qq.supportedFeatures.deleteFileCorsXhr) {\n                        return true;\n                    }\n                    if (qq.supportedFeatures.deleteFileCorsXdr && this._options.cors.allowXdr) {\n                        return true;\n                    }\n                    return false;\n                }\n                return true;\n            },\n            _isAllowedExtension: function(allowed, fileName) {\n                var valid = false;\n                if (!allowed.length) {\n                    return true;\n                }\n                qq.each(allowed, function(idx, allowedExt) {\n                    if (qq.isString(allowedExt)) {\n                        var extRegex = new RegExp(\"\\\\.\" + allowedExt + \"$\", \"i\");\n                        if (fileName.match(extRegex) != null) {\n                            valid = true;\n                            return false;\n                        }\n                    }\n                });\n                return valid;\n            },\n            _itemError: function(code, maybeNameOrNames, item) {\n                var message = this._options.messages[code], allowedExtensions = [], names = [].concat(maybeNameOrNames), name = names[0], buttonId = this._getButtonId(item), validationBase = this._getValidationBase(buttonId), extensionsForMessage, placeholderMatch;\n                function r(name, replacement) {\n                    message = message.replace(name, replacement);\n                }\n                qq.each(validationBase.allowedExtensions, function(idx, allowedExtension) {\n                    if (qq.isString(allowedExtension)) {\n                        allowedExtensions.push(allowedExtension);\n                    }\n                });\n                extensionsForMessage = allowedExtensions.join(\", \").toLowerCase();\n                r(\"{file}\", this._options.formatFileName(name));\n                r(\"{extensions}\", extensionsForMessage);\n                r(\"{sizeLimit}\", this._formatSize(validationBase.sizeLimit));\n                r(\"{minSizeLimit}\", this._formatSize(validationBase.minSizeLimit));\n                placeholderMatch = message.match(/(\\{\\w+\\})/g);\n                if (placeholderMatch !== null) {\n                    qq.each(placeholderMatch, function(idx, placeholder) {\n                        r(placeholder, names[idx]);\n                    });\n                }\n                this._options.callbacks.onError(null, name, message, undefined);\n                return message;\n            },\n            _manualRetry: function(id, callback) {\n                if (this._onBeforeManualRetry(id)) {\n                    this._netUploadedOrQueued++;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_RETRYING);\n                    if (callback) {\n                        callback(id);\n                    } else {\n                        this._handler.retry(id);\n                    }\n                    return true;\n                }\n            },\n            _maybeAllComplete: function(id, status) {\n                var self = this, notFinished = this._getNotFinished();\n                if (status === qq.status.UPLOAD_SUCCESSFUL) {\n                    this._succeededSinceLastAllComplete.push(id);\n                } else if (status === qq.status.UPLOAD_FAILED) {\n                    this._failedSinceLastAllComplete.push(id);\n                }\n                if (notFinished === 0 && (this._succeededSinceLastAllComplete.length || this._failedSinceLastAllComplete.length)) {\n                    setTimeout(function() {\n                        self._onAllComplete(self._succeededSinceLastAllComplete, self._failedSinceLastAllComplete);\n                    }, 0);\n                }\n            },\n            _maybeHandleIos8SafariWorkaround: function() {\n                var self = this;\n                if (this._options.workarounds.ios8SafariUploads && qq.ios800() && qq.iosSafari()) {\n                    setTimeout(function() {\n                        window.alert(self._options.messages.unsupportedBrowserIos8Safari);\n                    }, 0);\n                    throw new qq.Error(this._options.messages.unsupportedBrowserIos8Safari);\n                }\n            },\n            _maybeParseAndSendUploadError: function(id, name, response, xhr) {\n                if (!response.success) {\n                    if (xhr && xhr.status !== 200 && !response.error) {\n                        this._options.callbacks.onError(id, name, \"XHR returned response code \" + xhr.status, xhr);\n                    } else {\n                        var errorReason = response.error ? response.error : this._options.text.defaultResponseError;\n                        this._options.callbacks.onError(id, name, errorReason, xhr);\n                    }\n                }\n            },\n            _maybeProcessNextItemAfterOnValidateCallback: function(validItem, items, index, params, endpoint) {\n                var self = this;\n                if (items.length > index) {\n                    if (validItem || !this._options.validation.stopOnFirstInvalidFile) {\n                        setTimeout(function() {\n                            var validationDescriptor = self._getValidationDescriptor(items[index]), buttonId = self._getButtonId(items[index].file), button = self._getButton(buttonId);\n                            self._handleCheckedCallback({\n                                name: \"onValidate\",\n                                callback: qq.bind(self._options.callbacks.onValidate, self, validationDescriptor, button),\n                                onSuccess: qq.bind(self._onValidateCallbackSuccess, self, items, index, params, endpoint),\n                                onFailure: qq.bind(self._onValidateCallbackFailure, self, items, index, params, endpoint),\n                                identifier: \"Item '\" + validationDescriptor.name + \"', size: \" + validationDescriptor.size\n                            });\n                        }, 0);\n                    } else if (!validItem) {\n                        for (;index < items.length; index++) {\n                            self._fileOrBlobRejected(items[index].id);\n                        }\n                    }\n                }\n            },\n            _onAllComplete: function(successful, failed) {\n                this._totalProgress && this._totalProgress.onAllComplete(successful, failed, this._preventRetries);\n                this._options.callbacks.onAllComplete(qq.extend([], successful), qq.extend([], failed));\n                this._succeededSinceLastAllComplete = [];\n                this._failedSinceLastAllComplete = [];\n            },\n            _onAutoRetry: function(id, name, responseJSON, xhr, callback) {\n                var self = this;\n                self._preventRetries[id] = responseJSON[self._options.retry.preventRetryResponseProperty];\n                if (self._shouldAutoRetry(id)) {\n                    var retryWaitPeriod = self._options.retry.autoAttemptDelay * 1e3;\n                    self._maybeParseAndSendUploadError.apply(self, arguments);\n                    self._options.callbacks.onAutoRetry(id, name, self._autoRetries[id]);\n                    self._onBeforeAutoRetry(id, name);\n                    self._uploadData.setStatus(id, qq.status.UPLOAD_RETRYING);\n                    self._retryTimeouts[id] = setTimeout(function() {\n                        self.log(\"Starting retry for \" + name + \"...\");\n                        if (callback) {\n                            callback(id);\n                        } else {\n                            self._handler.retry(id);\n                        }\n                    }, retryWaitPeriod);\n                    return true;\n                }\n            },\n            _onBeforeAutoRetry: function(id, name) {\n                this.log(\"Waiting \" + this._options.retry.autoAttemptDelay + \" seconds before retrying \" + name + \"...\");\n            },\n            _onBeforeManualRetry: function(id) {\n                var itemLimit = this._currentItemLimit, fileName;\n                if (this._preventRetries[id]) {\n                    this.log(\"Retries are forbidden for id \" + id, \"warn\");\n                    return false;\n                } else if (this._handler.isValid(id)) {\n                    fileName = this.getName(id);\n                    if (this._options.callbacks.onManualRetry(id, fileName) === false) {\n                        return false;\n                    }\n                    if (itemLimit > 0 && this._netUploadedOrQueued + 1 > itemLimit) {\n                        this._itemError(\"retryFailTooManyItems\");\n                        return false;\n                    }\n                    this.log(\"Retrying upload for '\" + fileName + \"' (id: \" + id + \")...\");\n                    return true;\n                } else {\n                    this.log(\"'\" + id + \"' is not a valid file ID\", \"error\");\n                    return false;\n                }\n            },\n            _onCancel: function(id, name) {\n                this._netUploadedOrQueued--;\n                clearTimeout(this._retryTimeouts[id]);\n                var storedItemIndex = qq.indexOf(this._storedIds, id);\n                if (!this._options.autoUpload && storedItemIndex >= 0) {\n                    this._storedIds.splice(storedItemIndex, 1);\n                }\n                this._uploadData.setStatus(id, qq.status.CANCELED);\n            },\n            _onComplete: function(id, name, result, xhr) {\n                if (!result.success) {\n                    this._netUploadedOrQueued--;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_FAILED);\n                    if (result[this._options.retry.preventRetryResponseProperty] === true) {\n                        this._preventRetries[id] = true;\n                    }\n                } else {\n                    if (result.thumbnailUrl) {\n                        this._thumbnailUrls[id] = result.thumbnailUrl;\n                    }\n                    this._netUploaded++;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_SUCCESSFUL);\n                }\n                this._maybeParseAndSendUploadError(id, name, result, xhr);\n                return result.success ? true : false;\n            },\n            _onDelete: function(id) {\n                this._uploadData.setStatus(id, qq.status.DELETING);\n            },\n            _onDeleteComplete: function(id, xhrOrXdr, isError) {\n                var name = this.getName(id);\n                if (isError) {\n                    this._handleDeleteFailed(id, xhrOrXdr);\n                } else {\n                    this._handleDeleteSuccess(id);\n                }\n            },\n            _onInputChange: function(input) {\n                var fileIndex;\n                if (qq.supportedFeatures.ajaxUploading) {\n                    for (fileIndex = 0; fileIndex < input.files.length; fileIndex++) {\n                        this._annotateWithButtonId(input.files[fileIndex], input);\n                    }\n                    this.addFiles(input.files);\n                } else if (input.value.length > 0) {\n                    this.addFiles(input);\n                }\n                qq.each(this._buttons, function(idx, button) {\n                    button.reset();\n                });\n            },\n            _onProgress: function(id, name, loaded, total) {\n                this._totalProgress && this._totalProgress.onIndividualProgress(id, loaded, total);\n            },\n            _onSubmit: function(id, name) {},\n            _onSubmitCallbackSuccess: function(id, name) {\n                this._onSubmit.apply(this, arguments);\n                this._uploadData.setStatus(id, qq.status.SUBMITTED);\n                this._onSubmitted.apply(this, arguments);\n                if (this._options.autoUpload) {\n                    this._options.callbacks.onSubmitted.apply(this, arguments);\n                    this._uploadFile(id);\n                } else {\n                    this._storeForLater(id);\n                    this._options.callbacks.onSubmitted.apply(this, arguments);\n                }\n            },\n            _onSubmitDelete: function(id, onSuccessCallback, additionalMandatedParams) {\n                var uuid = this.getUuid(id), adjustedOnSuccessCallback;\n                if (onSuccessCallback) {\n                    adjustedOnSuccessCallback = qq.bind(onSuccessCallback, this, id, uuid, additionalMandatedParams);\n                }\n                if (this._isDeletePossible()) {\n                    this._handleCheckedCallback({\n                        name: \"onSubmitDelete\",\n                        callback: qq.bind(this._options.callbacks.onSubmitDelete, this, id),\n                        onSuccess: adjustedOnSuccessCallback || qq.bind(this._deleteHandler.sendDelete, this, id, uuid, additionalMandatedParams),\n                        identifier: id\n                    });\n                    return true;\n                } else {\n                    this.log(\"Delete request ignored for ID \" + id + \", delete feature is disabled or request not possible \" + \"due to CORS on a user agent that does not support pre-flighting.\", \"warn\");\n                    return false;\n                }\n            },\n            _onSubmitted: function(id) {},\n            _onTotalProgress: function(loaded, total) {\n                this._options.callbacks.onTotalProgress(loaded, total);\n            },\n            _onUploadPrep: function(id) {},\n            _onUpload: function(id, name) {\n                this._uploadData.setStatus(id, qq.status.UPLOADING);\n            },\n            _onUploadChunk: function(id, chunkData) {},\n            _onUploadChunkSuccess: function(id, chunkData) {\n                if (!this._preventRetries[id] && this._options.retry.enableAuto) {\n                    this._autoRetries[id] = 0;\n                }\n            },\n            _onUploadStatusChange: function(id, oldStatus, newStatus) {\n                if (newStatus === qq.status.PAUSED) {\n                    clearTimeout(this._retryTimeouts[id]);\n                }\n            },\n            _onValidateBatchCallbackFailure: function(fileWrappers) {\n                var self = this;\n                qq.each(fileWrappers, function(idx, fileWrapper) {\n                    self._fileOrBlobRejected(fileWrapper.id);\n                });\n            },\n            _onValidateBatchCallbackSuccess: function(validationDescriptors, items, params, endpoint, button) {\n                var errorMessage, itemLimit = this._currentItemLimit, proposedNetFilesUploadedOrQueued = this._netUploadedOrQueued;\n                if (itemLimit === 0 || proposedNetFilesUploadedOrQueued <= itemLimit) {\n                    if (items.length > 0) {\n                        this._handleCheckedCallback({\n                            name: \"onValidate\",\n                            callback: qq.bind(this._options.callbacks.onValidate, this, validationDescriptors[0], button),\n                            onSuccess: qq.bind(this._onValidateCallbackSuccess, this, items, 0, params, endpoint),\n                            onFailure: qq.bind(this._onValidateCallbackFailure, this, items, 0, params, endpoint),\n                            identifier: \"Item '\" + items[0].file.name + \"', size: \" + items[0].file.size\n                        });\n                    } else {\n                        this._itemError(\"noFilesError\");\n                    }\n                } else {\n                    this._onValidateBatchCallbackFailure(items);\n                    errorMessage = this._options.messages.tooManyItemsError.replace(/\\{netItems\\}/g, proposedNetFilesUploadedOrQueued).replace(/\\{itemLimit\\}/g, itemLimit);\n                    this._batchError(errorMessage);\n                }\n            },\n            _onValidateCallbackFailure: function(items, index, params, endpoint) {\n                var nextIndex = index + 1;\n                this._fileOrBlobRejected(items[index].id, items[index].file.name);\n                this._maybeProcessNextItemAfterOnValidateCallback(false, items, nextIndex, params, endpoint);\n            },\n            _onValidateCallbackSuccess: function(items, index, params, endpoint) {\n                var self = this, nextIndex = index + 1, validationDescriptor = this._getValidationDescriptor(items[index]);\n                this._validateFileOrBlobData(items[index], validationDescriptor).then(function() {\n                    self._upload(items[index].id, params, endpoint);\n                    self._maybeProcessNextItemAfterOnValidateCallback(true, items, nextIndex, params, endpoint);\n                }, function() {\n                    self._maybeProcessNextItemAfterOnValidateCallback(false, items, nextIndex, params, endpoint);\n                });\n            },\n            _prepareItemsForUpload: function(items, params, endpoint) {\n                if (items.length === 0) {\n                    this._itemError(\"noFilesError\");\n                    return;\n                }\n                var validationDescriptors = this._getValidationDescriptors(items), buttonId = this._getButtonId(items[0].file), button = this._getButton(buttonId);\n                this._handleCheckedCallback({\n                    name: \"onValidateBatch\",\n                    callback: qq.bind(this._options.callbacks.onValidateBatch, this, validationDescriptors, button),\n                    onSuccess: qq.bind(this._onValidateBatchCallbackSuccess, this, validationDescriptors, items, params, endpoint, button),\n                    onFailure: qq.bind(this._onValidateBatchCallbackFailure, this, items),\n                    identifier: \"batch validation\"\n                });\n            },\n            _preventLeaveInProgress: function() {\n                var self = this;\n                this._disposeSupport.attach(window, \"beforeunload\", function(e) {\n                    if (self.getInProgress()) {\n                        e = e || window.event;\n                        e.returnValue = self._options.messages.onLeave;\n                        return self._options.messages.onLeave;\n                    }\n                });\n            },\n            _refreshSessionData: function() {\n                var self = this, options = this._options.session;\n                if (qq.Session && this._options.session.endpoint != null) {\n                    if (!this._session) {\n                        qq.extend(options, {\n                            cors: this._options.cors\n                        });\n                        options.log = qq.bind(this.log, this);\n                        options.addFileRecord = qq.bind(this._addCannedFile, this);\n                        this._session = new qq.Session(options);\n                    }\n                    setTimeout(function() {\n                        self._session.refresh().then(function(response, xhrOrXdr) {\n                            self._sessionRequestComplete();\n                            self._options.callbacks.onSessionRequestComplete(response, true, xhrOrXdr);\n                        }, function(response, xhrOrXdr) {\n                            self._options.callbacks.onSessionRequestComplete(response, false, xhrOrXdr);\n                        });\n                    }, 0);\n                }\n            },\n            _sessionRequestComplete: function() {},\n            _setSize: function(id, newSize) {\n                this._uploadData.updateSize(id, newSize);\n                this._totalProgress && this._totalProgress.onNewSize(id);\n            },\n            _shouldAutoRetry: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!this._preventRetries[id] && this._options.retry.enableAuto && uploadData.status !== qq.status.PAUSED) {\n                    if (this._autoRetries[id] === undefined) {\n                        this._autoRetries[id] = 0;\n                    }\n                    if (this._autoRetries[id] < this._options.retry.maxAutoAttempts) {\n                        this._autoRetries[id] += 1;\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _storeForLater: function(id) {\n                this._storedIds.push(id);\n            },\n            _trackButton: function(id) {\n                var buttonId;\n                if (qq.supportedFeatures.ajaxUploading) {\n                    buttonId = this._handler.getFile(id).qqButtonId;\n                } else {\n                    buttonId = this._getButtonId(this._handler.getInput(id));\n                }\n                if (buttonId) {\n                    this._buttonIdsForFileIds[id] = buttonId;\n                }\n            },\n            _updateFormSupportAndParams: function(formElementOrId) {\n                this._options.form.element = formElementOrId;\n                this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this));\n                if (this._formSupport && this._formSupport.attachedToForm) {\n                    this._paramsStore.addReadOnly(null, this._formSupport.getFormInputsAsObject);\n                    this._options.autoUpload = this._formSupport.newAutoUpload;\n                    if (this._formSupport.newEndpoint) {\n                        this.setEndpoint(this._formSupport.newEndpoint);\n                    }\n                }\n            },\n            _upload: function(id, params, endpoint) {\n                var name = this.getName(id);\n                if (params) {\n                    this.setParams(params, id);\n                }\n                if (endpoint) {\n                    this.setEndpoint(endpoint, id);\n                }\n                this._handleCheckedCallback({\n                    name: \"onSubmit\",\n                    callback: qq.bind(this._options.callbacks.onSubmit, this, id, name),\n                    onSuccess: qq.bind(this._onSubmitCallbackSuccess, this, id, name),\n                    onFailure: qq.bind(this._fileOrBlobRejected, this, id, name),\n                    identifier: id\n                });\n            },\n            _uploadFile: function(id) {\n                if (!this._handler.upload(id)) {\n                    this._uploadData.setStatus(id, qq.status.QUEUED);\n                }\n            },\n            _uploadStoredFiles: function() {\n                var idToUpload, stillSubmitting, self = this;\n                while (this._storedIds.length) {\n                    idToUpload = this._storedIds.shift();\n                    this._uploadFile(idToUpload);\n                }\n                stillSubmitting = this.getUploads({\n                    status: qq.status.SUBMITTING\n                }).length;\n                if (stillSubmitting) {\n                    qq.log(\"Still waiting for \" + stillSubmitting + \" files to clear submit queue. Will re-parse stored IDs array shortly.\");\n                    setTimeout(function() {\n                        self._uploadStoredFiles();\n                    }, 1e3);\n                }\n            },\n            _validateFileOrBlobData: function(fileWrapper, validationDescriptor) {\n                var self = this, file = function() {\n                    if (fileWrapper.file instanceof qq.BlobProxy) {\n                        return fileWrapper.file.referenceBlob;\n                    }\n                    return fileWrapper.file;\n                }(), name = validationDescriptor.name, size = validationDescriptor.size, buttonId = this._getButtonId(fileWrapper.file), validationBase = this._getValidationBase(buttonId), validityChecker = new qq.Promise();\n                validityChecker.then(function() {}, function() {\n                    self._fileOrBlobRejected(fileWrapper.id, name);\n                });\n                if (qq.isFileOrInput(file) && !this._isAllowedExtension(validationBase.allowedExtensions, name)) {\n                    this._itemError(\"typeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (!this._options.validation.allowEmpty && size === 0) {\n                    this._itemError(\"emptyError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (size > 0 && validationBase.sizeLimit && size > validationBase.sizeLimit) {\n                    this._itemError(\"sizeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (size > 0 && size < validationBase.minSizeLimit) {\n                    this._itemError(\"minSizeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (qq.ImageValidation && qq.supportedFeatures.imagePreviews && qq.isFile(file)) {\n                    new qq.ImageValidation(file, qq.bind(self.log, self)).validate(validationBase.image).then(validityChecker.success, function(errorCode) {\n                        self._itemError(errorCode + \"ImageError\", name, file);\n                        validityChecker.failure();\n                    });\n                } else {\n                    validityChecker.success();\n                }\n                return validityChecker;\n            },\n            _wrapCallbacks: function() {\n                var self, safeCallback, prop;\n                self = this;\n                safeCallback = function(name, callback, args) {\n                    var errorMsg;\n                    try {\n                        return callback.apply(self, args);\n                    } catch (exception) {\n                        errorMsg = exception.message || exception.toString();\n                        self.log(\"Caught exception in '\" + name + \"' callback - \" + errorMsg, \"error\");\n                    }\n                };\n                for (prop in this._options.callbacks) {\n                    (function() {\n                        var callbackName, callbackFunc;\n                        callbackName = prop;\n                        callbackFunc = self._options.callbacks[callbackName];\n                        self._options.callbacks[callbackName] = function() {\n                            return safeCallback(callbackName, callbackFunc, arguments);\n                        };\n                    })();\n                }\n            }\n        };\n    })();\n    (function() {\n        \"use strict\";\n        qq.FineUploaderBasic = function(o) {\n            var self = this;\n            this._options = {\n                debug: false,\n                button: null,\n                multiple: true,\n                maxConnections: 3,\n                disableCancelForFormUploads: false,\n                autoUpload: true,\n                warnBeforeUnload: true,\n                request: {\n                    customHeaders: {},\n                    endpoint: \"/server/upload\",\n                    filenameParam: \"qqfilename\",\n                    forceMultipart: true,\n                    inputName: \"qqfile\",\n                    method: \"POST\",\n                    omitDefaultParams: false,\n                    params: {},\n                    paramsInBody: true,\n                    requireSuccessJson: true,\n                    totalFileSizeName: \"qqtotalfilesize\",\n                    uuidName: \"qquuid\"\n                },\n                validation: {\n                    allowedExtensions: [],\n                    sizeLimit: 0,\n                    minSizeLimit: 0,\n                    itemLimit: 0,\n                    stopOnFirstInvalidFile: true,\n                    acceptFiles: null,\n                    image: {\n                        maxHeight: 0,\n                        maxWidth: 0,\n                        minHeight: 0,\n                        minWidth: 0\n                    },\n                    allowEmpty: false\n                },\n                callbacks: {\n                    onSubmit: function(id, name) {},\n                    onSubmitted: function(id, name) {},\n                    onComplete: function(id, name, responseJSON, maybeXhr) {},\n                    onAllComplete: function(successful, failed) {},\n                    onCancel: function(id, name) {},\n                    onUpload: function(id, name) {},\n                    onUploadChunk: function(id, name, chunkData) {},\n                    onUploadChunkSuccess: function(id, chunkData, responseJSON, xhr) {},\n                    onResume: function(id, fileName, chunkData, customResumeData) {},\n                    onProgress: function(id, name, loaded, total) {},\n                    onTotalProgress: function(loaded, total) {},\n                    onError: function(id, name, reason, maybeXhrOrXdr) {},\n                    onAutoRetry: function(id, name, attemptNumber) {},\n                    onManualRetry: function(id, name) {},\n                    onValidateBatch: function(fileOrBlobData) {},\n                    onValidate: function(fileOrBlobData) {},\n                    onSubmitDelete: function(id) {},\n                    onDelete: function(id) {},\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {},\n                    onPasteReceived: function(blob) {},\n                    onStatusChange: function(id, oldStatus, newStatus) {},\n                    onSessionRequestComplete: function(response, success, xhrOrXdr) {}\n                },\n                messages: {\n                    typeError: \"{file} has an invalid extension. Valid extension(s): {extensions}.\",\n                    sizeError: \"{file} is too large, maximum file size is {sizeLimit}.\",\n                    minSizeError: \"{file} is too small, minimum file size is {minSizeLimit}.\",\n                    emptyError: \"{file} is empty, please select files again without it.\",\n                    noFilesError: \"No files to upload.\",\n                    tooManyItemsError: \"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.\",\n                    maxHeightImageError: \"Image is too tall.\",\n                    maxWidthImageError: \"Image is too wide.\",\n                    minHeightImageError: \"Image is not tall enough.\",\n                    minWidthImageError: \"Image is not wide enough.\",\n                    retryFailTooManyItems: \"Retry failed - you have reached your file limit.\",\n                    onLeave: \"The files are being uploaded, if you leave now the upload will be canceled.\",\n                    unsupportedBrowserIos8Safari: \"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues.\"\n                },\n                retry: {\n                    enableAuto: false,\n                    maxAutoAttempts: 3,\n                    autoAttemptDelay: 5,\n                    preventRetryResponseProperty: \"preventRetry\"\n                },\n                classes: {\n                    buttonHover: \"qq-upload-button-hover\",\n                    buttonFocus: \"qq-upload-button-focus\"\n                },\n                chunking: {\n                    enabled: false,\n                    concurrent: {\n                        enabled: false\n                    },\n                    mandatory: false,\n                    paramNames: {\n                        partIndex: \"qqpartindex\",\n                        partByteOffset: \"qqpartbyteoffset\",\n                        chunkSize: \"qqchunksize\",\n                        totalFileSize: \"qqtotalfilesize\",\n                        totalParts: \"qqtotalparts\"\n                    },\n                    partSize: function(id) {\n                        return 2e6;\n                    },\n                    success: {\n                        endpoint: null,\n                        headers: function(id) {\n                            return null;\n                        },\n                        jsonPayload: false,\n                        method: \"POST\",\n                        params: function(id) {\n                            return null;\n                        },\n                        resetOnStatus: []\n                    }\n                },\n                resume: {\n                    enabled: false,\n                    recordsExpireIn: 7,\n                    paramNames: {\n                        resuming: \"qqresume\"\n                    },\n                    customKeys: function(fileId) {\n                        return [];\n                    }\n                },\n                formatFileName: function(fileOrBlobName) {\n                    return fileOrBlobName;\n                },\n                text: {\n                    defaultResponseError: \"Upload failure reason unknown\",\n                    fileInputTitle: \"file input\",\n                    sizeSymbols: [ \"kB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\" ]\n                },\n                deleteFile: {\n                    enabled: false,\n                    method: \"DELETE\",\n                    endpoint: \"/server/upload\",\n                    customHeaders: {},\n                    params: {}\n                },\n                cors: {\n                    expected: false,\n                    sendCredentials: false,\n                    allowXdr: false\n                },\n                blobs: {\n                    defaultName: \"misc_data\"\n                },\n                paste: {\n                    targetElement: null,\n                    defaultName: \"pasted_image\"\n                },\n                camera: {\n                    ios: false,\n                    button: null\n                },\n                extraButtons: [],\n                session: {\n                    endpoint: null,\n                    params: {},\n                    customHeaders: {},\n                    refreshOnReset: true\n                },\n                form: {\n                    element: \"qq-form\",\n                    autoUpload: false,\n                    interceptSubmit: true\n                },\n                scaling: {\n                    customResizer: null,\n                    sendOriginal: true,\n                    orient: true,\n                    defaultType: null,\n                    defaultQuality: 80,\n                    failureText: \"Failed to scale\",\n                    includeExif: false,\n                    sizes: []\n                },\n                workarounds: {\n                    iosEmptyVideos: true,\n                    ios8SafariUploads: true,\n                    ios8BrowserCrash: false\n                }\n            };\n            qq.extend(this._options, o, true);\n            this._buttons = [];\n            this._extraButtonSpecs = {};\n            this._buttonIdsForFileIds = [];\n            this._wrapCallbacks();\n            this._disposeSupport = new qq.DisposeSupport();\n            this._storedIds = [];\n            this._autoRetries = [];\n            this._retryTimeouts = [];\n            this._preventRetries = [];\n            this._thumbnailUrls = [];\n            this._netUploadedOrQueued = 0;\n            this._netUploaded = 0;\n            this._uploadData = this._createUploadDataTracker();\n            this._initFormSupportAndParams();\n            this._customHeadersStore = this._createStore(this._options.request.customHeaders);\n            this._deleteFileCustomHeadersStore = this._createStore(this._options.deleteFile.customHeaders);\n            this._deleteFileParamsStore = this._createStore(this._options.deleteFile.params);\n            this._endpointStore = this._createStore(this._options.request.endpoint);\n            this._deleteFileEndpointStore = this._createStore(this._options.deleteFile.endpoint);\n            this._handler = this._createUploadHandler();\n            this._deleteHandler = qq.DeleteFileAjaxRequester && this._createDeleteHandler();\n            if (this._options.button) {\n                this._defaultButtonId = this._createUploadButton({\n                    element: this._options.button,\n                    title: this._options.text.fileInputTitle\n                }).getButtonId();\n            }\n            this._generateExtraButtonSpecs();\n            this._handleCameraAccess();\n            if (this._options.paste.targetElement) {\n                if (qq.PasteSupport) {\n                    this._pasteHandler = this._createPasteHandler();\n                } else {\n                    this.log(\"Paste support module not found\", \"error\");\n                }\n            }\n            this._options.warnBeforeUnload && this._preventLeaveInProgress();\n            this._imageGenerator = qq.ImageGenerator && new qq.ImageGenerator(qq.bind(this.log, this));\n            this._refreshSessionData();\n            this._succeededSinceLastAllComplete = [];\n            this._failedSinceLastAllComplete = [];\n            this._scaler = qq.Scaler && new qq.Scaler(this._options.scaling, qq.bind(this.log, this)) || {};\n            if (this._scaler.enabled) {\n                this._customNewFileHandler = qq.bind(this._scaler.handleNewFile, this._scaler);\n            }\n            if (qq.TotalProgress && qq.supportedFeatures.progressBar) {\n                this._totalProgress = new qq.TotalProgress(qq.bind(this._onTotalProgress, this), function(id) {\n                    var entry = self._uploadData.retrieve({\n                        id: id\n                    });\n                    return entry && entry.size || 0;\n                });\n            }\n            this._currentItemLimit = this._options.validation.itemLimit;\n            this._customResumeDataStore = this._createStore();\n        };\n        qq.FineUploaderBasic.prototype = qq.basePublicApi;\n        qq.extend(qq.FineUploaderBasic.prototype, qq.basePrivateApi);\n    })();\n    qq.AjaxRequester = function(o) {\n        \"use strict\";\n        var log, shouldParamsBeInQueryString, queue = [], requestData = {}, options = {\n            acceptHeader: null,\n            validMethods: [ \"PATCH\", \"POST\", \"PUT\" ],\n            method: \"POST\",\n            contentType: \"application/x-www-form-urlencoded\",\n            maxConnections: 3,\n            customHeaders: {},\n            endpointStore: {},\n            paramsStore: {},\n            mandatedParams: {},\n            allowXRequestedWithAndCacheControl: true,\n            successfulResponseCodes: {\n                DELETE: [ 200, 202, 204 ],\n                PATCH: [ 200, 201, 202, 203, 204 ],\n                POST: [ 200, 201, 202, 203, 204 ],\n                PUT: [ 200, 201, 202, 203, 204 ],\n                GET: [ 200 ]\n            },\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {},\n            onSend: function(id) {},\n            onComplete: function(id, xhrOrXdr, isError) {},\n            onProgress: null\n        };\n        qq.extend(options, o);\n        log = options.log;\n        if (qq.indexOf(options.validMethods, options.method) < 0) {\n            throw new Error(\"'\" + options.method + \"' is not a supported method for this type of request!\");\n        }\n        function isSimpleMethod() {\n            return qq.indexOf([ \"GET\", \"POST\", \"HEAD\" ], options.method) >= 0;\n        }\n        function containsNonSimpleHeaders(headers) {\n            var containsNonSimple = false;\n            qq.each(containsNonSimple, function(idx, header) {\n                if (qq.indexOf([ \"Accept\", \"Accept-Language\", \"Content-Language\", \"Content-Type\" ], header) < 0) {\n                    containsNonSimple = true;\n                    return false;\n                }\n            });\n            return containsNonSimple;\n        }\n        function isXdr(xhr) {\n            return options.cors.expected && xhr.withCredentials === undefined;\n        }\n        function getCorsAjaxTransport() {\n            var xhrOrXdr;\n            if (window.XMLHttpRequest || window.ActiveXObject) {\n                xhrOrXdr = qq.createXhrInstance();\n                if (xhrOrXdr.withCredentials === undefined) {\n                    xhrOrXdr = new XDomainRequest();\n                    xhrOrXdr.onload = function() {};\n                    xhrOrXdr.onerror = function() {};\n                    xhrOrXdr.ontimeout = function() {};\n                    xhrOrXdr.onprogress = function() {};\n                }\n            }\n            return xhrOrXdr;\n        }\n        function getXhrOrXdr(id, suppliedXhr) {\n            var xhrOrXdr = requestData[id] && requestData[id].xhr;\n            if (!xhrOrXdr) {\n                if (suppliedXhr) {\n                    xhrOrXdr = suppliedXhr;\n                } else {\n                    if (options.cors.expected) {\n                        xhrOrXdr = getCorsAjaxTransport();\n                    } else {\n                        xhrOrXdr = qq.createXhrInstance();\n                    }\n                }\n                requestData[id].xhr = xhrOrXdr;\n            }\n            return xhrOrXdr;\n        }\n        function dequeue(id) {\n            var i = qq.indexOf(queue, id), max = options.maxConnections, nextId;\n            delete requestData[id];\n            queue.splice(i, 1);\n            if (queue.length >= max && i < max) {\n                nextId = queue[max - 1];\n                sendRequest(nextId);\n            }\n        }\n        function onComplete(id, xdrError) {\n            var xhr = getXhrOrXdr(id), method = options.method, isError = xdrError === true;\n            dequeue(id);\n            if (isError) {\n                log(method + \" request for \" + id + \" has failed\", \"error\");\n            } else if (!isXdr(xhr) && !isResponseSuccessful(xhr.status)) {\n                isError = true;\n                log(method + \" request for \" + id + \" has failed - response code \" + xhr.status, \"error\");\n            }\n            options.onComplete(id, xhr, isError);\n        }\n        function getParams(id) {\n            var onDemandParams = requestData[id].additionalParams, mandatedParams = options.mandatedParams, params;\n            if (options.paramsStore.get) {\n                params = options.paramsStore.get(id);\n            }\n            if (onDemandParams) {\n                qq.each(onDemandParams, function(name, val) {\n                    params = params || {};\n                    params[name] = val;\n                });\n            }\n            if (mandatedParams) {\n                qq.each(mandatedParams, function(name, val) {\n                    params = params || {};\n                    params[name] = val;\n                });\n            }\n            return params;\n        }\n        function sendRequest(id, optXhr) {\n            var xhr = getXhrOrXdr(id, optXhr), method = options.method, params = getParams(id), payload = requestData[id].payload, url;\n            options.onSend(id);\n            url = createUrl(id, params, requestData[id].additionalQueryParams);\n            if (isXdr(xhr)) {\n                xhr.onload = getXdrLoadHandler(id);\n                xhr.onerror = getXdrErrorHandler(id);\n            } else {\n                xhr.onreadystatechange = getXhrReadyStateChangeHandler(id);\n            }\n            registerForUploadProgress(id);\n            xhr.open(method, url, true);\n            if (options.cors.expected && options.cors.sendCredentials && !isXdr(xhr)) {\n                xhr.withCredentials = true;\n            }\n            setHeaders(id);\n            log(\"Sending \" + method + \" request for \" + id);\n            if (payload) {\n                xhr.send(payload);\n            } else if (shouldParamsBeInQueryString || !params) {\n                xhr.send();\n            } else if (params && options.contentType && options.contentType.toLowerCase().indexOf(\"application/x-www-form-urlencoded\") >= 0) {\n                xhr.send(qq.obj2url(params, \"\"));\n            } else if (params && options.contentType && options.contentType.toLowerCase().indexOf(\"application/json\") >= 0) {\n                xhr.send(JSON.stringify(params));\n            } else {\n                xhr.send(params);\n            }\n            return xhr;\n        }\n        function createUrl(id, params, additionalQueryParams) {\n            var endpoint = options.endpointStore.get(id), addToPath = requestData[id].addToPath;\n            if (addToPath != undefined) {\n                endpoint += \"/\" + addToPath;\n            }\n            if (shouldParamsBeInQueryString && params) {\n                endpoint = qq.obj2url(params, endpoint);\n            }\n            if (additionalQueryParams) {\n                endpoint = qq.obj2url(additionalQueryParams, endpoint);\n            }\n            return endpoint;\n        }\n        function getXhrReadyStateChangeHandler(id) {\n            return function() {\n                if (getXhrOrXdr(id).readyState === 4) {\n                    onComplete(id);\n                }\n            };\n        }\n        function registerForUploadProgress(id) {\n            var onProgress = options.onProgress;\n            if (onProgress) {\n                getXhrOrXdr(id).upload.onprogress = function(e) {\n                    if (e.lengthComputable) {\n                        onProgress(id, e.loaded, e.total);\n                    }\n                };\n            }\n        }\n        function getXdrLoadHandler(id) {\n            return function() {\n                onComplete(id);\n            };\n        }\n        function getXdrErrorHandler(id) {\n            return function() {\n                onComplete(id, true);\n            };\n        }\n        function setHeaders(id) {\n            var xhr = getXhrOrXdr(id), customHeaders = options.customHeaders, onDemandHeaders = requestData[id].additionalHeaders || {}, method = options.method, allHeaders = {};\n            if (!isXdr(xhr)) {\n                options.acceptHeader && xhr.setRequestHeader(\"Accept\", options.acceptHeader);\n                if (options.allowXRequestedWithAndCacheControl) {\n                    if (!options.cors.expected || (!isSimpleMethod() || containsNonSimpleHeaders(customHeaders))) {\n                        xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n                        xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n                    }\n                }\n                if (options.contentType && (method === \"POST\" || method === \"PUT\")) {\n                    xhr.setRequestHeader(\"Content-Type\", options.contentType);\n                }\n                qq.extend(allHeaders, qq.isFunction(customHeaders) ? customHeaders(id) : customHeaders);\n                qq.extend(allHeaders, onDemandHeaders);\n                qq.each(allHeaders, function(name, val) {\n                    xhr.setRequestHeader(name, val);\n                });\n            }\n        }\n        function isResponseSuccessful(responseCode) {\n            return qq.indexOf(options.successfulResponseCodes[options.method], responseCode) >= 0;\n        }\n        function prepareToSend(id, optXhr, addToPath, additionalParams, additionalQueryParams, additionalHeaders, payload) {\n            requestData[id] = {\n                addToPath: addToPath,\n                additionalParams: additionalParams,\n                additionalQueryParams: additionalQueryParams,\n                additionalHeaders: additionalHeaders,\n                payload: payload\n            };\n            var len = queue.push(id);\n            if (len <= options.maxConnections) {\n                return sendRequest(id, optXhr);\n            }\n        }\n        shouldParamsBeInQueryString = options.method === \"GET\" || options.method === \"DELETE\";\n        qq.extend(this, {\n            initTransport: function(id) {\n                var path, params, headers, payload, cacheBuster, additionalQueryParams;\n                return {\n                    withPath: function(appendToPath) {\n                        path = appendToPath;\n                        return this;\n                    },\n                    withParams: function(additionalParams) {\n                        params = additionalParams;\n                        return this;\n                    },\n                    withQueryParams: function(_additionalQueryParams_) {\n                        additionalQueryParams = _additionalQueryParams_;\n                        return this;\n                    },\n                    withHeaders: function(additionalHeaders) {\n                        headers = additionalHeaders;\n                        return this;\n                    },\n                    withPayload: function(thePayload) {\n                        payload = thePayload;\n                        return this;\n                    },\n                    withCacheBuster: function() {\n                        cacheBuster = true;\n                        return this;\n                    },\n                    send: function(optXhr) {\n                        if (cacheBuster && qq.indexOf([ \"GET\", \"DELETE\" ], options.method) >= 0) {\n                            params.qqtimestamp = new Date().getTime();\n                        }\n                        return prepareToSend(id, optXhr, path, params, additionalQueryParams, headers, payload);\n                    }\n                };\n            },\n            canceled: function(id) {\n                dequeue(id);\n            }\n        });\n    };\n    qq.UploadHandler = function(spec) {\n        \"use strict\";\n        var proxy = spec.proxy, fileState = {}, onCancel = proxy.onCancel, getName = proxy.getName;\n        qq.extend(this, {\n            add: function(id, fileItem) {\n                fileState[id] = fileItem;\n                fileState[id].temp = {};\n            },\n            cancel: function(id) {\n                var self = this, cancelFinalizationEffort = new qq.Promise(), onCancelRetVal = onCancel(id, getName(id), cancelFinalizationEffort);\n                onCancelRetVal.then(function() {\n                    if (self.isValid(id)) {\n                        fileState[id].canceled = true;\n                        self.expunge(id);\n                    }\n                    cancelFinalizationEffort.success();\n                });\n            },\n            expunge: function(id) {\n                delete fileState[id];\n            },\n            getThirdPartyFileId: function(id) {\n                return fileState[id].key;\n            },\n            isValid: function(id) {\n                return fileState[id] !== undefined;\n            },\n            reset: function() {\n                fileState = {};\n            },\n            _getFileState: function(id) {\n                return fileState[id];\n            },\n            _setThirdPartyFileId: function(id, thirdPartyFileId) {\n                fileState[id].key = thirdPartyFileId;\n            },\n            _wasCanceled: function(id) {\n                return !!fileState[id].canceled;\n            }\n        });\n    };\n    qq.UploadHandlerController = function(o, namespace) {\n        \"use strict\";\n        var controller = this, chunkingPossible = false, concurrentChunkingPossible = false, chunking, preventRetryResponse, log, handler, options = {\n            paramsStore: {},\n            maxConnections: 3,\n            chunking: {\n                enabled: false,\n                multiple: {\n                    enabled: false\n                }\n            },\n            log: function(str, level) {},\n            onProgress: function(id, fileName, loaded, total) {},\n            onComplete: function(id, fileName, response, xhr) {},\n            onCancel: function(id, fileName) {},\n            onUploadPrep: function(id) {},\n            onUpload: function(id, fileName) {},\n            onUploadChunk: function(id, fileName, chunkData) {},\n            onUploadChunkSuccess: function(id, chunkData, response, xhr) {},\n            onAutoRetry: function(id, fileName, response, xhr) {},\n            onResume: function(id, fileName, chunkData, customResumeData) {},\n            onUuidChanged: function(id, newUuid) {},\n            getName: function(id) {},\n            setSize: function(id, newSize) {},\n            isQueued: function(id) {},\n            getIdsInProxyGroup: function(id) {},\n            getIdsInBatch: function(id) {},\n            isInProgress: function(id) {}\n        }, chunked = {\n            done: function(id, chunkIdx, response, xhr) {\n                var chunkData = handler._getChunkData(id, chunkIdx);\n                handler._getFileState(id).attemptingResume = false;\n                delete handler._getFileState(id).temp.chunkProgress[chunkIdx];\n                handler._getFileState(id).loaded += chunkData.size;\n                options.onUploadChunkSuccess(id, handler._getChunkDataForCallback(chunkData), response, xhr);\n            },\n            finalize: function(id) {\n                var size = options.getSize(id), name = options.getName(id);\n                log(\"All chunks have been uploaded for \" + id + \" - finalizing....\");\n                handler.finalizeChunks(id).then(function(response, xhr) {\n                    log(\"Finalize successful for \" + id);\n                    var normaizedResponse = upload.normalizeResponse(response, true);\n                    options.onProgress(id, name, size, size);\n                    handler._maybeDeletePersistedChunkData(id);\n                    upload.cleanup(id, normaizedResponse, xhr);\n                }, function(response, xhr) {\n                    var normalizedResponse = upload.normalizeResponse(response, false);\n                    log(\"Problem finalizing chunks for file ID \" + id + \" - \" + normalizedResponse.error, \"error\");\n                    if (normalizedResponse.reset || xhr && options.chunking.success.resetOnStatus.indexOf(xhr.status) >= 0) {\n                        chunked.reset(id);\n                    }\n                    if (!options.onAutoRetry(id, name, normalizedResponse, xhr)) {\n                        upload.cleanup(id, normalizedResponse, xhr);\n                    }\n                });\n            },\n            handleFailure: function(chunkIdx, id, response, xhr) {\n                var name = options.getName(id);\n                log(\"Chunked upload request failed for \" + id + \", chunk \" + chunkIdx);\n                handler.clearCachedChunk(id, chunkIdx);\n                var responseToReport = upload.normalizeResponse(response, false), inProgressIdx;\n                if (responseToReport.reset) {\n                    chunked.reset(id);\n                } else {\n                    var inProgressChunksArray = handler._getFileState(id).chunking.inProgress;\n                    inProgressIdx = inProgressChunksArray ? qq.indexOf(inProgressChunksArray, chunkIdx) : -1;\n                    if (inProgressIdx >= 0) {\n                        handler._getFileState(id).chunking.inProgress.splice(inProgressIdx, 1);\n                        handler._getFileState(id).chunking.remaining.unshift(chunkIdx);\n                    }\n                }\n                if (!handler._getFileState(id).temp.ignoreFailure) {\n                    if (concurrentChunkingPossible) {\n                        handler._getFileState(id).temp.ignoreFailure = true;\n                        log(qq.format(\"Going to attempt to abort these chunks: {}. These are currently in-progress: {}.\", JSON.stringify(Object.keys(handler._getXhrs(id))), JSON.stringify(handler._getFileState(id).chunking.inProgress)));\n                        qq.each(handler._getXhrs(id), function(ckid, ckXhr) {\n                            log(qq.format(\"Attempting to abort file {}.{}. XHR readyState {}. \", id, ckid, ckXhr.readyState));\n                            ckXhr.abort();\n                            ckXhr._cancelled = true;\n                        });\n                        handler.moveInProgressToRemaining(id);\n                        connectionManager.free(id, true);\n                    }\n                    if (!options.onAutoRetry(id, name, responseToReport, xhr)) {\n                        upload.cleanup(id, responseToReport, xhr);\n                    }\n                }\n            },\n            hasMoreParts: function(id) {\n                return !!handler._getFileState(id).chunking.remaining.length;\n            },\n            nextPart: function(id) {\n                var nextIdx = handler._getFileState(id).chunking.remaining.shift();\n                if (nextIdx >= handler._getTotalChunks(id)) {\n                    nextIdx = null;\n                }\n                return nextIdx;\n            },\n            reset: function(id) {\n                log(\"Server or callback has ordered chunking effort to be restarted on next attempt for item ID \" + id, \"error\");\n                handler._maybeDeletePersistedChunkData(id);\n                handler.reevaluateChunking(id);\n                handler._getFileState(id).loaded = 0;\n                handler._getFileState(id).attemptingResume = false;\n            },\n            sendNext: function(id) {\n                var size = options.getSize(id), name = options.getName(id), chunkIdx = chunked.nextPart(id), chunkData = handler._getChunkData(id, chunkIdx), fileState = handler._getFileState(id), resuming = fileState.attemptingResume, inProgressChunks = fileState.chunking.inProgress || [];\n                if (fileState.loaded == null) {\n                    fileState.loaded = 0;\n                }\n                if (resuming && options.onResume(id, name, chunkData, fileState.customResumeData) === false) {\n                    chunked.reset(id);\n                    chunkIdx = chunked.nextPart(id);\n                    chunkData = handler._getChunkData(id, chunkIdx);\n                    resuming = false;\n                }\n                if (chunkIdx == null && inProgressChunks.length === 0) {\n                    chunked.finalize(id);\n                } else {\n                    inProgressChunks.push(chunkIdx);\n                    handler._getFileState(id).chunking.inProgress = inProgressChunks;\n                    if (concurrentChunkingPossible) {\n                        connectionManager.open(id, chunkIdx);\n                    }\n                    if (concurrentChunkingPossible && connectionManager.available() && handler._getFileState(id).chunking.remaining.length) {\n                        chunked.sendNext(id);\n                    }\n                    if (chunkData.blob.size === 0) {\n                        log(qq.format(\"Chunk {} for file {} will not be uploaded, zero sized chunk.\", chunkIdx, id), \"error\");\n                        chunked.handleFailure(chunkIdx, id, \"File is no longer available\", null);\n                    }\n                    var onUploadChunkPromise = options.onUploadChunk(id, name, handler._getChunkDataForCallback(chunkData));\n                    onUploadChunkPromise.then(function(requestOverrides) {\n                        if (!options.isInProgress(id)) {\n                            log(qq.format(\"Not sending chunked upload request for item {}.{} - no longer in progress.\", id, chunkIdx));\n                        } else {\n                            log(qq.format(\"Sending chunked upload request for item {}.{}, bytes {}-{} of {}.\", id, chunkIdx, chunkData.start + 1, chunkData.end, size));\n                            var uploadChunkData = {\n                                chunkIdx: chunkIdx,\n                                id: id,\n                                overrides: requestOverrides,\n                                resuming: resuming\n                            };\n                            handler.uploadChunk(uploadChunkData).then(function success(response, xhr) {\n                                log(\"Chunked upload request succeeded for \" + id + \", chunk \" + chunkIdx);\n                                handler.clearCachedChunk(id, chunkIdx);\n                                var inProgressChunks = handler._getFileState(id).chunking.inProgress || [], responseToReport = upload.normalizeResponse(response, true), inProgressChunkIdx = qq.indexOf(inProgressChunks, chunkIdx);\n                                log(qq.format(\"Chunk {} for file {} uploaded successfully.\", chunkIdx, id));\n                                chunked.done(id, chunkIdx, responseToReport, xhr);\n                                if (inProgressChunkIdx >= 0) {\n                                    inProgressChunks.splice(inProgressChunkIdx, 1);\n                                }\n                                handler._maybePersistChunkedState(id);\n                                if (!chunked.hasMoreParts(id) && inProgressChunks.length === 0) {\n                                    chunked.finalize(id);\n                                } else if (chunked.hasMoreParts(id)) {\n                                    chunked.sendNext(id);\n                                } else {\n                                    log(qq.format(\"File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}\", id, JSON.stringify(inProgressChunks)));\n                                }\n                            }, function failure(response, xhr) {\n                                chunked.handleFailure(chunkIdx, id, response, xhr);\n                            }).done(function() {\n                                handler.clearXhr(id, chunkIdx);\n                            });\n                        }\n                    }, function(error) {\n                        chunked.handleFailure(chunkIdx, id, error, null);\n                    });\n                }\n            }\n        }, connectionManager = {\n            _open: [],\n            _openChunks: {},\n            _waiting: [],\n            available: function() {\n                var max = options.maxConnections, openChunkEntriesCount = 0, openChunksCount = 0;\n                qq.each(connectionManager._openChunks, function(fileId, openChunkIndexes) {\n                    openChunkEntriesCount++;\n                    openChunksCount += openChunkIndexes.length;\n                });\n                return max - (connectionManager._open.length - openChunkEntriesCount + openChunksCount);\n            },\n            free: function(id, dontAllowNext) {\n                var allowNext = !dontAllowNext, waitingIndex = qq.indexOf(connectionManager._waiting, id), connectionsIndex = qq.indexOf(connectionManager._open, id), nextId;\n                delete connectionManager._openChunks[id];\n                if (upload.getProxyOrBlob(id) instanceof qq.BlobProxy) {\n                    log(\"Generated blob upload has ended for \" + id + \", disposing generated blob.\");\n                    delete handler._getFileState(id).file;\n                }\n                if (waitingIndex >= 0) {\n                    connectionManager._waiting.splice(waitingIndex, 1);\n                } else if (allowNext && connectionsIndex >= 0) {\n                    connectionManager._open.splice(connectionsIndex, 1);\n                    nextId = connectionManager._waiting.shift();\n                    if (nextId >= 0) {\n                        connectionManager._open.push(nextId);\n                        upload.start(nextId);\n                    }\n                }\n            },\n            getWaitingOrConnected: function() {\n                var waitingOrConnected = [];\n                qq.each(connectionManager._openChunks, function(fileId, chunks) {\n                    if (chunks && chunks.length) {\n                        waitingOrConnected.push(parseInt(fileId));\n                    }\n                });\n                qq.each(connectionManager._open, function(idx, fileId) {\n                    if (!connectionManager._openChunks[fileId]) {\n                        waitingOrConnected.push(parseInt(fileId));\n                    }\n                });\n                waitingOrConnected = waitingOrConnected.concat(connectionManager._waiting);\n                return waitingOrConnected;\n            },\n            isUsingConnection: function(id) {\n                return qq.indexOf(connectionManager._open, id) >= 0;\n            },\n            open: function(id, chunkIdx) {\n                if (chunkIdx == null) {\n                    connectionManager._waiting.push(id);\n                }\n                if (connectionManager.available()) {\n                    if (chunkIdx == null) {\n                        connectionManager._waiting.pop();\n                        connectionManager._open.push(id);\n                    } else {\n                        (function() {\n                            var openChunksEntry = connectionManager._openChunks[id] || [];\n                            openChunksEntry.push(chunkIdx);\n                            connectionManager._openChunks[id] = openChunksEntry;\n                        })();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            reset: function() {\n                connectionManager._waiting = [];\n                connectionManager._open = [];\n            }\n        }, simple = {\n            send: function(id, name) {\n                var fileState = handler._getFileState(id);\n                if (!fileState) {\n                    log(\"Ignoring send request as this upload may have been cancelled, File ID \" + id, \"warn\");\n                    return;\n                }\n                fileState.loaded = 0;\n                log(\"Sending simple upload request for \" + id);\n                handler.uploadFile(id).then(function(response, optXhr) {\n                    log(\"Simple upload request succeeded for \" + id);\n                    var responseToReport = upload.normalizeResponse(response, true), size = options.getSize(id);\n                    options.onProgress(id, name, size, size);\n                    upload.maybeNewUuid(id, responseToReport);\n                    upload.cleanup(id, responseToReport, optXhr);\n                }, function(response, optXhr) {\n                    log(\"Simple upload request failed for \" + id);\n                    var responseToReport = upload.normalizeResponse(response, false);\n                    if (!options.onAutoRetry(id, name, responseToReport, optXhr)) {\n                        upload.cleanup(id, responseToReport, optXhr);\n                    }\n                });\n            }\n        }, upload = {\n            cancel: function(id) {\n                log(\"Cancelling \" + id);\n                options.paramsStore.remove(id);\n                connectionManager.free(id);\n            },\n            cleanup: function(id, response, optXhr) {\n                var name = options.getName(id);\n                options.onComplete(id, name, response, optXhr);\n                if (handler._getFileState(id)) {\n                    handler._clearXhrs && handler._clearXhrs(id);\n                }\n                connectionManager.free(id);\n            },\n            getProxyOrBlob: function(id) {\n                return handler.getProxy && handler.getProxy(id) || handler.getFile && handler.getFile(id);\n            },\n            initHandler: function() {\n                var handlerType = namespace ? qq[namespace] : qq.traditional, handlerModuleSubtype = qq.supportedFeatures.ajaxUploading ? \"Xhr\" : \"Form\";\n                handler = new handlerType[handlerModuleSubtype + \"UploadHandler\"](options, {\n                    getCustomResumeData: options.getCustomResumeData,\n                    getDataByUuid: options.getDataByUuid,\n                    getName: options.getName,\n                    getSize: options.getSize,\n                    getUuid: options.getUuid,\n                    log: log,\n                    onCancel: options.onCancel,\n                    onProgress: options.onProgress,\n                    onUuidChanged: options.onUuidChanged,\n                    onFinalizing: function(id) {\n                        options.setStatus(id, qq.status.UPLOAD_FINALIZING);\n                    }\n                });\n                if (handler._removeExpiredChunkingRecords) {\n                    handler._removeExpiredChunkingRecords();\n                }\n            },\n            isDeferredEligibleForUpload: function(id) {\n                return options.isQueued(id);\n            },\n            maybeDefer: function(id, blob) {\n                if (blob && !handler.getFile(id) && blob instanceof qq.BlobProxy) {\n                    options.onUploadPrep(id);\n                    log(\"Attempting to generate a blob on-demand for \" + id);\n                    blob.create().then(function(generatedBlob) {\n                        log(\"Generated an on-demand blob for \" + id);\n                        handler.updateBlob(id, generatedBlob);\n                        options.setSize(id, generatedBlob.size);\n                        handler.reevaluateChunking(id);\n                        upload.maybeSendDeferredFiles(id);\n                    }, function(errorMessage) {\n                        var errorResponse = {};\n                        if (errorMessage) {\n                            errorResponse.error = errorMessage;\n                        }\n                        log(qq.format(\"Failed to generate blob for ID {}.  Error message: {}.\", id, errorMessage), \"error\");\n                        options.onComplete(id, options.getName(id), qq.extend(errorResponse, preventRetryResponse), null);\n                        upload.maybeSendDeferredFiles(id);\n                        connectionManager.free(id);\n                    });\n                } else {\n                    return upload.maybeSendDeferredFiles(id);\n                }\n                return false;\n            },\n            maybeSendDeferredFiles: function(id) {\n                var idsInGroup = options.getIdsInProxyGroup(id), uploadedThisId = false;\n                if (idsInGroup && idsInGroup.length) {\n                    log(\"Maybe ready to upload proxy group file \" + id);\n                    qq.each(idsInGroup, function(idx, idInGroup) {\n                        if (upload.isDeferredEligibleForUpload(idInGroup) && !!handler.getFile(idInGroup)) {\n                            uploadedThisId = idInGroup === id;\n                            upload.now(idInGroup);\n                        } else if (upload.isDeferredEligibleForUpload(idInGroup)) {\n                            return false;\n                        }\n                    });\n                } else {\n                    uploadedThisId = true;\n                    upload.now(id);\n                }\n                return uploadedThisId;\n            },\n            maybeNewUuid: function(id, response) {\n                if (response.newUuid !== undefined) {\n                    options.onUuidChanged(id, response.newUuid);\n                }\n            },\n            normalizeResponse: function(originalResponse, successful) {\n                var response = originalResponse;\n                if (!qq.isObject(originalResponse)) {\n                    response = {};\n                    if (qq.isString(originalResponse) && !successful) {\n                        response.error = originalResponse;\n                    }\n                }\n                response.success = successful;\n                return response;\n            },\n            now: function(id) {\n                var name = options.getName(id);\n                if (!controller.isValid(id)) {\n                    throw new qq.Error(id + \" is not a valid file ID to upload!\");\n                }\n                options.onUpload(id, name).then(function(response) {\n                    if (response && response.pause) {\n                        options.setStatus(id, qq.status.PAUSED);\n                        handler.pause(id);\n                        connectionManager.free(id);\n                    } else {\n                        if (chunkingPossible && handler._shouldChunkThisFile(id)) {\n                            chunked.sendNext(id);\n                        } else {\n                            simple.send(id, name);\n                        }\n                    }\n                }, function(error) {\n                    error = error || {};\n                    log(id + \" upload start aborted due to rejected onUpload Promise - details: \" + error, \"error\");\n                    if (!options.onAutoRetry(id, name, error.responseJSON || {})) {\n                        var response = upload.normalizeResponse(error.responseJSON, false);\n                        upload.cleanup(id, response);\n                    }\n                });\n            },\n            start: function(id) {\n                var blobToUpload = upload.getProxyOrBlob(id);\n                if (blobToUpload) {\n                    return upload.maybeDefer(id, blobToUpload);\n                } else {\n                    upload.now(id);\n                    return true;\n                }\n            }\n        };\n        qq.extend(this, {\n            add: function(id, file) {\n                handler.add.apply(this, arguments);\n            },\n            upload: function(id) {\n                if (connectionManager.open(id)) {\n                    return upload.start(id);\n                }\n                return false;\n            },\n            retry: function(id) {\n                if (concurrentChunkingPossible) {\n                    handler._getFileState(id).temp.ignoreFailure = false;\n                }\n                if (connectionManager.isUsingConnection(id)) {\n                    return upload.start(id);\n                } else {\n                    return controller.upload(id);\n                }\n            },\n            cancel: function(id) {\n                var cancelRetVal = handler.cancel(id);\n                if (qq.isGenericPromise(cancelRetVal)) {\n                    cancelRetVal.then(function() {\n                        upload.cancel(id);\n                    });\n                } else if (cancelRetVal !== false) {\n                    upload.cancel(id);\n                }\n            },\n            cancelAll: function() {\n                var waitingOrConnected = connectionManager.getWaitingOrConnected(), i;\n                if (waitingOrConnected.length) {\n                    for (i = waitingOrConnected.length - 1; i >= 0; i--) {\n                        controller.cancel(waitingOrConnected[i]);\n                    }\n                }\n                connectionManager.reset();\n            },\n            getFile: function(id) {\n                if (handler.getProxy && handler.getProxy(id)) {\n                    return handler.getProxy(id).referenceBlob;\n                }\n                return handler.getFile && handler.getFile(id);\n            },\n            isProxied: function(id) {\n                return !!(handler.getProxy && handler.getProxy(id));\n            },\n            getInput: function(id) {\n                if (handler.getInput) {\n                    return handler.getInput(id);\n                }\n            },\n            reset: function() {\n                log(\"Resetting upload handler\");\n                controller.cancelAll();\n                connectionManager.reset();\n                handler.reset();\n            },\n            expunge: function(id) {\n                if (controller.isValid(id)) {\n                    return handler.expunge(id);\n                }\n            },\n            isValid: function(id) {\n                return handler.isValid(id);\n            },\n            hasResumeRecord: function(id) {\n                var key = handler.isValid(id) && handler._getLocalStorageId && handler._getLocalStorageId(id);\n                if (key) {\n                    return !!localStorage.getItem(key);\n                }\n                return false;\n            },\n            getResumableFilesData: function() {\n                if (handler.getResumableFilesData) {\n                    return handler.getResumableFilesData();\n                }\n                return [];\n            },\n            getThirdPartyFileId: function(id) {\n                if (controller.isValid(id)) {\n                    return handler.getThirdPartyFileId(id);\n                }\n            },\n            pause: function(id) {\n                if (controller.isResumable(id) && handler.pause && controller.isValid(id) && handler.pause(id)) {\n                    connectionManager.free(id);\n                    handler.moveInProgressToRemaining(id);\n                    return true;\n                }\n                return false;\n            },\n            isAttemptingResume: function(id) {\n                return !!handler.isAttemptingResume && handler.isAttemptingResume(id);\n            },\n            isResumable: function(id) {\n                return !!handler.isResumable && handler.isResumable(id);\n            }\n        });\n        qq.extend(options, o);\n        log = options.log;\n        chunkingPossible = options.chunking.enabled && qq.supportedFeatures.chunking;\n        concurrentChunkingPossible = chunkingPossible && options.chunking.concurrent.enabled;\n        preventRetryResponse = function() {\n            var response = {};\n            response[options.preventRetryParam] = true;\n            return response;\n        }();\n        upload.initHandler();\n    };\n    qq.WindowReceiveMessage = function(o) {\n        \"use strict\";\n        var options = {\n            log: function(message, level) {}\n        }, callbackWrapperDetachers = {};\n        qq.extend(options, o);\n        qq.extend(this, {\n            receiveMessage: function(id, callback) {\n                var onMessageCallbackWrapper = function(event) {\n                    callback(event.data);\n                };\n                if (window.postMessage) {\n                    callbackWrapperDetachers[id] = qq(window).attach(\"message\", onMessageCallbackWrapper);\n                } else {\n                    log(\"iframe message passing not supported in this browser!\", \"error\");\n                }\n            },\n            stopReceivingMessages: function(id) {\n                if (window.postMessage) {\n                    var detacher = callbackWrapperDetachers[id];\n                    if (detacher) {\n                        detacher();\n                    }\n                }\n            }\n        });\n    };\n    qq.FormUploadHandler = function(spec) {\n        \"use strict\";\n        var options = spec.options, handler = this, proxy = spec.proxy, formHandlerInstanceId = qq.getUniqueId(), onloadCallbacks = {}, detachLoadEvents = {}, postMessageCallbackTimers = {}, isCors = options.isCors, inputName = options.inputName, getUuid = proxy.getUuid, log = proxy.log, corsMessageReceiver = new qq.WindowReceiveMessage({\n            log: log\n        });\n        function expungeFile(id) {\n            delete detachLoadEvents[id];\n            if (isCors) {\n                clearTimeout(postMessageCallbackTimers[id]);\n                delete postMessageCallbackTimers[id];\n                corsMessageReceiver.stopReceivingMessages(id);\n            }\n            var iframe = document.getElementById(handler._getIframeName(id));\n            if (iframe) {\n                iframe.setAttribute(\"src\", \"javascript:false;\");\n                qq(iframe).remove();\n            }\n        }\n        function getFileIdForIframeName(iframeName) {\n            return iframeName.split(\"_\")[0];\n        }\n        function initIframeForUpload(name) {\n            var iframe = qq.toElement(\"<iframe src='javascript:false;' name='\" + name + \"' />\");\n            iframe.setAttribute(\"id\", name);\n            iframe.style.display = \"none\";\n            document.body.appendChild(iframe);\n            return iframe;\n        }\n        function registerPostMessageCallback(iframe, callback) {\n            var iframeName = iframe.id, fileId = getFileIdForIframeName(iframeName), uuid = getUuid(fileId);\n            onloadCallbacks[uuid] = callback;\n            detachLoadEvents[fileId] = qq(iframe).attach(\"load\", function() {\n                if (handler.getInput(fileId)) {\n                    log(\"Received iframe load event for CORS upload request (iframe name \" + iframeName + \")\");\n                    postMessageCallbackTimers[iframeName] = setTimeout(function() {\n                        var errorMessage = \"No valid message received from loaded iframe for iframe name \" + iframeName;\n                        log(errorMessage, \"error\");\n                        callback({\n                            error: errorMessage\n                        });\n                    }, 1e3);\n                }\n            });\n            corsMessageReceiver.receiveMessage(iframeName, function(message) {\n                log(\"Received the following window message: '\" + message + \"'\");\n                var fileId = getFileIdForIframeName(iframeName), response = handler._parseJsonResponse(message), uuid = response.uuid, onloadCallback;\n                if (uuid && onloadCallbacks[uuid]) {\n                    log(\"Handling response for iframe name \" + iframeName);\n                    clearTimeout(postMessageCallbackTimers[iframeName]);\n                    delete postMessageCallbackTimers[iframeName];\n                    handler._detachLoadEvent(iframeName);\n                    onloadCallback = onloadCallbacks[uuid];\n                    delete onloadCallbacks[uuid];\n                    corsMessageReceiver.stopReceivingMessages(iframeName);\n                    onloadCallback(response);\n                } else if (!uuid) {\n                    log(\"'\" + message + \"' does not contain a UUID - ignoring.\");\n                }\n            });\n        }\n        qq.extend(this, new qq.UploadHandler(spec));\n        qq.override(this, function(super_) {\n            return {\n                add: function(id, fileInput) {\n                    super_.add(id, {\n                        input: fileInput\n                    });\n                    fileInput.setAttribute(\"name\", inputName);\n                    if (fileInput.parentNode) {\n                        qq(fileInput).remove();\n                    }\n                },\n                expunge: function(id) {\n                    expungeFile(id);\n                    super_.expunge(id);\n                },\n                isValid: function(id) {\n                    return super_.isValid(id) && handler._getFileState(id).input !== undefined;\n                }\n            };\n        });\n        qq.extend(this, {\n            getInput: function(id) {\n                return handler._getFileState(id).input;\n            },\n            _attachLoadEvent: function(iframe, callback) {\n                var responseDescriptor;\n                if (isCors) {\n                    registerPostMessageCallback(iframe, callback);\n                } else {\n                    detachLoadEvents[iframe.id] = qq(iframe).attach(\"load\", function() {\n                        log(\"Received response for \" + iframe.id);\n                        if (!iframe.parentNode) {\n                            return;\n                        }\n                        try {\n                            if (iframe.contentDocument && iframe.contentDocument.body && iframe.contentDocument.body.innerHTML == \"false\") {\n                                return;\n                            }\n                        } catch (error) {\n                            log(\"Error when attempting to access iframe during handling of upload response (\" + error.message + \")\", \"error\");\n                            responseDescriptor = {\n                                success: false\n                            };\n                        }\n                        callback(responseDescriptor);\n                    });\n                }\n            },\n            _createIframe: function(id) {\n                var iframeName = handler._getIframeName(id);\n                return initIframeForUpload(iframeName);\n            },\n            _detachLoadEvent: function(id) {\n                if (detachLoadEvents[id] !== undefined) {\n                    detachLoadEvents[id]();\n                    delete detachLoadEvents[id];\n                }\n            },\n            _getIframeName: function(fileId) {\n                return fileId + \"_\" + formHandlerInstanceId;\n            },\n            _initFormForUpload: function(spec) {\n                var method = spec.method, endpoint = spec.endpoint, params = spec.params, paramsInBody = spec.paramsInBody, targetName = spec.targetName, form = qq.toElement(\"<form method='\" + method + \"' enctype='multipart/form-data'></form>\"), url = endpoint;\n                if (paramsInBody) {\n                    qq.obj2Inputs(params, form);\n                } else {\n                    url = qq.obj2url(params, endpoint);\n                }\n                form.setAttribute(\"action\", url);\n                form.setAttribute(\"target\", targetName);\n                form.style.display = \"none\";\n                document.body.appendChild(form);\n                return form;\n            },\n            _parseJsonResponse: function(innerHtmlOrMessage) {\n                var response = {};\n                try {\n                    response = qq.parseJson(innerHtmlOrMessage);\n                } catch (error) {\n                    log(\"Error when attempting to parse iframe upload response (\" + error.message + \")\", \"error\");\n                }\n                return response;\n            }\n        });\n    };\n    qq.XhrUploadHandler = function(spec) {\n        \"use strict\";\n        var handler = this, namespace = spec.options.namespace, proxy = spec.proxy, chunking = spec.options.chunking, getChunkSize = function(id) {\n            var fileState = handler._getFileState(id);\n            if (fileState.chunkSize) {\n                return fileState.chunkSize;\n            } else {\n                var chunkSize = chunking.partSize;\n                if (qq.isFunction(chunkSize)) {\n                    chunkSize = chunkSize(id, getSize(id));\n                }\n                fileState.chunkSize = chunkSize;\n                return chunkSize;\n            }\n        }, resume = spec.options.resume, chunkFiles = chunking && spec.options.chunking.enabled && qq.supportedFeatures.chunking, resumeEnabled = resume && spec.options.resume.enabled && chunkFiles && qq.supportedFeatures.resume, getName = proxy.getName, getSize = proxy.getSize, getUuid = proxy.getUuid, getEndpoint = proxy.getEndpoint, getDataByUuid = proxy.getDataByUuid, onUuidChanged = proxy.onUuidChanged, onProgress = proxy.onProgress, log = proxy.log, getCustomResumeData = proxy.getCustomResumeData;\n        function abort(id) {\n            qq.each(handler._getXhrs(id), function(xhrId, xhr) {\n                var ajaxRequester = handler._getAjaxRequester(id, xhrId);\n                xhr.onreadystatechange = null;\n                xhr.upload.onprogress = null;\n                xhr.abort();\n                ajaxRequester && ajaxRequester.canceled && ajaxRequester.canceled(id);\n            });\n        }\n        qq.extend(this, new qq.UploadHandler(spec));\n        qq.override(this, function(super_) {\n            return {\n                add: function(id, blobOrProxy) {\n                    if (qq.isFile(blobOrProxy) || qq.isBlob(blobOrProxy)) {\n                        super_.add(id, {\n                            file: blobOrProxy\n                        });\n                    } else if (blobOrProxy instanceof qq.BlobProxy) {\n                        super_.add(id, {\n                            proxy: blobOrProxy\n                        });\n                    } else {\n                        throw new Error(\"Passed obj is not a File, Blob, or proxy\");\n                    }\n                    handler._initTempState(id);\n                    resumeEnabled && handler._maybePrepareForResume(id);\n                },\n                expunge: function(id) {\n                    abort(id);\n                    handler._maybeDeletePersistedChunkData(id);\n                    handler._clearXhrs(id);\n                    super_.expunge(id);\n                }\n            };\n        });\n        qq.extend(this, {\n            clearCachedChunk: function(id, chunkIdx) {\n                var fileState = handler._getFileState(id);\n                if (fileState) {\n                    delete fileState.temp.cachedChunks[chunkIdx];\n                }\n            },\n            clearXhr: function(id, chunkIdx) {\n                var tempState = handler._getFileState(id).temp;\n                if (tempState.xhrs) {\n                    delete tempState.xhrs[chunkIdx];\n                }\n                if (tempState.ajaxRequesters) {\n                    delete tempState.ajaxRequesters[chunkIdx];\n                }\n            },\n            finalizeChunks: function(id, responseParser) {\n                var lastChunkIdx = handler._getTotalChunks(id) - 1, xhr = handler._getXhr(id, lastChunkIdx);\n                if (responseParser) {\n                    return new qq.Promise().success(responseParser(xhr), xhr);\n                }\n                return new qq.Promise().success({}, xhr);\n            },\n            getFile: function(id) {\n                return handler.isValid(id) && handler._getFileState(id).file;\n            },\n            getProxy: function(id) {\n                return handler.isValid(id) && handler._getFileState(id).proxy;\n            },\n            getResumableFilesData: function() {\n                var resumableFilesData = [];\n                handler._iterateResumeRecords(function(key, uploadData) {\n                    handler.moveInProgressToRemaining(null, uploadData.chunking.inProgress, uploadData.chunking.remaining);\n                    var data = {\n                        name: uploadData.name,\n                        remaining: uploadData.chunking.remaining,\n                        size: uploadData.size,\n                        uuid: uploadData.uuid\n                    };\n                    if (uploadData.key) {\n                        data.key = uploadData.key;\n                    }\n                    if (uploadData.customResumeData) {\n                        data.customResumeData = uploadData.customResumeData;\n                    }\n                    resumableFilesData.push(data);\n                });\n                return resumableFilesData;\n            },\n            isAttemptingResume: function(id) {\n                return handler._getFileState(id).attemptingResume;\n            },\n            isResumable: function(id) {\n                return !!chunking && handler.isValid(id) && !handler._getFileState(id).notResumable;\n            },\n            moveInProgressToRemaining: function(id, optInProgress, optRemaining) {\n                var fileState = handler._getFileState(id) || {}, chunkingState = fileState.chunking || {}, inProgress = optInProgress || chunkingState.inProgress, remaining = optRemaining || chunkingState.remaining;\n                if (inProgress) {\n                    log(qq.format(\"Moving these chunks from in-progress {}, to remaining.\", JSON.stringify(inProgress)));\n                    inProgress.reverse();\n                    qq.each(inProgress, function(idx, chunkIdx) {\n                        remaining.unshift(chunkIdx);\n                    });\n                    inProgress.length = 0;\n                }\n            },\n            pause: function(id) {\n                if (handler.isValid(id)) {\n                    log(qq.format(\"Aborting XHR upload for {} '{}' due to pause instruction.\", id, getName(id)));\n                    handler._getFileState(id).paused = true;\n                    abort(id);\n                    return true;\n                }\n            },\n            reevaluateChunking: function(id) {\n                if (chunking && handler.isValid(id)) {\n                    var state = handler._getFileState(id), totalChunks, i;\n                    delete state.chunking;\n                    state.chunking = {};\n                    totalChunks = handler._getTotalChunks(id);\n                    if (totalChunks > 1 || chunking.mandatory) {\n                        state.chunking.enabled = true;\n                        state.chunking.parts = totalChunks;\n                        state.chunking.remaining = [];\n                        for (i = 0; i < totalChunks; i++) {\n                            state.chunking.remaining.push(i);\n                        }\n                        handler._initTempState(id);\n                    } else {\n                        state.chunking.enabled = false;\n                    }\n                }\n            },\n            updateBlob: function(id, newBlob) {\n                if (handler.isValid(id)) {\n                    handler._getFileState(id).file = newBlob;\n                }\n            },\n            _clearXhrs: function(id) {\n                var tempState = handler._getFileState(id).temp;\n                qq.each(tempState.ajaxRequesters, function(chunkId) {\n                    delete tempState.ajaxRequesters[chunkId];\n                });\n                qq.each(tempState.xhrs, function(chunkId) {\n                    delete tempState.xhrs[chunkId];\n                });\n            },\n            _createXhr: function(id, optChunkIdx) {\n                return handler._registerXhr(id, optChunkIdx, qq.createXhrInstance());\n            },\n            _getAjaxRequester: function(id, optChunkIdx) {\n                var chunkIdx = optChunkIdx == null ? -1 : optChunkIdx;\n                return handler._getFileState(id).temp.ajaxRequesters[chunkIdx];\n            },\n            _getChunkData: function(id, chunkIndex) {\n                var chunkSize = getChunkSize(id), fileSize = getSize(id), fileOrBlob = handler.getFile(id), startBytes = chunkSize * chunkIndex, endBytes = startBytes + chunkSize >= fileSize ? fileSize : startBytes + chunkSize, totalChunks = handler._getTotalChunks(id), cachedChunks = this._getFileState(id).temp.cachedChunks, blob = cachedChunks[chunkIndex] || qq.sliceBlob(fileOrBlob, startBytes, endBytes);\n                cachedChunks[chunkIndex] = blob;\n                return {\n                    part: chunkIndex,\n                    start: startBytes,\n                    end: endBytes,\n                    count: totalChunks,\n                    blob: blob,\n                    size: endBytes - startBytes\n                };\n            },\n            _getChunkDataForCallback: function(chunkData) {\n                return {\n                    partIndex: chunkData.part,\n                    startByte: chunkData.start + 1,\n                    endByte: chunkData.end,\n                    totalParts: chunkData.count\n                };\n            },\n            _getLocalStorageId: function(id) {\n                var formatVersion = \"5.0\", name = getName(id), size = getSize(id), chunkSize = getChunkSize(id), endpoint = getEndpoint(id), customKeys = resume.customKeys(id), localStorageId = qq.format(\"qq{}resume{}-{}-{}-{}-{}\", namespace, formatVersion, name, size, chunkSize, endpoint);\n                customKeys.forEach(function(key) {\n                    localStorageId += \"-\" + key;\n                });\n                return localStorageId;\n            },\n            _getMimeType: function(id) {\n                return handler.getFile(id).type;\n            },\n            _getPersistableData: function(id) {\n                return handler._getFileState(id).chunking;\n            },\n            _getTotalChunks: function(id) {\n                if (chunking) {\n                    var fileSize = getSize(id), chunkSize = getChunkSize(id);\n                    return Math.ceil(fileSize / chunkSize);\n                }\n            },\n            _getXhr: function(id, optChunkIdx) {\n                var chunkIdx = optChunkIdx == null ? -1 : optChunkIdx;\n                return handler._getFileState(id).temp.xhrs[chunkIdx];\n            },\n            _getXhrs: function(id) {\n                return handler._getFileState(id).temp.xhrs;\n            },\n            _iterateResumeRecords: function(callback) {\n                if (resumeEnabled) {\n                    qq.each(localStorage, function(key, item) {\n                        if (key.indexOf(qq.format(\"qq{}resume\", namespace)) === 0) {\n                            var uploadData = JSON.parse(item);\n                            callback(key, uploadData);\n                        }\n                    });\n                }\n            },\n            _initTempState: function(id) {\n                handler._getFileState(id).temp = {\n                    ajaxRequesters: {},\n                    chunkProgress: {},\n                    xhrs: {},\n                    cachedChunks: {}\n                };\n            },\n            _markNotResumable: function(id) {\n                handler._getFileState(id).notResumable = true;\n            },\n            _maybeDeletePersistedChunkData: function(id) {\n                var localStorageId;\n                if (resumeEnabled && handler.isResumable(id)) {\n                    localStorageId = handler._getLocalStorageId(id);\n                    if (localStorageId && localStorage.getItem(localStorageId)) {\n                        localStorage.removeItem(localStorageId);\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _maybePrepareForResume: function(id) {\n                var state = handler._getFileState(id), localStorageId, persistedData;\n                if (resumeEnabled && state.key === undefined) {\n                    localStorageId = handler._getLocalStorageId(id);\n                    persistedData = localStorage.getItem(localStorageId);\n                    if (persistedData) {\n                        persistedData = JSON.parse(persistedData);\n                        if (getDataByUuid(persistedData.uuid)) {\n                            handler._markNotResumable(id);\n                        } else {\n                            log(qq.format(\"Identified file with ID {} and name of {} as resumable.\", id, getName(id)));\n                            onUuidChanged(id, persistedData.uuid);\n                            state.key = persistedData.key;\n                            state.chunking = persistedData.chunking;\n                            state.loaded = persistedData.loaded;\n                            state.customResumeData = persistedData.customResumeData;\n                            state.attemptingResume = true;\n                            handler.moveInProgressToRemaining(id);\n                        }\n                    }\n                }\n            },\n            _maybePersistChunkedState: function(id) {\n                var state = handler._getFileState(id), localStorageId, persistedData;\n                if (resumeEnabled && handler.isResumable(id)) {\n                    var customResumeData = getCustomResumeData(id);\n                    localStorageId = handler._getLocalStorageId(id);\n                    persistedData = {\n                        name: getName(id),\n                        size: getSize(id),\n                        uuid: getUuid(id),\n                        key: state.key,\n                        chunking: state.chunking,\n                        loaded: state.loaded,\n                        lastUpdated: Date.now()\n                    };\n                    if (customResumeData) {\n                        persistedData.customResumeData = customResumeData;\n                    }\n                    try {\n                        localStorage.setItem(localStorageId, JSON.stringify(persistedData));\n                    } catch (error) {\n                        log(qq.format(\"Unable to save resume data for '{}' due to error: '{}'.\", id, error.toString()), \"warn\");\n                    }\n                }\n            },\n            _registerProgressHandler: function(id, chunkIdx, chunkSize) {\n                var xhr = handler._getXhr(id, chunkIdx), name = getName(id), progressCalculator = {\n                    simple: function(loaded, total) {\n                        var fileSize = getSize(id);\n                        if (loaded === total) {\n                            onProgress(id, name, fileSize, fileSize);\n                        } else {\n                            onProgress(id, name, loaded >= fileSize ? fileSize - 1 : loaded, fileSize);\n                        }\n                    },\n                    chunked: function(loaded, total) {\n                        var chunkProgress = handler._getFileState(id).temp.chunkProgress, totalSuccessfullyLoadedForFile = handler._getFileState(id).loaded, loadedForRequest = loaded, totalForRequest = total, totalFileSize = getSize(id), estActualChunkLoaded = loadedForRequest - (totalForRequest - chunkSize), totalLoadedForFile = totalSuccessfullyLoadedForFile;\n                        chunkProgress[chunkIdx] = estActualChunkLoaded;\n                        qq.each(chunkProgress, function(chunkIdx, chunkLoaded) {\n                            totalLoadedForFile += chunkLoaded;\n                        });\n                        onProgress(id, name, totalLoadedForFile, totalFileSize);\n                    }\n                };\n                xhr.upload.onprogress = function(e) {\n                    if (e.lengthComputable) {\n                        var type = chunkSize == null ? \"simple\" : \"chunked\";\n                        progressCalculator[type](e.loaded, e.total);\n                    }\n                };\n            },\n            _registerXhr: function(id, optChunkIdx, xhr, optAjaxRequester) {\n                var xhrsId = optChunkIdx == null ? -1 : optChunkIdx, tempState = handler._getFileState(id).temp;\n                tempState.xhrs = tempState.xhrs || {};\n                tempState.ajaxRequesters = tempState.ajaxRequesters || {};\n                tempState.xhrs[xhrsId] = xhr;\n                if (optAjaxRequester) {\n                    tempState.ajaxRequesters[xhrsId] = optAjaxRequester;\n                }\n                return xhr;\n            },\n            _removeExpiredChunkingRecords: function() {\n                var expirationDays = resume.recordsExpireIn;\n                handler._iterateResumeRecords(function(key, uploadData) {\n                    var expirationDate = new Date(uploadData.lastUpdated);\n                    expirationDate.setDate(expirationDate.getDate() + expirationDays);\n                    if (expirationDate.getTime() <= Date.now()) {\n                        log(\"Removing expired resume record with key \" + key);\n                        localStorage.removeItem(key);\n                    }\n                });\n            },\n            _shouldChunkThisFile: function(id) {\n                var state = handler._getFileState(id);\n                if (state) {\n                    if (!state.chunking) {\n                        handler.reevaluateChunking(id);\n                    }\n                    return state.chunking.enabled;\n                }\n            }\n        });\n    };\n    qq.DeleteFileAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, options = {\n            method: \"DELETE\",\n            uuidParamName: \"qquuid\",\n            endpointStore: {},\n            maxConnections: 3,\n            customHeaders: function(id) {\n                return {};\n            },\n            paramsStore: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {},\n            onDelete: function(id) {},\n            onDeleteComplete: function(id, xhrOrXdr, isError) {}\n        };\n        qq.extend(options, o);\n        function getMandatedParams() {\n            if (options.method.toUpperCase() === \"POST\") {\n                return {\n                    _method: \"DELETE\"\n                };\n            }\n            return {};\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"POST\", \"DELETE\" ],\n            method: options.method,\n            endpointStore: options.endpointStore,\n            paramsStore: options.paramsStore,\n            mandatedParams: getMandatedParams(),\n            maxConnections: options.maxConnections,\n            customHeaders: function(id) {\n                return options.customHeaders.get(id);\n            },\n            log: options.log,\n            onSend: options.onDelete,\n            onComplete: options.onDeleteComplete,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            sendDelete: function(id, uuid, additionalMandatedParams) {\n                var additionalOptions = additionalMandatedParams || {};\n                options.log(\"Submitting delete file request for \" + id);\n                if (options.method === \"DELETE\") {\n                    requester.initTransport(id).withPath(uuid).withParams(additionalOptions).send();\n                } else {\n                    additionalOptions[options.uuidParamName] = uuid;\n                    requester.initTransport(id).withParams(additionalOptions).send();\n                }\n            }\n        });\n    };\n    (function() {\n        function detectSubsampling(img) {\n            var iw = img.naturalWidth, ih = img.naturalHeight, canvas = document.createElement(\"canvas\"), ctx;\n            if (iw * ih > 1024 * 1024) {\n                canvas.width = canvas.height = 1;\n                ctx = canvas.getContext(\"2d\");\n                ctx.drawImage(img, -iw + 1, 0);\n                return ctx.getImageData(0, 0, 1, 1).data[3] === 0;\n            } else {\n                return false;\n            }\n        }\n        function detectVerticalSquash(img, iw, ih) {\n            var canvas = document.createElement(\"canvas\"), sy = 0, ey = ih, py = ih, ctx, data, alpha, ratio;\n            canvas.width = 1;\n            canvas.height = ih;\n            ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(img, 0, 0);\n            data = ctx.getImageData(0, 0, 1, ih).data;\n            while (py > sy) {\n                alpha = data[(py - 1) * 4 + 3];\n                if (alpha === 0) {\n                    ey = py;\n                } else {\n                    sy = py;\n                }\n                py = ey + sy >> 1;\n            }\n            ratio = py / ih;\n            return ratio === 0 ? 1 : ratio;\n        }\n        function renderImageToDataURL(img, blob, options, doSquash) {\n            var canvas = document.createElement(\"canvas\"), mime = options.mime || \"image/jpeg\", promise = new qq.Promise();\n            renderImageToCanvas(img, blob, canvas, options, doSquash).then(function() {\n                promise.success(canvas.toDataURL(mime, options.quality || .8));\n            });\n            return promise;\n        }\n        function maybeCalculateDownsampledDimensions(spec) {\n            var maxPixels = 5241e3;\n            if (!qq.ios()) {\n                throw new qq.Error(\"Downsampled dimensions can only be reliably calculated for iOS!\");\n            }\n            if (spec.origHeight * spec.origWidth > maxPixels) {\n                return {\n                    newHeight: Math.round(Math.sqrt(maxPixels * (spec.origHeight / spec.origWidth))),\n                    newWidth: Math.round(Math.sqrt(maxPixels * (spec.origWidth / spec.origHeight)))\n                };\n            }\n        }\n        function renderImageToCanvas(img, blob, canvas, options, doSquash) {\n            var iw = img.naturalWidth, ih = img.naturalHeight, width = options.width, height = options.height, ctx = canvas.getContext(\"2d\"), promise = new qq.Promise(), modifiedDimensions;\n            ctx.save();\n            if (options.resize) {\n                return renderImageToCanvasWithCustomResizer({\n                    blob: blob,\n                    canvas: canvas,\n                    image: img,\n                    imageHeight: ih,\n                    imageWidth: iw,\n                    orientation: options.orientation,\n                    resize: options.resize,\n                    targetHeight: height,\n                    targetWidth: width\n                });\n            }\n            if (!qq.supportedFeatures.unlimitedScaledImageSize) {\n                modifiedDimensions = maybeCalculateDownsampledDimensions({\n                    origWidth: width,\n                    origHeight: height\n                });\n                if (modifiedDimensions) {\n                    qq.log(qq.format(\"Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h\", width, height, modifiedDimensions.newWidth, modifiedDimensions.newHeight), \"warn\");\n                    width = modifiedDimensions.newWidth;\n                    height = modifiedDimensions.newHeight;\n                }\n            }\n            transformCoordinate(canvas, width, height, options.orientation);\n            if (qq.ios()) {\n                (function() {\n                    if (detectSubsampling(img)) {\n                        iw /= 2;\n                        ih /= 2;\n                    }\n                    var d = 1024, tmpCanvas = document.createElement(\"canvas\"), vertSquashRatio = doSquash ? detectVerticalSquash(img, iw, ih) : 1, dw = Math.ceil(d * width / iw), dh = Math.ceil(d * height / ih / vertSquashRatio), sy = 0, dy = 0, tmpCtx, sx, dx;\n                    tmpCanvas.width = tmpCanvas.height = d;\n                    tmpCtx = tmpCanvas.getContext(\"2d\");\n                    while (sy < ih) {\n                        sx = 0;\n                        dx = 0;\n                        while (sx < iw) {\n                            tmpCtx.clearRect(0, 0, d, d);\n                            tmpCtx.drawImage(img, -sx, -sy);\n                            ctx.drawImage(tmpCanvas, 0, 0, d, d, dx, dy, dw, dh);\n                            sx += d;\n                            dx += dw;\n                        }\n                        sy += d;\n                        dy += dh;\n                    }\n                    ctx.restore();\n                    tmpCanvas = tmpCtx = null;\n                })();\n            } else {\n                ctx.drawImage(img, 0, 0, width, height);\n            }\n            canvas.qqImageRendered && canvas.qqImageRendered();\n            promise.success();\n            return promise;\n        }\n        function renderImageToCanvasWithCustomResizer(resizeInfo) {\n            var blob = resizeInfo.blob, image = resizeInfo.image, imageHeight = resizeInfo.imageHeight, imageWidth = resizeInfo.imageWidth, orientation = resizeInfo.orientation, promise = new qq.Promise(), resize = resizeInfo.resize, sourceCanvas = document.createElement(\"canvas\"), sourceCanvasContext = sourceCanvas.getContext(\"2d\"), targetCanvas = resizeInfo.canvas, targetHeight = resizeInfo.targetHeight, targetWidth = resizeInfo.targetWidth;\n            transformCoordinate(sourceCanvas, imageWidth, imageHeight, orientation);\n            targetCanvas.height = targetHeight;\n            targetCanvas.width = targetWidth;\n            sourceCanvasContext.drawImage(image, 0, 0);\n            resize({\n                blob: blob,\n                height: targetHeight,\n                image: image,\n                sourceCanvas: sourceCanvas,\n                targetCanvas: targetCanvas,\n                width: targetWidth\n            }).then(function success() {\n                targetCanvas.qqImageRendered && targetCanvas.qqImageRendered();\n                promise.success();\n            }, promise.failure);\n            return promise;\n        }\n        function transformCoordinate(canvas, width, height, orientation) {\n            switch (orientation) {\n              case 5:\n              case 6:\n              case 7:\n              case 8:\n                canvas.width = height;\n                canvas.height = width;\n                break;\n\n              default:\n                canvas.width = width;\n                canvas.height = height;\n            }\n            var ctx = canvas.getContext(\"2d\");\n            switch (orientation) {\n              case 2:\n                ctx.translate(width, 0);\n                ctx.scale(-1, 1);\n                break;\n\n              case 3:\n                ctx.translate(width, height);\n                ctx.rotate(Math.PI);\n                break;\n\n              case 4:\n                ctx.translate(0, height);\n                ctx.scale(1, -1);\n                break;\n\n              case 5:\n                ctx.rotate(.5 * Math.PI);\n                ctx.scale(1, -1);\n                break;\n\n              case 6:\n                ctx.rotate(.5 * Math.PI);\n                ctx.translate(0, -height);\n                break;\n\n              case 7:\n                ctx.rotate(.5 * Math.PI);\n                ctx.translate(width, -height);\n                ctx.scale(-1, 1);\n                break;\n\n              case 8:\n                ctx.rotate(-.5 * Math.PI);\n                ctx.translate(-width, 0);\n                break;\n\n              default:\n                break;\n            }\n        }\n        function MegaPixImage(srcImage, errorCallback) {\n            var self = this;\n            if (window.Blob && srcImage instanceof Blob) {\n                (function() {\n                    var img = new Image(), URL = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;\n                    if (!URL) {\n                        throw Error(\"No createObjectURL function found to create blob url\");\n                    }\n                    img.src = URL.createObjectURL(srcImage);\n                    self.blob = srcImage;\n                    srcImage = img;\n                })();\n            }\n            if (!srcImage.naturalWidth && !srcImage.naturalHeight) {\n                srcImage.onload = function() {\n                    var listeners = self.imageLoadListeners;\n                    if (listeners) {\n                        self.imageLoadListeners = null;\n                        setTimeout(function() {\n                            for (var i = 0, len = listeners.length; i < len; i++) {\n                                listeners[i]();\n                            }\n                        }, 0);\n                    }\n                };\n                srcImage.onerror = errorCallback;\n                this.imageLoadListeners = [];\n            }\n            this.srcImage = srcImage;\n        }\n        MegaPixImage.prototype.render = function(target, options) {\n            options = options || {};\n            var self = this, imgWidth = this.srcImage.naturalWidth, imgHeight = this.srcImage.naturalHeight, width = options.width, height = options.height, maxWidth = options.maxWidth, maxHeight = options.maxHeight, doSquash = !this.blob || this.blob.type === \"image/jpeg\", tagName = target.tagName.toLowerCase(), opt;\n            if (this.imageLoadListeners) {\n                this.imageLoadListeners.push(function() {\n                    self.render(target, options);\n                });\n                return;\n            }\n            if (width && !height) {\n                height = imgHeight * width / imgWidth << 0;\n            } else if (height && !width) {\n                width = imgWidth * height / imgHeight << 0;\n            } else {\n                width = imgWidth;\n                height = imgHeight;\n            }\n            if (maxWidth && width > maxWidth) {\n                width = maxWidth;\n                height = imgHeight * width / imgWidth << 0;\n            }\n            if (maxHeight && height > maxHeight) {\n                height = maxHeight;\n                width = imgWidth * height / imgHeight << 0;\n            }\n            opt = {\n                width: width,\n                height: height\n            }, qq.each(options, function(optionsKey, optionsValue) {\n                opt[optionsKey] = optionsValue;\n            });\n            if (tagName === \"img\") {\n                (function() {\n                    var oldTargetSrc = target.src;\n                    renderImageToDataURL(self.srcImage, self.blob, opt, doSquash).then(function(dataUri) {\n                        target.src = dataUri;\n                        oldTargetSrc === target.src && target.onload();\n                    });\n                })();\n            } else if (tagName === \"canvas\") {\n                renderImageToCanvas(this.srcImage, this.blob, target, opt, doSquash);\n            }\n            if (typeof this.onrender === \"function\") {\n                this.onrender(target);\n            }\n        };\n        qq.MegaPixImage = MegaPixImage;\n    })();\n    qq.ImageGenerator = function(log) {\n        \"use strict\";\n        function isImg(el) {\n            return el.tagName.toLowerCase() === \"img\";\n        }\n        function isCanvas(el) {\n            return el.tagName.toLowerCase() === \"canvas\";\n        }\n        function isImgCorsSupported() {\n            return new Image().crossOrigin !== undefined;\n        }\n        function isCanvasSupported() {\n            var canvas = document.createElement(\"canvas\");\n            return canvas.getContext && canvas.getContext(\"2d\");\n        }\n        function determineMimeOfFileName(nameWithPath) {\n            var pathSegments = nameWithPath.split(\"/\"), name = pathSegments[pathSegments.length - 1].split(\"?\")[0], extension = qq.getExtension(name);\n            extension = extension && extension.toLowerCase();\n            switch (extension) {\n              case \"jpeg\":\n              case \"jpg\":\n                return \"image/jpeg\";\n\n              case \"png\":\n                return \"image/png\";\n\n              case \"bmp\":\n                return \"image/bmp\";\n\n              case \"gif\":\n                return \"image/gif\";\n\n              case \"tiff\":\n              case \"tif\":\n                return \"image/tiff\";\n            }\n        }\n        function isCrossOrigin(url) {\n            var targetAnchor = document.createElement(\"a\"), targetProtocol, targetHostname, targetPort;\n            targetAnchor.href = url;\n            targetProtocol = targetAnchor.protocol;\n            targetPort = targetAnchor.port;\n            targetHostname = targetAnchor.hostname;\n            if (targetProtocol.toLowerCase() !== window.location.protocol.toLowerCase()) {\n                return true;\n            }\n            if (targetHostname.toLowerCase() !== window.location.hostname.toLowerCase()) {\n                return true;\n            }\n            if (targetPort !== window.location.port && !qq.ie()) {\n                return true;\n            }\n            return false;\n        }\n        function registerImgLoadListeners(img, promise) {\n            img.onload = function() {\n                img.onload = null;\n                img.onerror = null;\n                promise.success(img);\n            };\n            img.onerror = function() {\n                img.onload = null;\n                img.onerror = null;\n                log(\"Problem drawing thumbnail!\", \"error\");\n                promise.failure(img, \"Problem drawing thumbnail!\");\n            };\n        }\n        function registerCanvasDrawImageListener(canvas, promise) {\n            canvas.qqImageRendered = function() {\n                promise.success(canvas);\n            };\n        }\n        function registerThumbnailRenderedListener(imgOrCanvas, promise) {\n            var registered = isImg(imgOrCanvas) || isCanvas(imgOrCanvas);\n            if (isImg(imgOrCanvas)) {\n                registerImgLoadListeners(imgOrCanvas, promise);\n            } else if (isCanvas(imgOrCanvas)) {\n                registerCanvasDrawImageListener(imgOrCanvas, promise);\n            } else {\n                promise.failure(imgOrCanvas);\n                log(qq.format(\"Element container of type {} is not supported!\", imgOrCanvas.tagName), \"error\");\n            }\n            return registered;\n        }\n        function draw(fileOrBlob, container, options) {\n            var drawPreview = new qq.Promise(), identifier = new qq.Identify(fileOrBlob, log), maxSize = options.maxSize, orient = options.orient == null ? true : options.orient, megapixErrorHandler = function() {\n                container.onerror = null;\n                container.onload = null;\n                log(\"Could not render preview, file may be too large!\", \"error\");\n                drawPreview.failure(container, \"Browser cannot render image!\");\n            };\n            identifier.isPreviewable().then(function(mime) {\n                var dummyExif = {\n                    parse: function() {\n                        return new qq.Promise().success();\n                    }\n                }, exif = orient ? new qq.Exif(fileOrBlob, log) : dummyExif, mpImg = new qq.MegaPixImage(fileOrBlob, megapixErrorHandler);\n                if (registerThumbnailRenderedListener(container, drawPreview)) {\n                    exif.parse().then(function(exif) {\n                        var orientation = exif && exif.Orientation;\n                        mpImg.render(container, {\n                            maxWidth: maxSize,\n                            maxHeight: maxSize,\n                            orientation: orientation,\n                            mime: mime,\n                            resize: options.customResizeFunction\n                        });\n                    }, function(failureMsg) {\n                        log(qq.format(\"EXIF data could not be parsed ({}).  Assuming orientation = 1.\", failureMsg));\n                        mpImg.render(container, {\n                            maxWidth: maxSize,\n                            maxHeight: maxSize,\n                            mime: mime,\n                            resize: options.customResizeFunction\n                        });\n                    });\n                }\n            }, function() {\n                log(\"Not previewable\");\n                drawPreview.failure(container, \"Not previewable\");\n            });\n            return drawPreview;\n        }\n        function drawOnCanvasOrImgFromUrl(url, canvasOrImg, draw, maxSize, customResizeFunction) {\n            var tempImg = new Image(), tempImgRender = new qq.Promise();\n            registerThumbnailRenderedListener(tempImg, tempImgRender);\n            if (isCrossOrigin(url)) {\n                tempImg.crossOrigin = \"anonymous\";\n            }\n            tempImg.src = url;\n            tempImgRender.then(function rendered() {\n                registerThumbnailRenderedListener(canvasOrImg, draw);\n                var mpImg = new qq.MegaPixImage(tempImg);\n                mpImg.render(canvasOrImg, {\n                    maxWidth: maxSize,\n                    maxHeight: maxSize,\n                    mime: determineMimeOfFileName(url),\n                    resize: customResizeFunction\n                });\n            }, draw.failure);\n        }\n        function drawOnImgFromUrlWithCssScaling(url, img, draw, maxSize) {\n            registerThumbnailRenderedListener(img, draw);\n            qq(img).css({\n                maxWidth: maxSize + \"px\",\n                maxHeight: maxSize + \"px\"\n            });\n            img.src = url;\n        }\n        function drawFromUrl(url, container, options) {\n            var draw = new qq.Promise(), scale = options.scale, maxSize = scale ? options.maxSize : null;\n            if (scale && isImg(container)) {\n                if (isCanvasSupported()) {\n                    if (isCrossOrigin(url) && !isImgCorsSupported()) {\n                        drawOnImgFromUrlWithCssScaling(url, container, draw, maxSize);\n                    } else {\n                        drawOnCanvasOrImgFromUrl(url, container, draw, maxSize);\n                    }\n                } else {\n                    drawOnImgFromUrlWithCssScaling(url, container, draw, maxSize);\n                }\n            } else if (isCanvas(container)) {\n                drawOnCanvasOrImgFromUrl(url, container, draw, maxSize);\n            } else if (registerThumbnailRenderedListener(container, draw)) {\n                container.src = url;\n            }\n            return draw;\n        }\n        qq.extend(this, {\n            generate: function(fileBlobOrUrl, container, options) {\n                if (qq.isString(fileBlobOrUrl)) {\n                    log(\"Attempting to update thumbnail based on server response.\");\n                    return drawFromUrl(fileBlobOrUrl, container, options || {});\n                } else {\n                    log(\"Attempting to draw client-side image preview.\");\n                    return draw(fileBlobOrUrl, container, options || {});\n                }\n            }\n        });\n        this._testing = {};\n        this._testing.isImg = isImg;\n        this._testing.isCanvas = isCanvas;\n        this._testing.isCrossOrigin = isCrossOrigin;\n        this._testing.determineMimeOfFileName = determineMimeOfFileName;\n    };\n    qq.Exif = function(fileOrBlob, log) {\n        \"use strict\";\n        var TAG_IDS = [ 274 ], TAG_INFO = {\n            274: {\n                name: \"Orientation\",\n                bytes: 2\n            }\n        };\n        function parseLittleEndian(hex) {\n            var result = 0, pow = 0;\n            while (hex.length > 0) {\n                result += parseInt(hex.substring(0, 2), 16) * Math.pow(2, pow);\n                hex = hex.substring(2, hex.length);\n                pow += 8;\n            }\n            return result;\n        }\n        function seekToApp1(offset, promise) {\n            var theOffset = offset, thePromise = promise;\n            if (theOffset === undefined) {\n                theOffset = 2;\n                thePromise = new qq.Promise();\n            }\n            qq.readBlobToHex(fileOrBlob, theOffset, 4).then(function(hex) {\n                var match = /^ffe([0-9])/.exec(hex), segmentLength;\n                if (match) {\n                    if (match[1] !== \"1\") {\n                        segmentLength = parseInt(hex.slice(4, 8), 16);\n                        seekToApp1(theOffset + segmentLength + 2, thePromise);\n                    } else {\n                        thePromise.success(theOffset);\n                    }\n                } else {\n                    thePromise.failure(\"No EXIF header to be found!\");\n                }\n            });\n            return thePromise;\n        }\n        function getApp1Offset() {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, 0, 6).then(function(hex) {\n                if (hex.indexOf(\"ffd8\") !== 0) {\n                    promise.failure(\"Not a valid JPEG!\");\n                } else {\n                    seekToApp1().then(function(offset) {\n                        promise.success(offset);\n                    }, function(error) {\n                        promise.failure(error);\n                    });\n                }\n            });\n            return promise;\n        }\n        function isLittleEndian(app1Start) {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, app1Start + 10, 2).then(function(hex) {\n                promise.success(hex === \"4949\");\n            });\n            return promise;\n        }\n        function getDirEntryCount(app1Start, littleEndian) {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, app1Start + 18, 2).then(function(hex) {\n                if (littleEndian) {\n                    return promise.success(parseLittleEndian(hex));\n                } else {\n                    promise.success(parseInt(hex, 16));\n                }\n            });\n            return promise;\n        }\n        function getIfd(app1Start, dirEntries) {\n            var offset = app1Start + 20, bytes = dirEntries * 12;\n            return qq.readBlobToHex(fileOrBlob, offset, bytes);\n        }\n        function getDirEntries(ifdHex) {\n            var entries = [], offset = 0;\n            while (offset + 24 <= ifdHex.length) {\n                entries.push(ifdHex.slice(offset, offset + 24));\n                offset += 24;\n            }\n            return entries;\n        }\n        function getTagValues(littleEndian, dirEntries) {\n            var TAG_VAL_OFFSET = 16, tagsToFind = qq.extend([], TAG_IDS), vals = {};\n            qq.each(dirEntries, function(idx, entry) {\n                var idHex = entry.slice(0, 4), id = littleEndian ? parseLittleEndian(idHex) : parseInt(idHex, 16), tagsToFindIdx = tagsToFind.indexOf(id), tagValHex, tagName, tagValLength;\n                if (tagsToFindIdx >= 0) {\n                    tagName = TAG_INFO[id].name;\n                    tagValLength = TAG_INFO[id].bytes;\n                    tagValHex = entry.slice(TAG_VAL_OFFSET, TAG_VAL_OFFSET + tagValLength * 2);\n                    vals[tagName] = littleEndian ? parseLittleEndian(tagValHex) : parseInt(tagValHex, 16);\n                    tagsToFind.splice(tagsToFindIdx, 1);\n                }\n                if (tagsToFind.length === 0) {\n                    return false;\n                }\n            });\n            return vals;\n        }\n        qq.extend(this, {\n            parse: function() {\n                var parser = new qq.Promise(), onParseFailure = function(message) {\n                    log(qq.format(\"EXIF header parse failed: '{}' \", message));\n                    parser.failure(message);\n                };\n                getApp1Offset().then(function(app1Offset) {\n                    log(qq.format(\"Moving forward with EXIF header parsing for '{}'\", fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name));\n                    isLittleEndian(app1Offset).then(function(littleEndian) {\n                        log(qq.format(\"EXIF Byte order is {} endian\", littleEndian ? \"little\" : \"big\"));\n                        getDirEntryCount(app1Offset, littleEndian).then(function(dirEntryCount) {\n                            log(qq.format(\"Found {} APP1 directory entries\", dirEntryCount));\n                            getIfd(app1Offset, dirEntryCount).then(function(ifdHex) {\n                                var dirEntries = getDirEntries(ifdHex), tagValues = getTagValues(littleEndian, dirEntries);\n                                log(\"Successfully parsed some EXIF tags\");\n                                parser.success(tagValues);\n                            }, onParseFailure);\n                        }, onParseFailure);\n                    }, onParseFailure);\n                }, onParseFailure);\n                return parser;\n            }\n        });\n        this._testing = {};\n        this._testing.parseLittleEndian = parseLittleEndian;\n    };\n    qq.Identify = function(fileOrBlob, log) {\n        \"use strict\";\n        function isIdentifiable(magicBytes, questionableBytes) {\n            var identifiable = false, magicBytesEntries = [].concat(magicBytes);\n            qq.each(magicBytesEntries, function(idx, magicBytesArrayEntry) {\n                if (questionableBytes.indexOf(magicBytesArrayEntry) === 0) {\n                    identifiable = true;\n                    return false;\n                }\n            });\n            return identifiable;\n        }\n        qq.extend(this, {\n            isPreviewable: function() {\n                var self = this, identifier = new qq.Promise(), previewable = false, name = fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name;\n                log(qq.format(\"Attempting to determine if {} can be rendered in this browser\", name));\n                log(\"First pass: check type attribute of blob object.\");\n                if (this.isPreviewableSync()) {\n                    log(\"Second pass: check for magic bytes in file header.\");\n                    qq.readBlobToHex(fileOrBlob, 0, 4).then(function(hex) {\n                        qq.each(self.PREVIEWABLE_MIME_TYPES, function(mime, bytes) {\n                            if (isIdentifiable(bytes, hex)) {\n                                if (mime !== \"image/tiff\" || qq.supportedFeatures.tiffPreviews) {\n                                    previewable = true;\n                                    identifier.success(mime);\n                                }\n                                return false;\n                            }\n                        });\n                        log(qq.format(\"'{}' is {} able to be rendered in this browser\", name, previewable ? \"\" : \"NOT\"));\n                        if (!previewable) {\n                            identifier.failure();\n                        }\n                    }, function() {\n                        log(\"Error reading file w/ name '\" + name + \"'.  Not able to be rendered in this browser.\");\n                        identifier.failure();\n                    });\n                } else {\n                    identifier.failure();\n                }\n                return identifier;\n            },\n            isPreviewableSync: function() {\n                var fileMime = fileOrBlob.type, isRecognizedImage = qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES), fileMime) >= 0, previewable = false, name = fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name;\n                if (isRecognizedImage) {\n                    if (fileMime === \"image/tiff\") {\n                        previewable = qq.supportedFeatures.tiffPreviews;\n                    } else {\n                        previewable = true;\n                    }\n                }\n                !previewable && log(name + \" is not previewable in this browser per the blob's type attr\");\n                return previewable;\n            }\n        });\n    };\n    qq.Identify.prototype.PREVIEWABLE_MIME_TYPES = {\n        \"image/jpeg\": \"ffd8ff\",\n        \"image/gif\": \"474946\",\n        \"image/png\": \"89504e\",\n        \"image/bmp\": \"424d\",\n        \"image/tiff\": [ \"49492a00\", \"4d4d002a\" ]\n    };\n    qq.ImageValidation = function(blob, log) {\n        \"use strict\";\n        function hasNonZeroLimits(limits) {\n            var atLeastOne = false;\n            qq.each(limits, function(limit, value) {\n                if (value > 0) {\n                    atLeastOne = true;\n                    return false;\n                }\n            });\n            return atLeastOne;\n        }\n        function getWidthHeight() {\n            var sizeDetermination = new qq.Promise();\n            new qq.Identify(blob, log).isPreviewable().then(function() {\n                var image = new Image(), url = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;\n                if (url) {\n                    image.onerror = function() {\n                        log(\"Cannot determine dimensions for image.  May be too large.\", \"error\");\n                        sizeDetermination.failure();\n                    };\n                    image.onload = function() {\n                        sizeDetermination.success({\n                            width: this.width,\n                            height: this.height\n                        });\n                    };\n                    image.src = url.createObjectURL(blob);\n                } else {\n                    log(\"No createObjectURL function available to generate image URL!\", \"error\");\n                    sizeDetermination.failure();\n                }\n            }, sizeDetermination.failure);\n            return sizeDetermination;\n        }\n        function getFailingLimit(limits, dimensions) {\n            var failingLimit;\n            qq.each(limits, function(limitName, limitValue) {\n                if (limitValue > 0) {\n                    var limitMatcher = /(max|min)(Width|Height)/.exec(limitName), dimensionPropName = limitMatcher[2].charAt(0).toLowerCase() + limitMatcher[2].slice(1), actualValue = dimensions[dimensionPropName];\n                    switch (limitMatcher[1]) {\n                      case \"min\":\n                        if (actualValue < limitValue) {\n                            failingLimit = limitName;\n                            return false;\n                        }\n                        break;\n\n                      case \"max\":\n                        if (actualValue > limitValue) {\n                            failingLimit = limitName;\n                            return false;\n                        }\n                        break;\n                    }\n                }\n            });\n            return failingLimit;\n        }\n        this.validate = function(limits) {\n            var validationEffort = new qq.Promise();\n            log(\"Attempting to validate image.\");\n            if (hasNonZeroLimits(limits)) {\n                getWidthHeight().then(function(dimensions) {\n                    var failingLimit = getFailingLimit(limits, dimensions);\n                    if (failingLimit) {\n                        validationEffort.failure(failingLimit);\n                    } else {\n                        validationEffort.success();\n                    }\n                }, validationEffort.success);\n            } else {\n                validationEffort.success();\n            }\n            return validationEffort;\n        };\n    };\n    qq.Session = function(spec) {\n        \"use strict\";\n        var options = {\n            endpoint: null,\n            params: {},\n            customHeaders: {},\n            cors: {},\n            addFileRecord: function(sessionData) {},\n            log: function(message, level) {}\n        };\n        qq.extend(options, spec, true);\n        function isJsonResponseValid(response) {\n            if (qq.isArray(response)) {\n                return true;\n            }\n            options.log(\"Session response is not an array.\", \"error\");\n        }\n        function handleFileItems(fileItems, success, xhrOrXdr, promise) {\n            var someItemsIgnored = false;\n            success = success && isJsonResponseValid(fileItems);\n            if (success) {\n                qq.each(fileItems, function(idx, fileItem) {\n                    if (fileItem.uuid == null) {\n                        someItemsIgnored = true;\n                        options.log(qq.format(\"Session response item {} did not include a valid UUID - ignoring.\", idx), \"error\");\n                    } else if (fileItem.name == null) {\n                        someItemsIgnored = true;\n                        options.log(qq.format(\"Session response item {} did not include a valid name - ignoring.\", idx), \"error\");\n                    } else {\n                        try {\n                            options.addFileRecord(fileItem);\n                            return true;\n                        } catch (err) {\n                            someItemsIgnored = true;\n                            options.log(err.message, \"error\");\n                        }\n                    }\n                    return false;\n                });\n            }\n            promise[success && !someItemsIgnored ? \"success\" : \"failure\"](fileItems, xhrOrXdr);\n        }\n        this.refresh = function() {\n            var refreshEffort = new qq.Promise(), refreshCompleteCallback = function(response, success, xhrOrXdr) {\n                handleFileItems(response, success, xhrOrXdr, refreshEffort);\n            }, requesterOptions = qq.extend({}, options), requester = new qq.SessionAjaxRequester(qq.extend(requesterOptions, {\n                onComplete: refreshCompleteCallback\n            }));\n            requester.queryServer();\n            return refreshEffort;\n        };\n    };\n    qq.SessionAjaxRequester = function(spec) {\n        \"use strict\";\n        var requester, options = {\n            endpoint: null,\n            customHeaders: {},\n            params: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            onComplete: function(response, success, xhrOrXdr) {},\n            log: function(str, level) {}\n        };\n        qq.extend(options, spec);\n        function onComplete(id, xhrOrXdr, isError) {\n            var response = null;\n            if (xhrOrXdr.responseText != null) {\n                try {\n                    response = qq.parseJson(xhrOrXdr.responseText);\n                } catch (err) {\n                    options.log(\"Problem parsing session response: \" + err.message, \"error\");\n                    isError = true;\n                }\n            }\n            options.onComplete(response, !isError, xhrOrXdr);\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"GET\" ],\n            method: \"GET\",\n            endpointStore: {\n                get: function() {\n                    return options.endpoint;\n                }\n            },\n            customHeaders: options.customHeaders,\n            log: options.log,\n            onComplete: onComplete,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            queryServer: function() {\n                var params = qq.extend({}, options.params);\n                options.log(\"Session query request.\");\n                requester.initTransport(\"sessionRefresh\").withParams(params).withCacheBuster().send();\n            }\n        });\n    };\n    qq.Scaler = function(spec, log) {\n        \"use strict\";\n        var self = this, customResizeFunction = spec.customResizer, includeOriginal = spec.sendOriginal, orient = spec.orient, defaultType = spec.defaultType, defaultQuality = spec.defaultQuality / 100, failedToScaleText = spec.failureText, includeExif = spec.includeExif, sizes = this._getSortedSizes(spec.sizes);\n        qq.extend(this, {\n            enabled: qq.supportedFeatures.scaling && sizes.length > 0,\n            getFileRecords: function(originalFileUuid, originalFileName, originalBlobOrBlobData) {\n                var self = this, records = [], originalBlob = originalBlobOrBlobData.blob ? originalBlobOrBlobData.blob : originalBlobOrBlobData, identifier = new qq.Identify(originalBlob, log);\n                if (identifier.isPreviewableSync()) {\n                    qq.each(sizes, function(idx, sizeRecord) {\n                        var outputType = self._determineOutputType({\n                            defaultType: defaultType,\n                            requestedType: sizeRecord.type,\n                            refType: originalBlob.type\n                        });\n                        records.push({\n                            uuid: qq.getUniqueId(),\n                            name: self._getName(originalFileName, {\n                                name: sizeRecord.name,\n                                type: outputType,\n                                refType: originalBlob.type\n                            }),\n                            blob: new qq.BlobProxy(originalBlob, qq.bind(self._generateScaledImage, self, {\n                                customResizeFunction: customResizeFunction,\n                                maxSize: sizeRecord.maxSize,\n                                orient: orient,\n                                type: outputType,\n                                quality: defaultQuality,\n                                failedText: failedToScaleText,\n                                includeExif: includeExif,\n                                log: log\n                            }))\n                        });\n                    });\n                    records.push({\n                        uuid: originalFileUuid,\n                        name: originalFileName,\n                        size: originalBlob.size,\n                        blob: includeOriginal ? originalBlob : null\n                    });\n                } else {\n                    records.push({\n                        uuid: originalFileUuid,\n                        name: originalFileName,\n                        size: originalBlob.size,\n                        blob: originalBlob\n                    });\n                }\n                return records;\n            },\n            handleNewFile: function(file, name, uuid, size, fileList, batchId, uuidParamName, api) {\n                var self = this, buttonId = file.qqButtonId || file.blob && file.blob.qqButtonId, scaledIds = [], originalId = null, addFileToHandler = api.addFileToHandler, uploadData = api.uploadData, paramsStore = api.paramsStore, proxyGroupId = qq.getUniqueId();\n                qq.each(self.getFileRecords(uuid, name, file), function(idx, record) {\n                    var blobSize = record.size, id;\n                    if (record.blob instanceof qq.BlobProxy) {\n                        blobSize = -1;\n                    }\n                    id = uploadData.addFile({\n                        uuid: record.uuid,\n                        name: record.name,\n                        size: blobSize,\n                        batchId: batchId,\n                        proxyGroupId: proxyGroupId\n                    });\n                    if (record.blob instanceof qq.BlobProxy) {\n                        scaledIds.push(id);\n                    } else {\n                        originalId = id;\n                    }\n                    if (record.blob) {\n                        addFileToHandler(id, record.blob);\n                        fileList.push({\n                            id: id,\n                            file: record.blob\n                        });\n                    } else {\n                        uploadData.setStatus(id, qq.status.REJECTED);\n                    }\n                });\n                if (originalId !== null) {\n                    qq.each(scaledIds, function(idx, scaledId) {\n                        var params = {\n                            qqparentuuid: uploadData.retrieve({\n                                id: originalId\n                            }).uuid,\n                            qqparentsize: uploadData.retrieve({\n                                id: originalId\n                            }).size\n                        };\n                        params[uuidParamName] = uploadData.retrieve({\n                            id: scaledId\n                        }).uuid;\n                        uploadData.setParentId(scaledId, originalId);\n                        paramsStore.addReadOnly(scaledId, params);\n                    });\n                    if (scaledIds.length) {\n                        (function() {\n                            var param = {};\n                            param[uuidParamName] = uploadData.retrieve({\n                                id: originalId\n                            }).uuid;\n                            paramsStore.addReadOnly(originalId, param);\n                        })();\n                    }\n                }\n            }\n        });\n    };\n    qq.extend(qq.Scaler.prototype, {\n        scaleImage: function(id, specs, api) {\n            \"use strict\";\n            if (!qq.supportedFeatures.scaling) {\n                throw new qq.Error(\"Scaling is not supported in this browser!\");\n            }\n            var scalingEffort = new qq.Promise(), log = api.log, file = api.getFile(id), uploadData = api.uploadData.retrieve({\n                id: id\n            }), name = uploadData && uploadData.name, uuid = uploadData && uploadData.uuid, scalingOptions = {\n                customResizer: specs.customResizer,\n                sendOriginal: false,\n                orient: specs.orient,\n                defaultType: specs.type || null,\n                defaultQuality: specs.quality,\n                failedToScaleText: \"Unable to scale\",\n                sizes: [ {\n                    name: \"\",\n                    maxSize: specs.maxSize\n                } ]\n            }, scaler = new qq.Scaler(scalingOptions, log);\n            if (!qq.Scaler || !qq.supportedFeatures.imagePreviews || !file) {\n                scalingEffort.failure();\n                log(\"Could not generate requested scaled image for \" + id + \".  \" + \"Scaling is either not possible in this browser, or the file could not be located.\", \"error\");\n            } else {\n                qq.bind(function() {\n                    var record = scaler.getFileRecords(uuid, name, file)[0];\n                    if (record && record.blob instanceof qq.BlobProxy) {\n                        record.blob.create().then(scalingEffort.success, scalingEffort.failure);\n                    } else {\n                        log(id + \" is not a scalable image!\", \"error\");\n                        scalingEffort.failure();\n                    }\n                }, this)();\n            }\n            return scalingEffort;\n        },\n        _determineOutputType: function(spec) {\n            \"use strict\";\n            var requestedType = spec.requestedType, defaultType = spec.defaultType, referenceType = spec.refType;\n            if (!defaultType && !requestedType) {\n                if (referenceType !== \"image/jpeg\") {\n                    return \"image/png\";\n                }\n                return referenceType;\n            }\n            if (!requestedType) {\n                return defaultType;\n            }\n            if (qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES), requestedType) >= 0) {\n                if (requestedType === \"image/tiff\") {\n                    return qq.supportedFeatures.tiffPreviews ? requestedType : defaultType;\n                }\n                return requestedType;\n            }\n            return defaultType;\n        },\n        _getName: function(originalName, scaledVersionProperties) {\n            \"use strict\";\n            var startOfExt = originalName.lastIndexOf(\".\"), versionType = scaledVersionProperties.type || \"image/png\", referenceType = scaledVersionProperties.refType, scaledName = \"\", scaledExt = qq.getExtension(originalName), nameAppendage = \"\";\n            if (scaledVersionProperties.name && scaledVersionProperties.name.trim().length) {\n                nameAppendage = \" (\" + scaledVersionProperties.name + \")\";\n            }\n            if (startOfExt >= 0) {\n                scaledName = originalName.substr(0, startOfExt);\n                if (referenceType !== versionType) {\n                    scaledExt = versionType.split(\"/\")[1];\n                }\n                scaledName += nameAppendage + \".\" + scaledExt;\n            } else {\n                scaledName = originalName + nameAppendage;\n            }\n            return scaledName;\n        },\n        _getSortedSizes: function(sizes) {\n            \"use strict\";\n            sizes = qq.extend([], sizes);\n            return sizes.sort(function(a, b) {\n                if (a.maxSize > b.maxSize) {\n                    return 1;\n                }\n                if (a.maxSize < b.maxSize) {\n                    return -1;\n                }\n                return 0;\n            });\n        },\n        _generateScaledImage: function(spec, sourceFile) {\n            \"use strict\";\n            var self = this, customResizeFunction = spec.customResizeFunction, log = spec.log, maxSize = spec.maxSize, orient = spec.orient, type = spec.type, quality = spec.quality, failedText = spec.failedText, includeExif = spec.includeExif && sourceFile.type === \"image/jpeg\" && type === \"image/jpeg\", scalingEffort = new qq.Promise(), imageGenerator = new qq.ImageGenerator(log), canvas = document.createElement(\"canvas\");\n            log(\"Attempting to generate scaled version for \" + sourceFile.name);\n            imageGenerator.generate(sourceFile, canvas, {\n                maxSize: maxSize,\n                orient: orient,\n                customResizeFunction: customResizeFunction\n            }).then(function() {\n                var scaledImageDataUri = canvas.toDataURL(type, quality), signalSuccess = function() {\n                    log(\"Success generating scaled version for \" + sourceFile.name);\n                    var blob = qq.dataUriToBlob(scaledImageDataUri);\n                    scalingEffort.success(blob);\n                };\n                if (includeExif) {\n                    self._insertExifHeader(sourceFile, scaledImageDataUri, log).then(function(scaledImageDataUriWithExif) {\n                        scaledImageDataUri = scaledImageDataUriWithExif;\n                        signalSuccess();\n                    }, function() {\n                        log(\"Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.\", \"error\");\n                        signalSuccess();\n                    });\n                } else {\n                    signalSuccess();\n                }\n            }, function() {\n                log(\"Failed attempt to generate scaled version for \" + sourceFile.name, \"error\");\n                scalingEffort.failure(failedText);\n            });\n            return scalingEffort;\n        },\n        _insertExifHeader: function(originalImage, scaledImageDataUri, log) {\n            \"use strict\";\n            var reader = new FileReader(), insertionEffort = new qq.Promise(), originalImageDataUri = \"\";\n            reader.onload = function() {\n                originalImageDataUri = reader.result;\n                insertionEffort.success(qq.ExifRestorer.restore(originalImageDataUri, scaledImageDataUri));\n            };\n            reader.onerror = function() {\n                log(\"Problem reading \" + originalImage.name + \" during attempt to transfer EXIF data to scaled version.\", \"error\");\n                insertionEffort.failure();\n            };\n            reader.readAsDataURL(originalImage);\n            return insertionEffort;\n        },\n        _dataUriToBlob: function(dataUri) {\n            \"use strict\";\n            var byteString, mimeString, arrayBuffer, intArray;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return this._createBlob(arrayBuffer, mimeString);\n        },\n        _createBlob: function(data, mime) {\n            \"use strict\";\n            var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n            if (blobBuilder) {\n                blobBuilder.append(data);\n                return blobBuilder.getBlob(mime);\n            } else {\n                return new Blob([ data ], {\n                    type: mime\n                });\n            }\n        }\n    });\n    qq.ExifRestorer = function() {\n        var ExifRestorer = {};\n        ExifRestorer.KEY_STR = \"ABCDEFGHIJKLMNOP\" + \"QRSTUVWXYZabcdef\" + \"ghijklmnopqrstuv\" + \"wxyz0123456789+/\" + \"=\";\n        ExifRestorer.encode64 = function(input) {\n            var output = \"\", chr1, chr2, chr3 = \"\", enc1, enc2, enc3, enc4 = \"\", i = 0;\n            do {\n                chr1 = input[i++];\n                chr2 = input[i++];\n                chr3 = input[i++];\n                enc1 = chr1 >> 2;\n                enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n                enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n                enc4 = chr3 & 63;\n                if (isNaN(chr2)) {\n                    enc3 = enc4 = 64;\n                } else if (isNaN(chr3)) {\n                    enc4 = 64;\n                }\n                output = output + this.KEY_STR.charAt(enc1) + this.KEY_STR.charAt(enc2) + this.KEY_STR.charAt(enc3) + this.KEY_STR.charAt(enc4);\n                chr1 = chr2 = chr3 = \"\";\n                enc1 = enc2 = enc3 = enc4 = \"\";\n            } while (i < input.length);\n            return output;\n        };\n        ExifRestorer.restore = function(origFileBase64, resizedFileBase64) {\n            var expectedBase64Header = \"data:image/jpeg;base64,\";\n            if (!origFileBase64.match(expectedBase64Header)) {\n                return resizedFileBase64;\n            }\n            var rawImage = this.decode64(origFileBase64.replace(expectedBase64Header, \"\"));\n            var segments = this.slice2Segments(rawImage);\n            var image = this.exifManipulation(resizedFileBase64, segments);\n            return expectedBase64Header + this.encode64(image);\n        };\n        ExifRestorer.exifManipulation = function(resizedFileBase64, segments) {\n            var exifArray = this.getExifArray(segments), newImageArray = this.insertExif(resizedFileBase64, exifArray), aBuffer = new Uint8Array(newImageArray);\n            return aBuffer;\n        };\n        ExifRestorer.getExifArray = function(segments) {\n            var seg;\n            for (var x = 0; x < segments.length; x++) {\n                seg = segments[x];\n                if (seg[0] == 255 & seg[1] == 225) {\n                    return seg;\n                }\n            }\n            return [];\n        };\n        ExifRestorer.insertExif = function(resizedFileBase64, exifArray) {\n            var imageData = resizedFileBase64.replace(\"data:image/jpeg;base64,\", \"\"), buf = this.decode64(imageData), separatePoint = buf.indexOf(255, 3), mae = buf.slice(0, separatePoint), ato = buf.slice(separatePoint), array = mae;\n            array = array.concat(exifArray);\n            array = array.concat(ato);\n            return array;\n        };\n        ExifRestorer.slice2Segments = function(rawImageArray) {\n            var head = 0, segments = [];\n            while (1) {\n                if (rawImageArray[head] == 255 & rawImageArray[head + 1] == 218) {\n                    break;\n                }\n                if (rawImageArray[head] == 255 & rawImageArray[head + 1] == 216) {\n                    head += 2;\n                } else {\n                    var length = rawImageArray[head + 2] * 256 + rawImageArray[head + 3], endPoint = head + length + 2, seg = rawImageArray.slice(head, endPoint);\n                    segments.push(seg);\n                    head = endPoint;\n                }\n                if (head > rawImageArray.length) {\n                    break;\n                }\n            }\n            return segments;\n        };\n        ExifRestorer.decode64 = function(input) {\n            var output = \"\", chr1, chr2, chr3 = \"\", enc1, enc2, enc3, enc4 = \"\", i = 0, buf = [];\n            var base64test = /[^A-Za-z0-9\\+\\/\\=]/g;\n            if (base64test.exec(input)) {\n                throw new Error(\"There were invalid base64 characters in the input text.  \" + \"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\");\n            }\n            input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n            do {\n                enc1 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc2 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc3 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc4 = this.KEY_STR.indexOf(input.charAt(i++));\n                chr1 = enc1 << 2 | enc2 >> 4;\n                chr2 = (enc2 & 15) << 4 | enc3 >> 2;\n                chr3 = (enc3 & 3) << 6 | enc4;\n                buf.push(chr1);\n                if (enc3 != 64) {\n                    buf.push(chr2);\n                }\n                if (enc4 != 64) {\n                    buf.push(chr3);\n                }\n                chr1 = chr2 = chr3 = \"\";\n                enc1 = enc2 = enc3 = enc4 = \"\";\n            } while (i < input.length);\n            return buf;\n        };\n        return ExifRestorer;\n    }();\n    qq.TotalProgress = function(callback, getSize) {\n        \"use strict\";\n        var perFileProgress = {}, totalLoaded = 0, totalSize = 0, lastLoadedSent = -1, lastTotalSent = -1, callbackProxy = function(loaded, total) {\n            if (loaded !== lastLoadedSent || total !== lastTotalSent) {\n                callback(loaded, total);\n            }\n            lastLoadedSent = loaded;\n            lastTotalSent = total;\n        }, noRetryableFiles = function(failed, retryable) {\n            var none = true;\n            qq.each(failed, function(idx, failedId) {\n                if (qq.indexOf(retryable, failedId) >= 0) {\n                    none = false;\n                    return false;\n                }\n            });\n            return none;\n        }, onCancel = function(id) {\n            updateTotalProgress(id, -1, -1);\n            delete perFileProgress[id];\n        }, onAllComplete = function(successful, failed, retryable) {\n            if (failed.length === 0 || noRetryableFiles(failed, retryable)) {\n                callbackProxy(totalSize, totalSize);\n                this.reset();\n            }\n        }, onNew = function(id) {\n            var size = getSize(id);\n            if (size > 0) {\n                updateTotalProgress(id, 0, size);\n                perFileProgress[id] = {\n                    loaded: 0,\n                    total: size\n                };\n            }\n        }, updateTotalProgress = function(id, newLoaded, newTotal) {\n            var oldLoaded = perFileProgress[id] ? perFileProgress[id].loaded : 0, oldTotal = perFileProgress[id] ? perFileProgress[id].total : 0;\n            if (newLoaded === -1 && newTotal === -1) {\n                totalLoaded -= oldLoaded;\n                totalSize -= oldTotal;\n            } else {\n                if (newLoaded) {\n                    totalLoaded += newLoaded - oldLoaded;\n                }\n                if (newTotal) {\n                    totalSize += newTotal - oldTotal;\n                }\n            }\n            callbackProxy(totalLoaded, totalSize);\n        };\n        qq.extend(this, {\n            onAllComplete: onAllComplete,\n            onStatusChange: function(id, oldStatus, newStatus) {\n                if (newStatus === qq.status.CANCELED || newStatus === qq.status.REJECTED) {\n                    onCancel(id);\n                } else if (newStatus === qq.status.SUBMITTING) {\n                    onNew(id);\n                }\n            },\n            onIndividualProgress: function(id, loaded, total) {\n                updateTotalProgress(id, loaded, total);\n                perFileProgress[id] = {\n                    loaded: loaded,\n                    total: total\n                };\n            },\n            onNewSize: function(id) {\n                onNew(id);\n            },\n            reset: function() {\n                perFileProgress = {};\n                totalLoaded = 0;\n                totalSize = 0;\n            }\n        });\n    };\n    qq.PasteSupport = function(o) {\n        \"use strict\";\n        var options, detachPasteHandler;\n        options = {\n            targetElement: null,\n            callbacks: {\n                log: function(message, level) {},\n                pasteReceived: function(blob) {}\n            }\n        };\n        function isImage(item) {\n            return item.type && item.type.indexOf(\"image/\") === 0;\n        }\n        function registerPasteHandler() {\n            detachPasteHandler = qq(options.targetElement).attach(\"paste\", function(event) {\n                var clipboardData = event.clipboardData;\n                if (clipboardData) {\n                    qq.each(clipboardData.items, function(idx, item) {\n                        if (isImage(item)) {\n                            var blob = item.getAsFile();\n                            options.callbacks.pasteReceived(blob);\n                        }\n                    });\n                }\n            });\n        }\n        function unregisterPasteHandler() {\n            if (detachPasteHandler) {\n                detachPasteHandler();\n            }\n        }\n        qq.extend(options, o);\n        registerPasteHandler();\n        qq.extend(this, {\n            reset: function() {\n                unregisterPasteHandler();\n            }\n        });\n    };\n    qq.FormSupport = function(options, startUpload, log) {\n        \"use strict\";\n        var self = this, interceptSubmit = options.interceptSubmit, formEl = options.element, autoUpload = options.autoUpload;\n        qq.extend(this, {\n            newEndpoint: null,\n            newAutoUpload: autoUpload,\n            attachedToForm: false,\n            getFormInputsAsObject: function() {\n                if (formEl == null) {\n                    return null;\n                }\n                return self._form2Obj(formEl);\n            }\n        });\n        function determineNewEndpoint(formEl) {\n            if (formEl.getAttribute(\"action\")) {\n                self.newEndpoint = formEl.getAttribute(\"action\");\n            }\n        }\n        function validateForm(formEl, nativeSubmit) {\n            if (formEl.checkValidity && !formEl.checkValidity()) {\n                log(\"Form did not pass validation checks - will not upload.\", \"error\");\n                nativeSubmit();\n            } else {\n                return true;\n            }\n        }\n        function maybeUploadOnSubmit(formEl) {\n            var nativeSubmit = formEl.submit;\n            qq(formEl).attach(\"submit\", function(event) {\n                event = event || window.event;\n                if (event.preventDefault) {\n                    event.preventDefault();\n                } else {\n                    event.returnValue = false;\n                }\n                validateForm(formEl, nativeSubmit) && startUpload();\n            });\n            formEl.submit = function() {\n                validateForm(formEl, nativeSubmit) && startUpload();\n            };\n        }\n        function determineFormEl(formEl) {\n            if (formEl) {\n                if (qq.isString(formEl)) {\n                    formEl = document.getElementById(formEl);\n                }\n                if (formEl) {\n                    log(\"Attaching to form element.\");\n                    determineNewEndpoint(formEl);\n                    interceptSubmit && maybeUploadOnSubmit(formEl);\n                }\n            }\n            return formEl;\n        }\n        formEl = determineFormEl(formEl);\n        this.attachedToForm = !!formEl;\n    };\n    qq.extend(qq.FormSupport.prototype, {\n        _form2Obj: function(form) {\n            \"use strict\";\n            var obj = {}, notIrrelevantType = function(type) {\n                var irrelevantTypes = [ \"button\", \"image\", \"reset\", \"submit\" ];\n                return qq.indexOf(irrelevantTypes, type.toLowerCase()) < 0;\n            }, radioOrCheckbox = function(type) {\n                return qq.indexOf([ \"checkbox\", \"radio\" ], type.toLowerCase()) >= 0;\n            }, ignoreValue = function(el) {\n                if (radioOrCheckbox(el.type) && !el.checked) {\n                    return true;\n                }\n                return el.disabled && el.type.toLowerCase() !== \"hidden\";\n            }, selectValue = function(select) {\n                var value = null;\n                qq.each(qq(select).children(), function(idx, child) {\n                    if (child.tagName.toLowerCase() === \"option\" && child.selected) {\n                        value = child.value;\n                        return false;\n                    }\n                });\n                return value;\n            };\n            qq.each(form.elements, function(idx, el) {\n                if ((qq.isInput(el, true) || el.tagName.toLowerCase() === \"textarea\") && notIrrelevantType(el.type) && !ignoreValue(el)) {\n                    obj[el.name] = el.value;\n                } else if (el.tagName.toLowerCase() === \"select\" && !ignoreValue(el)) {\n                    var value = selectValue(el);\n                    if (value !== null) {\n                        obj[el.name] = value;\n                    }\n                }\n            });\n            return obj;\n        }\n    });\n    qq.traditional = qq.traditional || {};\n    qq.traditional.FormUploadHandler = function(options, proxy) {\n        \"use strict\";\n        var handler = this, getName = proxy.getName, getUuid = proxy.getUuid, log = proxy.log;\n        function getIframeContentJson(id, iframe) {\n            var response, doc, innerHtml;\n            try {\n                doc = iframe.contentDocument || iframe.contentWindow.document;\n                innerHtml = doc.body.innerHTML;\n                log(\"converting iframe's innerHTML to JSON\");\n                log(\"innerHTML = \" + innerHtml);\n                if (innerHtml && innerHtml.match(/^<pre/i)) {\n                    innerHtml = doc.body.firstChild.firstChild.nodeValue;\n                }\n                response = handler._parseJsonResponse(innerHtml);\n            } catch (error) {\n                log(\"Error when attempting to parse form upload response (\" + error.message + \")\", \"error\");\n                response = {\n                    success: false\n                };\n            }\n            return response;\n        }\n        function createForm(id, iframe) {\n            var params = options.paramsStore.get(id), method = options.method.toLowerCase() === \"get\" ? \"GET\" : \"POST\", endpoint = options.endpointStore.get(id), name = getName(id);\n            params[options.uuidName] = getUuid(id);\n            params[options.filenameParam] = name;\n            return handler._initFormForUpload({\n                method: method,\n                endpoint: endpoint,\n                params: params,\n                paramsInBody: options.paramsInBody,\n                targetName: iframe.name\n            });\n        }\n        this.uploadFile = function(id) {\n            var input = handler.getInput(id), iframe = handler._createIframe(id), promise = new qq.Promise(), form;\n            form = createForm(id, iframe);\n            form.appendChild(input);\n            handler._attachLoadEvent(iframe, function(responseFromMessage) {\n                log(\"iframe loaded\");\n                var response = responseFromMessage ? responseFromMessage : getIframeContentJson(id, iframe);\n                handler._detachLoadEvent(id);\n                if (!options.cors.expected) {\n                    qq(iframe).remove();\n                }\n                if (response.success) {\n                    promise.success(response);\n                } else {\n                    promise.failure(response);\n                }\n            });\n            log(\"Sending upload request for \" + id);\n            form.submit();\n            qq(form).remove();\n            return promise;\n        };\n        qq.extend(this, new qq.FormUploadHandler({\n            options: {\n                isCors: options.cors.expected,\n                inputName: options.inputName\n            },\n            proxy: {\n                onCancel: options.onCancel,\n                getName: getName,\n                getUuid: getUuid,\n                log: log\n            }\n        }));\n    };\n    qq.traditional = qq.traditional || {};\n    qq.traditional.XhrUploadHandler = function(spec, proxy) {\n        \"use strict\";\n        var handler = this, getName = proxy.getName, getSize = proxy.getSize, getUuid = proxy.getUuid, log = proxy.log, multipart = spec.forceMultipart || spec.paramsInBody, addChunkingSpecificParams = function(id, params, chunkData) {\n            var size = getSize(id), name = getName(id);\n            if (!spec.omitDefaultParams) {\n                params[spec.chunking.paramNames.partIndex] = chunkData.part;\n                params[spec.chunking.paramNames.partByteOffset] = chunkData.start;\n                params[spec.chunking.paramNames.chunkSize] = chunkData.size;\n                params[spec.chunking.paramNames.totalParts] = chunkData.count;\n                params[spec.totalFileSizeName] = size;\n            }\n            if (multipart && !spec.omitDefaultParams) {\n                params[spec.filenameParam] = name;\n            }\n        }, allChunksDoneRequester = new qq.traditional.AllChunksDoneAjaxRequester({\n            cors: spec.cors,\n            endpoint: spec.chunking.success.endpoint,\n            headers: spec.chunking.success.headers,\n            jsonPayload: spec.chunking.success.jsonPayload,\n            log: log,\n            method: spec.chunking.success.method,\n            params: spec.chunking.success.params\n        }), createReadyStateChangedHandler = function(id, xhr) {\n            var promise = new qq.Promise();\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState === 4) {\n                    var result = onUploadOrChunkComplete(id, xhr);\n                    if (result.success) {\n                        promise.success(result.response, xhr);\n                    } else {\n                        promise.failure(result.response, xhr);\n                    }\n                }\n            };\n            return promise;\n        }, getChunksCompleteParams = function(id) {\n            var params = spec.paramsStore.get(id), name = getName(id), size = getSize(id);\n            params[spec.uuidName] = getUuid(id);\n            params[spec.filenameParam] = name;\n            params[spec.totalFileSizeName] = size;\n            params[spec.chunking.paramNames.totalParts] = handler._getTotalChunks(id);\n            return params;\n        }, isErrorUploadResponse = function(xhr, response) {\n            return qq.indexOf([ 200, 201, 202, 203, 204 ], xhr.status) < 0 || spec.requireSuccessJson && !response.success || response.reset;\n        }, onUploadOrChunkComplete = function(id, xhr) {\n            var response;\n            log(\"xhr - server response received for \" + id);\n            log(\"responseText = \" + xhr.responseText);\n            response = parseResponse(true, xhr);\n            return {\n                success: !isErrorUploadResponse(xhr, response),\n                response: response\n            };\n        }, parseResponse = function(upload, xhr) {\n            var response = {};\n            try {\n                log(qq.format(\"Received response status {} with body: {}\", xhr.status, xhr.responseText));\n                response = qq.parseJson(xhr.responseText);\n            } catch (error) {\n                upload && spec.requireSuccessJson && log(\"Error when attempting to parse xhr response text (\" + error.message + \")\", \"error\");\n            }\n            return response;\n        }, sendChunksCompleteRequest = function(id) {\n            var promise = new qq.Promise();\n            allChunksDoneRequester.complete(id, handler._createXhr(id), getChunksCompleteParams(id), spec.customHeaders.get(id)).then(function(xhr) {\n                promise.success(parseResponse(false, xhr), xhr);\n            }, function(xhr) {\n                promise.failure(parseResponse(false, xhr), xhr);\n            });\n            return promise;\n        }, setParamsAndGetEntityToSend = function(entityToSendParams) {\n            var fileOrBlob = entityToSendParams.fileOrBlob;\n            var id = entityToSendParams.id;\n            var xhr = entityToSendParams.xhr;\n            var xhrOverrides = entityToSendParams.xhrOverrides || {};\n            var customParams = entityToSendParams.customParams || {};\n            var defaultParams = entityToSendParams.params || {};\n            var xhrOverrideParams = xhrOverrides.params || {};\n            var params;\n            var formData = multipart ? new FormData() : null, method = xhrOverrides.method || spec.method, endpoint = xhrOverrides.endpoint || spec.endpointStore.get(id), name = getName(id), size = getSize(id);\n            if (spec.omitDefaultParams) {\n                params = qq.extend({}, customParams);\n                qq.extend(params, xhrOverrideParams);\n            } else {\n                params = qq.extend({}, customParams);\n                qq.extend(params, xhrOverrideParams);\n                qq.extend(params, defaultParams);\n                params[spec.uuidName] = getUuid(id);\n                params[spec.filenameParam] = name;\n                if (multipart) {\n                    params[spec.totalFileSizeName] = size;\n                } else if (!spec.paramsInBody) {\n                    params[spec.inputName] = name;\n                }\n            }\n            if (!spec.paramsInBody) {\n                endpoint = qq.obj2url(params, endpoint);\n            }\n            xhr.open(method, endpoint, true);\n            if (spec.cors.expected && spec.cors.sendCredentials) {\n                xhr.withCredentials = true;\n            }\n            if (multipart) {\n                if (spec.paramsInBody) {\n                    qq.obj2FormData(params, formData);\n                }\n                formData.append(spec.inputName, fileOrBlob);\n                return formData;\n            }\n            return fileOrBlob;\n        }, setUploadHeaders = function(headersOptions) {\n            var headerOverrides = headersOptions.headerOverrides;\n            var id = headersOptions.id;\n            var xhr = headersOptions.xhr;\n            if (headerOverrides) {\n                qq.each(headerOverrides, function(headerName, headerValue) {\n                    xhr.setRequestHeader(headerName, headerValue);\n                });\n            } else {\n                var extraHeaders = spec.customHeaders.get(id), fileOrBlob = handler.getFile(id);\n                xhr.setRequestHeader(\"Accept\", \"application/json\");\n                xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n                xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n                if (!multipart) {\n                    xhr.setRequestHeader(\"Content-Type\", \"application/octet-stream\");\n                    xhr.setRequestHeader(\"X-Mime-Type\", fileOrBlob.type);\n                }\n                qq.each(extraHeaders, function(name, val) {\n                    xhr.setRequestHeader(name, val);\n                });\n            }\n        };\n        qq.extend(this, {\n            uploadChunk: function(uploadChunkParams) {\n                var id = uploadChunkParams.id;\n                var chunkIdx = uploadChunkParams.chunkIdx;\n                var overrides = uploadChunkParams.overrides || {};\n                var resuming = uploadChunkParams.resuming;\n                var chunkData = handler._getChunkData(id, chunkIdx), xhr = handler._createXhr(id, chunkIdx), promise, toSend, customParams, params = {};\n                promise = createReadyStateChangedHandler(id, xhr);\n                handler._registerProgressHandler(id, chunkIdx, chunkData.size);\n                customParams = spec.paramsStore.get(id);\n                addChunkingSpecificParams(id, params, chunkData);\n                if (resuming) {\n                    params[spec.resume.paramNames.resuming] = true;\n                }\n                toSend = setParamsAndGetEntityToSend({\n                    fileOrBlob: chunkData.blob,\n                    id: id,\n                    customParams: customParams,\n                    params: params,\n                    xhr: xhr,\n                    xhrOverrides: overrides\n                });\n                setUploadHeaders({\n                    headerOverrides: overrides.headers,\n                    id: id,\n                    xhr: xhr\n                });\n                xhr.send(toSend);\n                return promise;\n            },\n            uploadFile: function(id) {\n                var fileOrBlob = handler.getFile(id), promise, xhr, customParams, toSend;\n                xhr = handler._createXhr(id);\n                handler._registerProgressHandler(id);\n                promise = createReadyStateChangedHandler(id, xhr);\n                customParams = spec.paramsStore.get(id);\n                toSend = setParamsAndGetEntityToSend({\n                    fileOrBlob: fileOrBlob,\n                    id: id,\n                    customParams: customParams,\n                    xhr: xhr\n                });\n                setUploadHeaders({\n                    id: id,\n                    xhr: xhr\n                });\n                xhr.send(toSend);\n                return promise;\n            }\n        });\n        qq.extend(this, new qq.XhrUploadHandler({\n            options: qq.extend({\n                namespace: \"traditional\"\n            }, spec),\n            proxy: qq.extend({\n                getEndpoint: spec.endpointStore.get\n            }, proxy)\n        }));\n        qq.override(this, function(super_) {\n            return {\n                finalizeChunks: function(id) {\n                    proxy.onFinalizing(id);\n                    if (spec.chunking.success.endpoint) {\n                        return sendChunksCompleteRequest(id);\n                    } else {\n                        return super_.finalizeChunks(id, qq.bind(parseResponse, this, true));\n                    }\n                }\n            };\n        });\n    };\n    qq.traditional.AllChunksDoneAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, options = {\n            cors: {\n                allowXdr: false,\n                expected: false,\n                sendCredentials: false\n            },\n            endpoint: null,\n            log: function(str, level) {},\n            method: \"POST\"\n        }, promises = {}, endpointHandler = {\n            get: function(id) {\n                if (qq.isFunction(options.endpoint)) {\n                    return options.endpoint(id);\n                }\n                return options.endpoint;\n            }\n        };\n        qq.extend(options, o);\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            contentType: options.jsonPayload ? \"application/json\" : \"application/x-www-form-urlencoded\",\n            validMethods: [ options.method ],\n            method: options.method,\n            endpointStore: endpointHandler,\n            allowXRequestedWithAndCacheControl: false,\n            cors: options.cors,\n            log: options.log,\n            onComplete: function(id, xhr, isError) {\n                var promise = promises[id];\n                delete promises[id];\n                if (isError) {\n                    promise.failure(xhr);\n                } else {\n                    promise.success(xhr);\n                }\n            }\n        }));\n        qq.extend(this, {\n            complete: function(id, xhr, params, headers) {\n                var promise = new qq.Promise();\n                options.log(\"Submitting All Chunks Done request for \" + id);\n                promises[id] = promise;\n                requester.initTransport(id).withParams(options.params(id) || params).withHeaders(options.headers(id) || headers).send(xhr);\n                return promise;\n            }\n        });\n    };\n    qq.DragAndDrop = function(o) {\n        \"use strict\";\n        var options, HIDE_ZONES_EVENT_NAME = \"qq-hidezones\", HIDE_BEFORE_ENTER_ATTR = \"qq-hide-dropzone\", uploadDropZones = [], droppedFiles = [], disposeSupport = new qq.DisposeSupport();\n        options = {\n            dropZoneElements: [],\n            allowMultipleItems: true,\n            classes: {\n                dropActive: null\n            },\n            callbacks: new qq.DragAndDrop.callbacks()\n        };\n        qq.extend(options, o, true);\n        function uploadDroppedFiles(files, uploadDropZone) {\n            var filesAsArray = Array.prototype.slice.call(files);\n            options.callbacks.dropLog(\"Grabbed \" + files.length + \" dropped files.\");\n            uploadDropZone.dropDisabled(false);\n            options.callbacks.processingDroppedFilesComplete(filesAsArray, uploadDropZone.getElement());\n        }\n        function traverseFileTree(entry) {\n            var parseEntryPromise = new qq.Promise();\n            if (entry.isFile) {\n                entry.file(function(file) {\n                    file.qqPath = extractDirectoryPath(entry);\n                    droppedFiles.push(file);\n                    parseEntryPromise.success();\n                }, function(fileError) {\n                    options.callbacks.dropLog(\"Problem parsing '\" + entry.fullPath + \"'.  FileError code \" + fileError.code + \".\", \"error\");\n                    parseEntryPromise.failure();\n                });\n            } else if (entry.isDirectory) {\n                getFilesInDirectory(entry).then(function allEntriesRead(entries) {\n                    var entriesLeft = entries.length;\n                    qq.each(entries, function(idx, entry) {\n                        traverseFileTree(entry).done(function() {\n                            entriesLeft -= 1;\n                            if (entriesLeft === 0) {\n                                parseEntryPromise.success();\n                            }\n                        });\n                    });\n                    if (!entries.length) {\n                        parseEntryPromise.success();\n                    }\n                }, function readFailure(fileError) {\n                    options.callbacks.dropLog(\"Problem parsing '\" + entry.fullPath + \"'.  FileError code \" + fileError.code + \".\", \"error\");\n                    parseEntryPromise.failure();\n                });\n            }\n            return parseEntryPromise;\n        }\n        function extractDirectoryPath(entry) {\n            var name = entry.name, fullPath = entry.fullPath, indexOfNameInFullPath = fullPath.lastIndexOf(name);\n            fullPath = fullPath.substr(0, indexOfNameInFullPath);\n            if (fullPath.charAt(0) === \"/\") {\n                fullPath = fullPath.substr(1);\n            }\n            return fullPath;\n        }\n        function getFilesInDirectory(entry, reader, accumEntries, existingPromise) {\n            var promise = existingPromise || new qq.Promise(), dirReader = reader || entry.createReader();\n            dirReader.readEntries(function readSuccess(entries) {\n                var newEntries = accumEntries ? accumEntries.concat(entries) : entries;\n                if (entries.length) {\n                    setTimeout(function() {\n                        getFilesInDirectory(entry, dirReader, newEntries, promise);\n                    }, 0);\n                } else {\n                    promise.success(newEntries);\n                }\n            }, promise.failure);\n            return promise;\n        }\n        function handleDataTransfer(dataTransfer, uploadDropZone) {\n            var pendingFolderPromises = [], handleDataTransferPromise = new qq.Promise();\n            options.callbacks.processingDroppedFiles();\n            uploadDropZone.dropDisabled(true);\n            if (dataTransfer.files.length > 1 && !options.allowMultipleItems) {\n                options.callbacks.processingDroppedFilesComplete([]);\n                options.callbacks.dropError(\"tooManyFilesError\", \"\");\n                uploadDropZone.dropDisabled(false);\n                handleDataTransferPromise.failure();\n            } else {\n                droppedFiles = [];\n                if (qq.isFolderDropSupported(dataTransfer)) {\n                    qq.each(dataTransfer.items, function(idx, item) {\n                        var entry = item.webkitGetAsEntry();\n                        if (entry) {\n                            if (entry.isFile) {\n                                droppedFiles.push(item.getAsFile());\n                            } else {\n                                pendingFolderPromises.push(traverseFileTree(entry).done(function() {\n                                    pendingFolderPromises.pop();\n                                    if (pendingFolderPromises.length === 0) {\n                                        handleDataTransferPromise.success();\n                                    }\n                                }));\n                            }\n                        }\n                    });\n                } else {\n                    droppedFiles = dataTransfer.files;\n                }\n                if (pendingFolderPromises.length === 0) {\n                    handleDataTransferPromise.success();\n                }\n            }\n            return handleDataTransferPromise;\n        }\n        function setupDropzone(dropArea) {\n            var dropZone = new qq.UploadDropZone({\n                HIDE_ZONES_EVENT_NAME: HIDE_ZONES_EVENT_NAME,\n                element: dropArea,\n                onEnter: function(e) {\n                    qq(dropArea).addClass(options.classes.dropActive);\n                    e.stopPropagation();\n                },\n                onLeaveNotDescendants: function(e) {\n                    qq(dropArea).removeClass(options.classes.dropActive);\n                },\n                onDrop: function(e) {\n                    handleDataTransfer(e.dataTransfer, dropZone).then(function() {\n                        uploadDroppedFiles(droppedFiles, dropZone);\n                    }, function() {\n                        options.callbacks.dropLog(\"Drop event DataTransfer parsing failed.  No files will be uploaded.\", \"error\");\n                    });\n                }\n            });\n            disposeSupport.addDisposer(function() {\n                dropZone.dispose();\n            });\n            qq(dropArea).hasAttribute(HIDE_BEFORE_ENTER_ATTR) && qq(dropArea).hide();\n            uploadDropZones.push(dropZone);\n            return dropZone;\n        }\n        function isFileDrag(dragEvent) {\n            var fileDrag;\n            qq.each(dragEvent.dataTransfer.types, function(key, val) {\n                if (val === \"Files\") {\n                    fileDrag = true;\n                    return false;\n                }\n            });\n            return fileDrag;\n        }\n        function leavingDocumentOut(e) {\n            if (qq.safari()) {\n                return e.x < 0 || e.y < 0;\n            }\n            return e.x === 0 && e.y === 0;\n        }\n        function setupDragDrop() {\n            var dropZones = options.dropZoneElements, maybeHideDropZones = function() {\n                setTimeout(function() {\n                    qq.each(dropZones, function(idx, dropZone) {\n                        qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR) && qq(dropZone).hide();\n                        qq(dropZone).removeClass(options.classes.dropActive);\n                    });\n                }, 10);\n            };\n            qq.each(dropZones, function(idx, dropZone) {\n                var uploadDropZone = setupDropzone(dropZone);\n                if (dropZones.length && qq.supportedFeatures.fileDrop) {\n                    disposeSupport.attach(document, \"dragenter\", function(e) {\n                        if (!uploadDropZone.dropDisabled() && isFileDrag(e)) {\n                            qq.each(dropZones, function(idx, dropZone) {\n                                if (dropZone instanceof HTMLElement && qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR)) {\n                                    qq(dropZone).css({\n                                        display: \"block\"\n                                    });\n                                }\n                            });\n                        }\n                    });\n                }\n            });\n            disposeSupport.attach(document, \"dragleave\", function(e) {\n                if (leavingDocumentOut(e)) {\n                    maybeHideDropZones();\n                }\n            });\n            disposeSupport.attach(qq(document).children()[0], \"mouseenter\", function(e) {\n                maybeHideDropZones();\n            });\n            disposeSupport.attach(document, \"drop\", function(e) {\n                if (isFileDrag(e)) {\n                    e.preventDefault();\n                    maybeHideDropZones();\n                }\n            });\n            disposeSupport.attach(document, HIDE_ZONES_EVENT_NAME, maybeHideDropZones);\n        }\n        setupDragDrop();\n        qq.extend(this, {\n            setupExtraDropzone: function(element) {\n                options.dropZoneElements.push(element);\n                setupDropzone(element);\n            },\n            removeDropzone: function(element) {\n                var i, dzs = options.dropZoneElements;\n                for (i in dzs) {\n                    if (dzs[i] === element) {\n                        return dzs.splice(i, 1);\n                    }\n                }\n            },\n            dispose: function() {\n                disposeSupport.dispose();\n                qq.each(uploadDropZones, function(idx, dropZone) {\n                    dropZone.dispose();\n                });\n            }\n        });\n        this._testing = {};\n        this._testing.extractDirectoryPath = extractDirectoryPath;\n    };\n    qq.DragAndDrop.callbacks = function() {\n        \"use strict\";\n        return {\n            processingDroppedFiles: function() {},\n            processingDroppedFilesComplete: function(files, targetEl) {},\n            dropError: function(code, errorSpecifics) {\n                qq.log(\"Drag & drop error code '\" + code + \" with these specifics: '\" + errorSpecifics + \"'\", \"error\");\n            },\n            dropLog: function(message, level) {\n                qq.log(message, level);\n            }\n        };\n    };\n    qq.UploadDropZone = function(o) {\n        \"use strict\";\n        var disposeSupport = new qq.DisposeSupport(), options, element, preventDrop, dropOutsideDisabled;\n        options = {\n            element: null,\n            onEnter: function(e) {},\n            onLeave: function(e) {},\n            onLeaveNotDescendants: function(e) {},\n            onDrop: function(e) {}\n        };\n        qq.extend(options, o);\n        element = options.element;\n        function dragoverShouldBeCanceled() {\n            return qq.safari() || qq.firefox() && qq.windows();\n        }\n        function disableDropOutside(e) {\n            if (!dropOutsideDisabled) {\n                if (dragoverShouldBeCanceled) {\n                    disposeSupport.attach(document, \"dragover\", function(e) {\n                        e.preventDefault();\n                    });\n                } else {\n                    disposeSupport.attach(document, \"dragover\", function(e) {\n                        if (e.dataTransfer) {\n                            e.dataTransfer.dropEffect = \"none\";\n                            e.preventDefault();\n                        }\n                    });\n                }\n                dropOutsideDisabled = true;\n            }\n        }\n        function isValidFileDrag(e) {\n            if (!qq.supportedFeatures.fileDrop) {\n                return false;\n            }\n            var effectTest, dt = e.dataTransfer, isSafari = qq.safari();\n            effectTest = qq.ie() && qq.supportedFeatures.fileDrop ? true : dt.effectAllowed !== \"none\";\n            return dt && effectTest && (dt.files && dt.files.length || !isSafari && dt.types.contains && dt.types.contains(\"Files\") || dt.types.includes && dt.types.includes(\"Files\"));\n        }\n        function isOrSetDropDisabled(isDisabled) {\n            if (isDisabled !== undefined) {\n                preventDrop = isDisabled;\n            }\n            return preventDrop;\n        }\n        function triggerHidezonesEvent() {\n            var hideZonesEvent;\n            function triggerUsingOldApi() {\n                hideZonesEvent = document.createEvent(\"Event\");\n                hideZonesEvent.initEvent(options.HIDE_ZONES_EVENT_NAME, true, true);\n            }\n            if (window.CustomEvent) {\n                try {\n                    hideZonesEvent = new CustomEvent(options.HIDE_ZONES_EVENT_NAME);\n                } catch (err) {\n                    triggerUsingOldApi();\n                }\n            } else {\n                triggerUsingOldApi();\n            }\n            document.dispatchEvent(hideZonesEvent);\n        }\n        function attachEvents() {\n            disposeSupport.attach(element, \"dragover\", function(e) {\n                if (!isValidFileDrag(e)) {\n                    return;\n                }\n                var effect = qq.ie() && qq.supportedFeatures.fileDrop ? null : e.dataTransfer.effectAllowed;\n                if (effect === \"move\" || effect === \"linkMove\") {\n                    e.dataTransfer.dropEffect = \"move\";\n                } else {\n                    e.dataTransfer.dropEffect = \"copy\";\n                }\n                e.stopPropagation();\n                e.preventDefault();\n            });\n            disposeSupport.attach(element, \"dragenter\", function(e) {\n                if (!isOrSetDropDisabled()) {\n                    if (!isValidFileDrag(e)) {\n                        return;\n                    }\n                    options.onEnter(e);\n                }\n            });\n            disposeSupport.attach(element, \"dragleave\", function(e) {\n                if (!isValidFileDrag(e)) {\n                    return;\n                }\n                options.onLeave(e);\n                var relatedTarget = document.elementFromPoint(e.clientX, e.clientY);\n                if (qq(this).contains(relatedTarget)) {\n                    return;\n                }\n                options.onLeaveNotDescendants(e);\n            });\n            disposeSupport.attach(element, \"drop\", function(e) {\n                if (!isOrSetDropDisabled()) {\n                    if (!isValidFileDrag(e)) {\n                        return;\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                    options.onDrop(e);\n                    triggerHidezonesEvent();\n                }\n            });\n        }\n        disableDropOutside();\n        attachEvents();\n        qq.extend(this, {\n            dropDisabled: function(isDisabled) {\n                return isOrSetDropDisabled(isDisabled);\n            },\n            dispose: function() {\n                disposeSupport.dispose();\n            },\n            getElement: function() {\n                return element;\n            }\n        });\n        this._testing = {};\n        this._testing.isValidFileDrag = isValidFileDrag;\n    };\n    (function() {\n        \"use strict\";\n        qq.uiPublicApi = {\n            addInitialFiles: function(cannedFileList) {\n                this._parent.prototype.addInitialFiles.apply(this, arguments);\n                this._templating.addCacheToDom();\n            },\n            clearStoredFiles: function() {\n                this._parent.prototype.clearStoredFiles.apply(this, arguments);\n                this._templating.clearFiles();\n            },\n            addExtraDropzone: function(element) {\n                this._dnd && this._dnd.setupExtraDropzone(element);\n            },\n            removeExtraDropzone: function(element) {\n                if (this._dnd) {\n                    return this._dnd.removeDropzone(element);\n                }\n            },\n            getItemByFileId: function(id) {\n                if (!this._templating.isHiddenForever(id)) {\n                    return this._templating.getFileContainer(id);\n                }\n            },\n            reset: function() {\n                this._parent.prototype.reset.apply(this, arguments);\n                this._templating.reset();\n                if (!this._options.button && this._templating.getButton()) {\n                    this._defaultButtonId = this._createUploadButton({\n                        element: this._templating.getButton(),\n                        title: this._options.text.fileInputTitle\n                    }).getButtonId();\n                }\n                if (this._dnd) {\n                    this._dnd.dispose();\n                    this._dnd = this._setupDragAndDrop();\n                }\n                this._totalFilesInBatch = 0;\n                this._filesInBatchAddedToUi = 0;\n                this._setupClickAndEditEventHandlers();\n            },\n            setName: function(id, newName) {\n                var formattedFilename = this._options.formatFileName(newName);\n                this._parent.prototype.setName.apply(this, arguments);\n                this._templating.updateFilename(id, formattedFilename);\n            },\n            pauseUpload: function(id) {\n                var paused = this._parent.prototype.pauseUpload.apply(this, arguments);\n                paused && this._templating.uploadPaused(id);\n                return paused;\n            },\n            continueUpload: function(id) {\n                var continued = this._parent.prototype.continueUpload.apply(this, arguments);\n                continued && this._templating.uploadContinued(id);\n                return continued;\n            },\n            getId: function(fileContainerOrChildEl) {\n                return this._templating.getFileId(fileContainerOrChildEl);\n            },\n            getDropTarget: function(fileId) {\n                var file = this.getFile(fileId);\n                return file.qqDropTarget;\n            }\n        };\n        qq.uiPrivateApi = {\n            _getButton: function(buttonId) {\n                var button = this._parent.prototype._getButton.apply(this, arguments);\n                if (!button) {\n                    if (buttonId === this._defaultButtonId) {\n                        button = this._templating.getButton();\n                    }\n                }\n                return button;\n            },\n            _removeFileItem: function(fileId) {\n                this._templating.removeFile(fileId);\n            },\n            _setupClickAndEditEventHandlers: function() {\n                this._fileButtonsClickHandler = qq.FileButtonsClickHandler && this._bindFileButtonsClickEvent();\n                this._focusinEventSupported = !qq.firefox();\n                if (this._isEditFilenameEnabled()) {\n                    this._filenameClickHandler = this._bindFilenameClickEvent();\n                    this._filenameInputFocusInHandler = this._bindFilenameInputFocusInEvent();\n                    this._filenameInputFocusHandler = this._bindFilenameInputFocusEvent();\n                }\n            },\n            _setupDragAndDrop: function() {\n                var self = this, dropZoneElements = this._options.dragAndDrop.extraDropzones, templating = this._templating, defaultDropZone = templating.getDropZone();\n                defaultDropZone && dropZoneElements.push(defaultDropZone);\n                return new qq.DragAndDrop({\n                    dropZoneElements: dropZoneElements,\n                    allowMultipleItems: this._options.multiple,\n                    classes: {\n                        dropActive: this._options.classes.dropActive\n                    },\n                    callbacks: {\n                        processingDroppedFiles: function() {\n                            templating.showDropProcessing();\n                        },\n                        processingDroppedFilesComplete: function(files, targetEl) {\n                            templating.hideDropProcessing();\n                            qq.each(files, function(idx, file) {\n                                file.qqDropTarget = targetEl;\n                            });\n                            if (files.length) {\n                                self.addFiles(files, null, null);\n                            }\n                        },\n                        dropError: function(code, errorData) {\n                            self._itemError(code, errorData);\n                        },\n                        dropLog: function(message, level) {\n                            self.log(message, level);\n                        }\n                    }\n                });\n            },\n            _bindFileButtonsClickEvent: function() {\n                var self = this;\n                return new qq.FileButtonsClickHandler({\n                    templating: this._templating,\n                    log: function(message, lvl) {\n                        self.log(message, lvl);\n                    },\n                    onDeleteFile: function(fileId) {\n                        self.deleteFile(fileId);\n                    },\n                    onCancel: function(fileId) {\n                        self.cancel(fileId);\n                    },\n                    onRetry: function(fileId) {\n                        self.retry(fileId);\n                    },\n                    onPause: function(fileId) {\n                        self.pauseUpload(fileId);\n                    },\n                    onContinue: function(fileId) {\n                        self.continueUpload(fileId);\n                    },\n                    onGetName: function(fileId) {\n                        return self.getName(fileId);\n                    }\n                });\n            },\n            _isEditFilenameEnabled: function() {\n                return this._templating.isEditFilenamePossible() && !this._options.autoUpload && qq.FilenameClickHandler && qq.FilenameInputFocusHandler && qq.FilenameInputFocusHandler;\n            },\n            _filenameEditHandler: function() {\n                var self = this, templating = this._templating;\n                return {\n                    templating: templating,\n                    log: function(message, lvl) {\n                        self.log(message, lvl);\n                    },\n                    onGetUploadStatus: function(fileId) {\n                        return self.getUploads({\n                            id: fileId\n                        }).status;\n                    },\n                    onGetName: function(fileId) {\n                        return self.getName(fileId);\n                    },\n                    onSetName: function(id, newName) {\n                        self.setName(id, newName);\n                    },\n                    onEditingStatusChange: function(id, isEditing) {\n                        var qqInput = qq(templating.getEditInput(id)), qqFileContainer = qq(templating.getFileContainer(id));\n                        if (isEditing) {\n                            qqInput.addClass(\"qq-editing\");\n                            templating.hideFilename(id);\n                            templating.hideEditIcon(id);\n                        } else {\n                            qqInput.removeClass(\"qq-editing\");\n                            templating.showFilename(id);\n                            templating.showEditIcon(id);\n                        }\n                        qqFileContainer.addClass(\"qq-temp\").removeClass(\"qq-temp\");\n                    }\n                };\n            },\n            _onUploadStatusChange: function(id, oldStatus, newStatus) {\n                this._parent.prototype._onUploadStatusChange.apply(this, arguments);\n                if (this._isEditFilenameEnabled()) {\n                    if (this._templating.getFileContainer(id) && newStatus !== qq.status.SUBMITTED) {\n                        this._templating.markFilenameEditable(id);\n                        this._templating.hideEditIcon(id);\n                    }\n                }\n                if (oldStatus === qq.status.UPLOAD_RETRYING && newStatus === qq.status.UPLOADING) {\n                    this._templating.hideRetry(id);\n                    this._templating.setStatusText(id);\n                    qq(this._templating.getFileContainer(id)).removeClass(this._classes.retrying);\n                } else if (newStatus === qq.status.UPLOAD_FAILED) {\n                    this._templating.hidePause(id);\n                }\n            },\n            _bindFilenameInputFocusInEvent: function() {\n                var spec = qq.extend({}, this._filenameEditHandler());\n                return new qq.FilenameInputFocusInHandler(spec);\n            },\n            _bindFilenameInputFocusEvent: function() {\n                var spec = qq.extend({}, this._filenameEditHandler());\n                return new qq.FilenameInputFocusHandler(spec);\n            },\n            _bindFilenameClickEvent: function() {\n                var spec = qq.extend({}, this._filenameEditHandler());\n                return new qq.FilenameClickHandler(spec);\n            },\n            _storeForLater: function(id) {\n                this._parent.prototype._storeForLater.apply(this, arguments);\n                this._templating.hideSpinner(id);\n            },\n            _onAllComplete: function(successful, failed) {\n                this._parent.prototype._onAllComplete.apply(this, arguments);\n                this._templating.resetTotalProgress();\n            },\n            _onSubmit: function(id, name) {\n                var file = this.getFile(id);\n                if (file && file.qqPath && this._options.dragAndDrop.reportDirectoryPaths) {\n                    this._paramsStore.addReadOnly(id, {\n                        qqpath: file.qqPath\n                    });\n                }\n                this._parent.prototype._onSubmit.apply(this, arguments);\n                this._addToList(id, name);\n            },\n            _onSubmitted: function(id) {\n                if (this._isEditFilenameEnabled()) {\n                    this._templating.markFilenameEditable(id);\n                    this._templating.showEditIcon(id);\n                    if (!this._focusinEventSupported) {\n                        this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(id));\n                    }\n                }\n            },\n            _onProgress: function(id, name, loaded, total) {\n                this._parent.prototype._onProgress.apply(this, arguments);\n                this._templating.updateProgress(id, loaded, total);\n                if (total === 0 || Math.round(loaded / total * 100) === 100) {\n                    this._templating.hideCancel(id);\n                    this._templating.hidePause(id);\n                    this._templating.hideProgress(id);\n                    this._templating.setStatusText(id, this._options.text.waitingForResponse);\n                    this._displayFileSize(id);\n                } else {\n                    this._displayFileSize(id, loaded, total);\n                }\n            },\n            _onTotalProgress: function(loaded, total) {\n                this._parent.prototype._onTotalProgress.apply(this, arguments);\n                this._templating.updateTotalProgress(loaded, total);\n            },\n            _onComplete: function(id, name, result, xhr) {\n                var parentRetVal = this._parent.prototype._onComplete.apply(this, arguments), templating = this._templating, fileContainer = templating.getFileContainer(id), self = this;\n                function completeUpload(result) {\n                    if (!fileContainer) {\n                        return;\n                    }\n                    templating.setStatusText(id);\n                    qq(fileContainer).removeClass(self._classes.retrying);\n                    templating.hideProgress(id);\n                    if (self.getUploads({\n                        id: id\n                    }).status !== qq.status.UPLOAD_FAILED) {\n                        templating.hideCancel(id);\n                    }\n                    templating.hideSpinner(id);\n                    if (result.success) {\n                        self._markFileAsSuccessful(id);\n                    } else {\n                        qq(fileContainer).addClass(self._classes.fail);\n                        templating.showCancel(id);\n                        if (templating.isRetryPossible() && !self._preventRetries[id]) {\n                            qq(fileContainer).addClass(self._classes.retryable);\n                            templating.showRetry(id);\n                        }\n                        self._controlFailureTextDisplay(id, result);\n                    }\n                }\n                if (parentRetVal instanceof qq.Promise) {\n                    parentRetVal.done(function(newResult) {\n                        completeUpload(newResult);\n                    });\n                } else {\n                    completeUpload(result);\n                }\n                return parentRetVal;\n            },\n            _markFileAsSuccessful: function(id) {\n                var templating = this._templating;\n                if (this._isDeletePossible()) {\n                    templating.showDeleteButton(id);\n                }\n                qq(templating.getFileContainer(id)).addClass(this._classes.success);\n                this._maybeUpdateThumbnail(id);\n            },\n            _onUploadPrep: function(id) {\n                this._parent.prototype._onUploadPrep.apply(this, arguments);\n                this._templating.showSpinner(id);\n            },\n            _onUpload: function(id, name) {\n                var parentRetVal = this._parent.prototype._onUpload.apply(this, arguments);\n                this._templating.showSpinner(id);\n                return parentRetVal;\n            },\n            _onUploadChunk: function(id, chunkData) {\n                this._parent.prototype._onUploadChunk.apply(this, arguments);\n                if (chunkData.partIndex > 0 && this._handler.isResumable(id)) {\n                    this._templating.allowPause(id);\n                }\n            },\n            _onCancel: function(id, name) {\n                this._parent.prototype._onCancel.apply(this, arguments);\n                this._removeFileItem(id);\n                if (this._getNotFinished() === 0) {\n                    this._templating.resetTotalProgress();\n                }\n            },\n            _onBeforeAutoRetry: function(id) {\n                var retryNumForDisplay, maxAuto, retryNote;\n                this._parent.prototype._onBeforeAutoRetry.apply(this, arguments);\n                this._showCancelLink(id);\n                if (this._options.retry.showAutoRetryNote) {\n                    retryNumForDisplay = this._autoRetries[id];\n                    maxAuto = this._options.retry.maxAutoAttempts;\n                    retryNote = this._options.retry.autoRetryNote.replace(/\\{retryNum\\}/g, retryNumForDisplay);\n                    retryNote = retryNote.replace(/\\{maxAuto\\}/g, maxAuto);\n                    this._templating.setStatusText(id, retryNote);\n                    qq(this._templating.getFileContainer(id)).addClass(this._classes.retrying);\n                }\n            },\n            _onBeforeManualRetry: function(id) {\n                if (this._parent.prototype._onBeforeManualRetry.apply(this, arguments)) {\n                    this._templating.resetProgress(id);\n                    qq(this._templating.getFileContainer(id)).removeClass(this._classes.fail);\n                    this._templating.setStatusText(id);\n                    this._templating.showSpinner(id);\n                    this._showCancelLink(id);\n                    return true;\n                } else {\n                    qq(this._templating.getFileContainer(id)).addClass(this._classes.retryable);\n                    this._templating.showRetry(id);\n                    return false;\n                }\n            },\n            _onSubmitDelete: function(id) {\n                var onSuccessCallback = qq.bind(this._onSubmitDeleteSuccess, this);\n                this._parent.prototype._onSubmitDelete.call(this, id, onSuccessCallback);\n            },\n            _onSubmitDeleteSuccess: function(id, uuid, additionalMandatedParams) {\n                if (this._options.deleteFile.forceConfirm) {\n                    this._showDeleteConfirm.apply(this, arguments);\n                } else {\n                    this._sendDeleteRequest.apply(this, arguments);\n                }\n            },\n            _onDeleteComplete: function(id, xhr, isError) {\n                this._parent.prototype._onDeleteComplete.apply(this, arguments);\n                this._templating.hideSpinner(id);\n                if (isError) {\n                    this._templating.setStatusText(id, this._options.deleteFile.deletingFailedText);\n                    this._templating.showDeleteButton(id);\n                } else {\n                    this._removeFileItem(id);\n                }\n            },\n            _sendDeleteRequest: function(id, uuid, additionalMandatedParams) {\n                this._templating.hideDeleteButton(id);\n                this._templating.showSpinner(id);\n                this._templating.setStatusText(id, this._options.deleteFile.deletingStatusText);\n                this._deleteHandler.sendDelete.apply(this, arguments);\n            },\n            _showDeleteConfirm: function(id, uuid, mandatedParams) {\n                var fileName = this.getName(id), confirmMessage = this._options.deleteFile.confirmMessage.replace(/\\{filename\\}/g, fileName), uuid = this.getUuid(id), deleteRequestArgs = arguments, self = this, retVal;\n                retVal = this._options.showConfirm(confirmMessage);\n                if (qq.isGenericPromise(retVal)) {\n                    retVal.then(function() {\n                        self._sendDeleteRequest.apply(self, deleteRequestArgs);\n                    });\n                } else if (retVal !== false) {\n                    self._sendDeleteRequest.apply(self, deleteRequestArgs);\n                }\n            },\n            _addToList: function(id, name, canned) {\n                var prependData, prependIndex = 0, dontDisplay = this._handler.isProxied(id) && this._options.scaling.hideScaled, record;\n                if (this._options.display.prependFiles) {\n                    if (this._totalFilesInBatch > 1 && this._filesInBatchAddedToUi > 0) {\n                        prependIndex = this._filesInBatchAddedToUi - 1;\n                    }\n                    prependData = {\n                        index: prependIndex\n                    };\n                }\n                if (!canned) {\n                    if (this._options.disableCancelForFormUploads && !qq.supportedFeatures.ajaxUploading) {\n                        this._templating.disableCancel();\n                    }\n                    if (!this._options.multiple) {\n                        record = this.getUploads({\n                            id: id\n                        });\n                        this._handledProxyGroup = this._handledProxyGroup || record.proxyGroupId;\n                        if (record.proxyGroupId !== this._handledProxyGroup || !record.proxyGroupId) {\n                            this._handler.cancelAll();\n                            this._clearList();\n                            this._handledProxyGroup = null;\n                        }\n                    }\n                }\n                if (canned) {\n                    this._templating.addFileToCache(id, this._options.formatFileName(name), prependData, dontDisplay);\n                    this._templating.updateThumbnail(id, this._thumbnailUrls[id], true, this._options.thumbnails.customResizer);\n                } else {\n                    this._templating.addFile(id, this._options.formatFileName(name), prependData, dontDisplay);\n                    this._templating.generatePreview(id, this.getFile(id), this._options.thumbnails.customResizer);\n                }\n                this._filesInBatchAddedToUi += 1;\n                if (canned || this._options.display.fileSizeOnSubmit && qq.supportedFeatures.ajaxUploading) {\n                    this._displayFileSize(id);\n                }\n            },\n            _clearList: function() {\n                this._templating.clearFiles();\n                this.clearStoredFiles();\n            },\n            _displayFileSize: function(id, loadedSize, totalSize) {\n                var size = this.getSize(id), sizeForDisplay = this._formatSize(size);\n                if (size >= 0) {\n                    if (loadedSize !== undefined && totalSize !== undefined) {\n                        sizeForDisplay = this._formatProgress(loadedSize, totalSize);\n                    }\n                    this._templating.updateSize(id, sizeForDisplay);\n                }\n            },\n            _formatProgress: function(uploadedSize, totalSize) {\n                var message = this._options.text.formatProgress;\n                function r(name, replacement) {\n                    message = message.replace(name, replacement);\n                }\n                r(\"{percent}\", Math.round(uploadedSize / totalSize * 100));\n                r(\"{total_size}\", this._formatSize(totalSize));\n                return message;\n            },\n            _controlFailureTextDisplay: function(id, response) {\n                var mode, responseProperty, failureReason;\n                mode = this._options.failedUploadTextDisplay.mode;\n                responseProperty = this._options.failedUploadTextDisplay.responseProperty;\n                if (mode === \"custom\") {\n                    failureReason = response[responseProperty];\n                    if (!failureReason) {\n                        failureReason = this._options.text.failUpload;\n                    }\n                    this._templating.setStatusText(id, failureReason);\n                    if (this._options.failedUploadTextDisplay.enableTooltip) {\n                        this._showTooltip(id, failureReason);\n                    }\n                } else if (mode === \"default\") {\n                    this._templating.setStatusText(id, this._options.text.failUpload);\n                } else if (mode !== \"none\") {\n                    this.log(\"failedUploadTextDisplay.mode value of '\" + mode + \"' is not valid\", \"warn\");\n                }\n            },\n            _showTooltip: function(id, text) {\n                this._templating.getFileContainer(id).title = text;\n            },\n            _showCancelLink: function(id) {\n                if (!this._options.disableCancelForFormUploads || qq.supportedFeatures.ajaxUploading) {\n                    this._templating.showCancel(id);\n                }\n            },\n            _itemError: function(code, name, item) {\n                var message = this._parent.prototype._itemError.apply(this, arguments);\n                this._options.showMessage(message);\n            },\n            _batchError: function(message) {\n                this._parent.prototype._batchError.apply(this, arguments);\n                this._options.showMessage(message);\n            },\n            _setupPastePrompt: function() {\n                var self = this;\n                this._options.callbacks.onPasteReceived = function() {\n                    var message = self._options.paste.namePromptMessage, defaultVal = self._options.paste.defaultName;\n                    return self._options.showPrompt(message, defaultVal);\n                };\n            },\n            _fileOrBlobRejected: function(id, name) {\n                this._totalFilesInBatch -= 1;\n                this._parent.prototype._fileOrBlobRejected.apply(this, arguments);\n            },\n            _prepareItemsForUpload: function(items, params, endpoint) {\n                this._totalFilesInBatch = items.length;\n                this._filesInBatchAddedToUi = 0;\n                this._parent.prototype._prepareItemsForUpload.apply(this, arguments);\n            },\n            _maybeUpdateThumbnail: function(fileId) {\n                var thumbnailUrl = this._thumbnailUrls[fileId], fileStatus = this.getUploads({\n                    id: fileId\n                }).status;\n                if (fileStatus !== qq.status.DELETED && (thumbnailUrl || this._options.thumbnails.placeholders.waitUntilResponse || !qq.supportedFeatures.imagePreviews)) {\n                    this._templating.updateThumbnail(fileId, thumbnailUrl, this._options.thumbnails.customResizer);\n                }\n            },\n            _addCannedFile: function(sessionData) {\n                var id = this._parent.prototype._addCannedFile.apply(this, arguments);\n                this._addToList(id, this.getName(id), true);\n                this._templating.hideSpinner(id);\n                this._templating.hideCancel(id);\n                this._markFileAsSuccessful(id);\n                return id;\n            },\n            _setSize: function(id, newSize) {\n                this._parent.prototype._setSize.apply(this, arguments);\n                this._templating.updateSize(id, this._formatSize(newSize));\n            },\n            _sessionRequestComplete: function() {\n                this._templating.addCacheToDom();\n                this._parent.prototype._sessionRequestComplete.apply(this, arguments);\n            }\n        };\n    })();\n    qq.FineUploader = function(o, namespace) {\n        \"use strict\";\n        var self = this;\n        this._parent = namespace ? qq[namespace].FineUploaderBasic : qq.FineUploaderBasic;\n        this._parent.apply(this, arguments);\n        qq.extend(this._options, {\n            element: null,\n            button: null,\n            listElement: null,\n            dragAndDrop: {\n                extraDropzones: [],\n                reportDirectoryPaths: false\n            },\n            text: {\n                formatProgress: \"{percent}% of {total_size}\",\n                failUpload: \"Upload failed\",\n                waitingForResponse: \"Processing...\",\n                paused: \"Paused\"\n            },\n            template: \"qq-template\",\n            classes: {\n                retrying: \"qq-upload-retrying\",\n                retryable: \"qq-upload-retryable\",\n                success: \"qq-upload-success\",\n                fail: \"qq-upload-fail\",\n                editable: \"qq-editable\",\n                hide: \"qq-hide\",\n                dropActive: \"qq-upload-drop-area-active\"\n            },\n            failedUploadTextDisplay: {\n                mode: \"default\",\n                responseProperty: \"error\",\n                enableTooltip: true\n            },\n            messages: {\n                tooManyFilesError: \"You may only drop one file\",\n                unsupportedBrowser: \"Unrecoverable error - this browser does not permit file uploading of any kind.\"\n            },\n            retry: {\n                showAutoRetryNote: true,\n                autoRetryNote: \"Retrying {retryNum}/{maxAuto}...\"\n            },\n            deleteFile: {\n                forceConfirm: false,\n                confirmMessage: \"Are you sure you want to delete {filename}?\",\n                deletingStatusText: \"Deleting...\",\n                deletingFailedText: \"Delete failed\"\n            },\n            display: {\n                fileSizeOnSubmit: false,\n                prependFiles: false\n            },\n            paste: {\n                promptForName: false,\n                namePromptMessage: \"Please name this image\"\n            },\n            thumbnails: {\n                customResizer: null,\n                maxCount: 0,\n                placeholders: {\n                    waitUntilResponse: false,\n                    notAvailablePath: null,\n                    waitingPath: null\n                },\n                timeBetweenThumbs: 750\n            },\n            scaling: {\n                hideScaled: false\n            },\n            showMessage: function(message) {\n                if (self._templating.hasDialog(\"alert\")) {\n                    return self._templating.showDialog(\"alert\", message);\n                } else {\n                    setTimeout(function() {\n                        window.alert(message);\n                    }, 0);\n                }\n            },\n            showConfirm: function(message) {\n                if (self._templating.hasDialog(\"confirm\")) {\n                    return self._templating.showDialog(\"confirm\", message);\n                } else {\n                    return window.confirm(message);\n                }\n            },\n            showPrompt: function(message, defaultValue) {\n                if (self._templating.hasDialog(\"prompt\")) {\n                    return self._templating.showDialog(\"prompt\", message, defaultValue);\n                } else {\n                    return window.prompt(message, defaultValue);\n                }\n            }\n        }, true);\n        qq.extend(this._options, o, true);\n        this._templating = new qq.Templating({\n            log: qq.bind(this.log, this),\n            templateIdOrEl: this._options.template,\n            containerEl: this._options.element,\n            fileContainerEl: this._options.listElement,\n            button: this._options.button,\n            imageGenerator: this._imageGenerator,\n            classes: {\n                hide: this._options.classes.hide,\n                editable: this._options.classes.editable\n            },\n            limits: {\n                maxThumbs: this._options.thumbnails.maxCount,\n                timeBetweenThumbs: this._options.thumbnails.timeBetweenThumbs\n            },\n            placeholders: {\n                waitUntilUpdate: this._options.thumbnails.placeholders.waitUntilResponse,\n                thumbnailNotAvailable: this._options.thumbnails.placeholders.notAvailablePath,\n                waitingForThumbnail: this._options.thumbnails.placeholders.waitingPath\n            },\n            text: this._options.text\n        });\n        if (this._options.workarounds.ios8SafariUploads && qq.ios800() && qq.iosSafari()) {\n            this._templating.renderFailure(this._options.messages.unsupportedBrowserIos8Safari);\n        } else if (!qq.supportedFeatures.uploading || this._options.cors.expected && !qq.supportedFeatures.uploadCors) {\n            this._templating.renderFailure(this._options.messages.unsupportedBrowser);\n        } else {\n            this._wrapCallbacks();\n            this._templating.render();\n            this._classes = this._options.classes;\n            if (!this._options.button && this._templating.getButton()) {\n                this._defaultButtonId = this._createUploadButton({\n                    element: this._templating.getButton(),\n                    title: this._options.text.fileInputTitle\n                }).getButtonId();\n            }\n            this._setupClickAndEditEventHandlers();\n            if (qq.DragAndDrop && qq.supportedFeatures.fileDrop) {\n                this._dnd = this._setupDragAndDrop();\n            }\n            if (this._options.paste.targetElement && this._options.paste.promptForName) {\n                if (qq.PasteSupport) {\n                    this._setupPastePrompt();\n                } else {\n                    this.log(\"Paste support module not found.\", \"error\");\n                }\n            }\n            this._totalFilesInBatch = 0;\n            this._filesInBatchAddedToUi = 0;\n        }\n    };\n    qq.extend(qq.FineUploader.prototype, qq.basePublicApi);\n    qq.extend(qq.FineUploader.prototype, qq.basePrivateApi);\n    qq.extend(qq.FineUploader.prototype, qq.uiPublicApi);\n    qq.extend(qq.FineUploader.prototype, qq.uiPrivateApi);\n    qq.Templating = function(spec) {\n        \"use strict\";\n        var FILE_ID_ATTR = \"qq-file-id\", FILE_CLASS_PREFIX = \"qq-file-id-\", THUMBNAIL_MAX_SIZE_ATTR = \"qq-max-size\", THUMBNAIL_SERVER_SCALE_ATTR = \"qq-server-scale\", HIDE_DROPZONE_ATTR = \"qq-hide-dropzone\", DROPZPONE_TEXT_ATTR = \"qq-drop-area-text\", IN_PROGRESS_CLASS = \"qq-in-progress\", HIDDEN_FOREVER_CLASS = \"qq-hidden-forever\", fileBatch = {\n            content: document.createDocumentFragment(),\n            map: {}\n        }, isCancelDisabled = false, generatedThumbnails = 0, thumbnailQueueMonitorRunning = false, thumbGenerationQueue = [], thumbnailMaxSize = -1, options = {\n            log: null,\n            limits: {\n                maxThumbs: 0,\n                timeBetweenThumbs: 750\n            },\n            templateIdOrEl: \"qq-template\",\n            containerEl: null,\n            fileContainerEl: null,\n            button: null,\n            imageGenerator: null,\n            classes: {\n                hide: \"qq-hide\",\n                editable: \"qq-editable\"\n            },\n            placeholders: {\n                waitUntilUpdate: false,\n                thumbnailNotAvailable: null,\n                waitingForThumbnail: null\n            },\n            text: {\n                paused: \"Paused\"\n            }\n        }, selectorClasses = {\n            button: \"qq-upload-button-selector\",\n            alertDialog: \"qq-alert-dialog-selector\",\n            dialogCancelButton: \"qq-cancel-button-selector\",\n            confirmDialog: \"qq-confirm-dialog-selector\",\n            dialogMessage: \"qq-dialog-message-selector\",\n            dialogOkButton: \"qq-ok-button-selector\",\n            promptDialog: \"qq-prompt-dialog-selector\",\n            uploader: \"qq-uploader-selector\",\n            drop: \"qq-upload-drop-area-selector\",\n            list: \"qq-upload-list-selector\",\n            progressBarContainer: \"qq-progress-bar-container-selector\",\n            progressBar: \"qq-progress-bar-selector\",\n            totalProgressBarContainer: \"qq-total-progress-bar-container-selector\",\n            totalProgressBar: \"qq-total-progress-bar-selector\",\n            file: \"qq-upload-file-selector\",\n            spinner: \"qq-upload-spinner-selector\",\n            size: \"qq-upload-size-selector\",\n            cancel: \"qq-upload-cancel-selector\",\n            pause: \"qq-upload-pause-selector\",\n            continueButton: \"qq-upload-continue-selector\",\n            deleteButton: \"qq-upload-delete-selector\",\n            retry: \"qq-upload-retry-selector\",\n            statusText: \"qq-upload-status-text-selector\",\n            editFilenameInput: \"qq-edit-filename-selector\",\n            editNameIcon: \"qq-edit-filename-icon-selector\",\n            dropText: \"qq-upload-drop-area-text-selector\",\n            dropProcessing: \"qq-drop-processing-selector\",\n            dropProcessingSpinner: \"qq-drop-processing-spinner-selector\",\n            thumbnail: \"qq-thumbnail-selector\"\n        }, previewGeneration = {}, cachedThumbnailNotAvailableImg = new qq.Promise(), cachedWaitingForThumbnailImg = new qq.Promise(), log, isEditElementsExist, isRetryElementExist, templateDom, container, fileList, showThumbnails, serverScale, cacheThumbnailPlaceholders = function() {\n            var notAvailableUrl = options.placeholders.thumbnailNotAvailable, waitingUrl = options.placeholders.waitingForThumbnail, spec = {\n                maxSize: thumbnailMaxSize,\n                scale: serverScale\n            };\n            if (showThumbnails) {\n                if (notAvailableUrl) {\n                    options.imageGenerator.generate(notAvailableUrl, new Image(), spec).then(function(updatedImg) {\n                        cachedThumbnailNotAvailableImg.success(updatedImg);\n                    }, function() {\n                        cachedThumbnailNotAvailableImg.failure();\n                        log(\"Problem loading 'not available' placeholder image at \" + notAvailableUrl, \"error\");\n                    });\n                } else {\n                    cachedThumbnailNotAvailableImg.failure();\n                }\n                if (waitingUrl) {\n                    options.imageGenerator.generate(waitingUrl, new Image(), spec).then(function(updatedImg) {\n                        cachedWaitingForThumbnailImg.success(updatedImg);\n                    }, function() {\n                        cachedWaitingForThumbnailImg.failure();\n                        log(\"Problem loading 'waiting for thumbnail' placeholder image at \" + waitingUrl, \"error\");\n                    });\n                } else {\n                    cachedWaitingForThumbnailImg.failure();\n                }\n            }\n        }, displayWaitingImg = function(thumbnail) {\n            var waitingImgPlacement = new qq.Promise();\n            cachedWaitingForThumbnailImg.then(function(img) {\n                maybeScalePlaceholderViaCss(img, thumbnail);\n                if (!thumbnail.src) {\n                    thumbnail.src = img.src;\n                    thumbnail.onload = function() {\n                        thumbnail.onload = null;\n                        show(thumbnail);\n                        waitingImgPlacement.success();\n                    };\n                } else {\n                    waitingImgPlacement.success();\n                }\n            }, function() {\n                hide(thumbnail);\n                waitingImgPlacement.success();\n            });\n            return waitingImgPlacement;\n        }, generateNewPreview = function(id, blob, spec) {\n            var thumbnail = getThumbnail(id);\n            log(\"Generating new thumbnail for \" + id);\n            blob.qqThumbnailId = id;\n            return options.imageGenerator.generate(blob, thumbnail, spec).then(function() {\n                generatedThumbnails++;\n                show(thumbnail);\n                previewGeneration[id].success();\n            }, function() {\n                previewGeneration[id].failure();\n                if (!options.placeholders.waitUntilUpdate) {\n                    maybeSetDisplayNotAvailableImg(id, thumbnail);\n                }\n            });\n        }, generateNextQueuedPreview = function() {\n            if (thumbGenerationQueue.length) {\n                thumbnailQueueMonitorRunning = true;\n                var queuedThumbRequest = thumbGenerationQueue.shift();\n                if (queuedThumbRequest.update) {\n                    processUpdateQueuedPreviewRequest(queuedThumbRequest);\n                } else {\n                    processNewQueuedPreviewRequest(queuedThumbRequest);\n                }\n            } else {\n                thumbnailQueueMonitorRunning = false;\n            }\n        }, getCancel = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.cancel);\n        }, getContinue = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.continueButton);\n        }, getDialog = function(type) {\n            return getTemplateEl(container, selectorClasses[type + \"Dialog\"]);\n        }, getDelete = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.deleteButton);\n        }, getDropProcessing = function() {\n            return getTemplateEl(container, selectorClasses.dropProcessing);\n        }, getEditIcon = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.editNameIcon);\n        }, getFile = function(id) {\n            return fileBatch.map[id] || qq(fileList).getFirstByClass(FILE_CLASS_PREFIX + id);\n        }, getFilename = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.file);\n        }, getPause = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.pause);\n        }, getProgress = function(id) {\n            if (id == null) {\n                return getTemplateEl(container, selectorClasses.totalProgressBarContainer) || getTemplateEl(container, selectorClasses.totalProgressBar);\n            }\n            return getTemplateEl(getFile(id), selectorClasses.progressBarContainer) || getTemplateEl(getFile(id), selectorClasses.progressBar);\n        }, getRetry = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.retry);\n        }, getSize = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.size);\n        }, getSpinner = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.spinner);\n        }, getTemplateEl = function(context, cssClass) {\n            return context && qq(context).getFirstByClass(cssClass);\n        }, getThumbnail = function(id) {\n            return showThumbnails && getTemplateEl(getFile(id), selectorClasses.thumbnail);\n        }, hide = function(el) {\n            el && qq(el).addClass(options.classes.hide);\n        }, maybeScalePlaceholderViaCss = function(placeholder, thumbnail) {\n            var maxWidth = placeholder.style.maxWidth, maxHeight = placeholder.style.maxHeight;\n            if (maxHeight && maxWidth && !thumbnail.style.maxWidth && !thumbnail.style.maxHeight) {\n                qq(thumbnail).css({\n                    maxWidth: maxWidth,\n                    maxHeight: maxHeight\n                });\n            }\n        }, maybeSetDisplayNotAvailableImg = function(id, thumbnail) {\n            var previewing = previewGeneration[id] || new qq.Promise().failure(), notAvailableImgPlacement = new qq.Promise();\n            cachedThumbnailNotAvailableImg.then(function(img) {\n                previewing.then(function() {\n                    notAvailableImgPlacement.success();\n                }, function() {\n                    maybeScalePlaceholderViaCss(img, thumbnail);\n                    thumbnail.onload = function() {\n                        thumbnail.onload = null;\n                        notAvailableImgPlacement.success();\n                    };\n                    thumbnail.src = img.src;\n                    show(thumbnail);\n                });\n            });\n            return notAvailableImgPlacement;\n        }, parseAndGetTemplate = function() {\n            var scriptEl, scriptHtml, fileListNode, tempTemplateEl, fileListEl, defaultButton, dropArea, thumbnail, dropProcessing, dropTextEl, uploaderEl;\n            log(\"Parsing template\");\n            if (options.templateIdOrEl == null) {\n                throw new Error(\"You MUST specify either a template element or ID!\");\n            }\n            if (qq.isString(options.templateIdOrEl)) {\n                scriptEl = document.getElementById(options.templateIdOrEl);\n                if (scriptEl === null) {\n                    throw new Error(qq.format(\"Cannot find template script at ID '{}'!\", options.templateIdOrEl));\n                }\n                scriptHtml = scriptEl.innerHTML;\n            } else {\n                if (options.templateIdOrEl.innerHTML === undefined) {\n                    throw new Error(\"You have specified an invalid value for the template option!  \" + \"It must be an ID or an Element.\");\n                }\n                scriptHtml = options.templateIdOrEl.innerHTML;\n            }\n            scriptHtml = qq.trimStr(scriptHtml);\n            tempTemplateEl = document.createElement(\"div\");\n            tempTemplateEl.appendChild(qq.toElement(scriptHtml));\n            uploaderEl = qq(tempTemplateEl).getFirstByClass(selectorClasses.uploader);\n            if (options.button) {\n                defaultButton = qq(tempTemplateEl).getFirstByClass(selectorClasses.button);\n                if (defaultButton) {\n                    qq(defaultButton).remove();\n                }\n            }\n            if (!qq.DragAndDrop || !qq.supportedFeatures.fileDrop) {\n                dropProcessing = qq(tempTemplateEl).getFirstByClass(selectorClasses.dropProcessing);\n                if (dropProcessing) {\n                    qq(dropProcessing).remove();\n                }\n            }\n            dropArea = qq(tempTemplateEl).getFirstByClass(selectorClasses.drop);\n            if (dropArea && !qq.DragAndDrop) {\n                log(\"DnD module unavailable.\", \"info\");\n                qq(dropArea).remove();\n            }\n            if (!qq.supportedFeatures.fileDrop) {\n                uploaderEl.removeAttribute(DROPZPONE_TEXT_ATTR);\n                if (dropArea && qq(dropArea).hasAttribute(HIDE_DROPZONE_ATTR)) {\n                    qq(dropArea).css({\n                        display: \"none\"\n                    });\n                }\n            } else if (qq(uploaderEl).hasAttribute(DROPZPONE_TEXT_ATTR) && dropArea) {\n                dropTextEl = qq(dropArea).getFirstByClass(selectorClasses.dropText);\n                dropTextEl && qq(dropTextEl).remove();\n            }\n            thumbnail = qq(tempTemplateEl).getFirstByClass(selectorClasses.thumbnail);\n            if (!showThumbnails) {\n                thumbnail && qq(thumbnail).remove();\n            } else if (thumbnail) {\n                thumbnailMaxSize = parseInt(thumbnail.getAttribute(THUMBNAIL_MAX_SIZE_ATTR));\n                thumbnailMaxSize = thumbnailMaxSize > 0 ? thumbnailMaxSize : null;\n                serverScale = qq(thumbnail).hasAttribute(THUMBNAIL_SERVER_SCALE_ATTR);\n            }\n            showThumbnails = showThumbnails && thumbnail;\n            isEditElementsExist = qq(tempTemplateEl).getByClass(selectorClasses.editFilenameInput).length > 0;\n            isRetryElementExist = qq(tempTemplateEl).getByClass(selectorClasses.retry).length > 0;\n            fileListNode = qq(tempTemplateEl).getFirstByClass(selectorClasses.list);\n            if (fileListNode == null) {\n                throw new Error(\"Could not find the file list container in the template!\");\n            }\n            fileListEl = fileListNode.children[0].cloneNode(true);\n            fileListNode.innerHTML = \"\";\n            if (tempTemplateEl.getElementsByTagName(\"DIALOG\").length) {\n                document.createElement(\"dialog\");\n            }\n            log(\"Template parsing complete\");\n            return {\n                template: tempTemplateEl,\n                fileTemplate: fileListEl\n            };\n        }, prependFile = function(el, index, fileList) {\n            var parentEl = fileList, beforeEl = parentEl.firstChild;\n            if (index > 0) {\n                beforeEl = qq(parentEl).children()[index].nextSibling;\n            }\n            parentEl.insertBefore(el, beforeEl);\n        }, processNewQueuedPreviewRequest = function(queuedThumbRequest) {\n            var id = queuedThumbRequest.id, optFileOrBlob = queuedThumbRequest.optFileOrBlob, relatedThumbnailId = optFileOrBlob && optFileOrBlob.qqThumbnailId, thumbnail = getThumbnail(id), spec = {\n                customResizeFunction: queuedThumbRequest.customResizeFunction,\n                maxSize: thumbnailMaxSize,\n                orient: true,\n                scale: true\n            };\n            if (qq.supportedFeatures.imagePreviews) {\n                if (thumbnail) {\n                    if (options.limits.maxThumbs && options.limits.maxThumbs <= generatedThumbnails) {\n                        maybeSetDisplayNotAvailableImg(id, thumbnail);\n                        generateNextQueuedPreview();\n                    } else {\n                        displayWaitingImg(thumbnail).done(function() {\n                            previewGeneration[id] = new qq.Promise();\n                            previewGeneration[id].done(function() {\n                                setTimeout(generateNextQueuedPreview, options.limits.timeBetweenThumbs);\n                            });\n                            if (relatedThumbnailId != null) {\n                                useCachedPreview(id, relatedThumbnailId);\n                            } else {\n                                generateNewPreview(id, optFileOrBlob, spec);\n                            }\n                        });\n                    }\n                } else {\n                    generateNextQueuedPreview();\n                }\n            } else if (thumbnail) {\n                displayWaitingImg(thumbnail);\n                generateNextQueuedPreview();\n            }\n        }, processUpdateQueuedPreviewRequest = function(queuedThumbRequest) {\n            var id = queuedThumbRequest.id, thumbnailUrl = queuedThumbRequest.thumbnailUrl, showWaitingImg = queuedThumbRequest.showWaitingImg, thumbnail = getThumbnail(id), spec = {\n                customResizeFunction: queuedThumbRequest.customResizeFunction,\n                scale: serverScale,\n                maxSize: thumbnailMaxSize\n            };\n            if (thumbnail) {\n                if (thumbnailUrl) {\n                    if (options.limits.maxThumbs && options.limits.maxThumbs <= generatedThumbnails) {\n                        maybeSetDisplayNotAvailableImg(id, thumbnail);\n                        generateNextQueuedPreview();\n                    } else {\n                        if (showWaitingImg) {\n                            displayWaitingImg(thumbnail);\n                        }\n                        return options.imageGenerator.generate(thumbnailUrl, thumbnail, spec).then(function() {\n                            show(thumbnail);\n                            generatedThumbnails++;\n                            setTimeout(generateNextQueuedPreview, options.limits.timeBetweenThumbs);\n                        }, function() {\n                            maybeSetDisplayNotAvailableImg(id, thumbnail);\n                            setTimeout(generateNextQueuedPreview, options.limits.timeBetweenThumbs);\n                        });\n                    }\n                } else {\n                    maybeSetDisplayNotAvailableImg(id, thumbnail);\n                    generateNextQueuedPreview();\n                }\n            }\n        }, setProgressBarWidth = function(id, percent) {\n            var bar = getProgress(id), progressBarSelector = id == null ? selectorClasses.totalProgressBar : selectorClasses.progressBar;\n            if (bar && !qq(bar).hasClass(progressBarSelector)) {\n                bar = qq(bar).getFirstByClass(progressBarSelector);\n            }\n            if (bar) {\n                qq(bar).css({\n                    width: percent + \"%\"\n                });\n                bar.setAttribute(\"aria-valuenow\", percent);\n            }\n        }, show = function(el) {\n            el && qq(el).removeClass(options.classes.hide);\n        }, useCachedPreview = function(targetThumbnailId, cachedThumbnailId) {\n            var targetThumbnail = getThumbnail(targetThumbnailId), cachedThumbnail = getThumbnail(cachedThumbnailId);\n            log(qq.format(\"ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.\", targetThumbnailId, cachedThumbnailId, cachedThumbnailId));\n            previewGeneration[cachedThumbnailId].then(function() {\n                generatedThumbnails++;\n                previewGeneration[targetThumbnailId].success();\n                log(qq.format(\"Now using previously generated thumbnail created for ID {} on ID {}.\", cachedThumbnailId, targetThumbnailId));\n                targetThumbnail.src = cachedThumbnail.src;\n                show(targetThumbnail);\n            }, function() {\n                previewGeneration[targetThumbnailId].failure();\n                if (!options.placeholders.waitUntilUpdate) {\n                    maybeSetDisplayNotAvailableImg(targetThumbnailId, targetThumbnail);\n                }\n            });\n        };\n        qq.extend(options, spec);\n        log = options.log;\n        if (!qq.supportedFeatures.imagePreviews) {\n            options.limits.timeBetweenThumbs = 0;\n            options.limits.maxThumbs = 0;\n        }\n        container = options.containerEl;\n        showThumbnails = options.imageGenerator !== undefined;\n        templateDom = parseAndGetTemplate();\n        cacheThumbnailPlaceholders();\n        qq.extend(this, {\n            render: function() {\n                log(\"Rendering template in DOM.\");\n                generatedThumbnails = 0;\n                container.appendChild(templateDom.template.cloneNode(true));\n                hide(getDropProcessing());\n                this.hideTotalProgress();\n                fileList = options.fileContainerEl || getTemplateEl(container, selectorClasses.list);\n                log(\"Template rendering complete\");\n            },\n            renderFailure: function(message) {\n                var cantRenderEl = qq.toElement(message);\n                container.innerHTML = \"\";\n                container.appendChild(cantRenderEl);\n            },\n            reset: function() {\n                container.innerHTML = \"\";\n                this.render();\n            },\n            clearFiles: function() {\n                fileList.innerHTML = \"\";\n            },\n            disableCancel: function() {\n                isCancelDisabled = true;\n            },\n            addFile: function(id, name, prependInfo, hideForever, batch) {\n                var fileEl = templateDom.fileTemplate.cloneNode(true), fileNameEl = getTemplateEl(fileEl, selectorClasses.file), uploaderEl = getTemplateEl(container, selectorClasses.uploader), fileContainer = batch ? fileBatch.content : fileList, thumb;\n                if (batch) {\n                    fileBatch.map[id] = fileEl;\n                }\n                qq(fileEl).addClass(FILE_CLASS_PREFIX + id);\n                uploaderEl.removeAttribute(DROPZPONE_TEXT_ATTR);\n                if (fileNameEl) {\n                    qq(fileNameEl).setText(name);\n                    fileNameEl.setAttribute(\"title\", name);\n                }\n                fileEl.setAttribute(FILE_ID_ATTR, id);\n                if (prependInfo) {\n                    prependFile(fileEl, prependInfo.index, fileContainer);\n                } else {\n                    fileContainer.appendChild(fileEl);\n                }\n                if (hideForever) {\n                    fileEl.style.display = \"none\";\n                    qq(fileEl).addClass(HIDDEN_FOREVER_CLASS);\n                } else {\n                    hide(getProgress(id));\n                    hide(getSize(id));\n                    hide(getDelete(id));\n                    hide(getRetry(id));\n                    hide(getPause(id));\n                    hide(getContinue(id));\n                    if (isCancelDisabled) {\n                        this.hideCancel(id);\n                    }\n                    thumb = getThumbnail(id);\n                    if (thumb && !thumb.src) {\n                        cachedWaitingForThumbnailImg.then(function(waitingImg) {\n                            thumb.src = waitingImg.src;\n                            if (waitingImg.style.maxHeight && waitingImg.style.maxWidth) {\n                                qq(thumb).css({\n                                    maxHeight: waitingImg.style.maxHeight,\n                                    maxWidth: waitingImg.style.maxWidth\n                                });\n                            }\n                            show(thumb);\n                        });\n                    }\n                }\n            },\n            addFileToCache: function(id, name, prependInfo, hideForever) {\n                this.addFile(id, name, prependInfo, hideForever, true);\n            },\n            addCacheToDom: function() {\n                fileList.appendChild(fileBatch.content);\n                fileBatch.content = document.createDocumentFragment();\n                fileBatch.map = {};\n            },\n            removeFile: function(id) {\n                qq(getFile(id)).remove();\n            },\n            getFileId: function(el) {\n                var currentNode = el;\n                if (currentNode) {\n                    while (currentNode.getAttribute(FILE_ID_ATTR) == null) {\n                        currentNode = currentNode.parentNode;\n                    }\n                    return parseInt(currentNode.getAttribute(FILE_ID_ATTR));\n                }\n            },\n            getFileList: function() {\n                return fileList;\n            },\n            markFilenameEditable: function(id) {\n                var filename = getFilename(id);\n                filename && qq(filename).addClass(options.classes.editable);\n            },\n            updateFilename: function(id, name) {\n                var filenameEl = getFilename(id);\n                if (filenameEl) {\n                    qq(filenameEl).setText(name);\n                    filenameEl.setAttribute(\"title\", name);\n                }\n            },\n            hideFilename: function(id) {\n                hide(getFilename(id));\n            },\n            showFilename: function(id) {\n                show(getFilename(id));\n            },\n            isFileName: function(el) {\n                return qq(el).hasClass(selectorClasses.file);\n            },\n            getButton: function() {\n                return options.button || getTemplateEl(container, selectorClasses.button);\n            },\n            hideDropProcessing: function() {\n                hide(getDropProcessing());\n            },\n            showDropProcessing: function() {\n                show(getDropProcessing());\n            },\n            getDropZone: function() {\n                return getTemplateEl(container, selectorClasses.drop);\n            },\n            isEditFilenamePossible: function() {\n                return isEditElementsExist;\n            },\n            hideRetry: function(id) {\n                hide(getRetry(id));\n            },\n            isRetryPossible: function() {\n                return isRetryElementExist;\n            },\n            showRetry: function(id) {\n                show(getRetry(id));\n            },\n            getFileContainer: function(id) {\n                return getFile(id);\n            },\n            showEditIcon: function(id) {\n                var icon = getEditIcon(id);\n                icon && qq(icon).addClass(options.classes.editable);\n            },\n            isHiddenForever: function(id) {\n                return qq(getFile(id)).hasClass(HIDDEN_FOREVER_CLASS);\n            },\n            hideEditIcon: function(id) {\n                var icon = getEditIcon(id);\n                icon && qq(icon).removeClass(options.classes.editable);\n            },\n            isEditIcon: function(el) {\n                return qq(el).hasClass(selectorClasses.editNameIcon, true);\n            },\n            getEditInput: function(id) {\n                return getTemplateEl(getFile(id), selectorClasses.editFilenameInput);\n            },\n            isEditInput: function(el) {\n                return qq(el).hasClass(selectorClasses.editFilenameInput, true);\n            },\n            updateProgress: function(id, loaded, total) {\n                var bar = getProgress(id), percent;\n                if (bar && total > 0) {\n                    percent = Math.round(loaded / total * 100);\n                    if (percent === 100) {\n                        hide(bar);\n                    } else {\n                        show(bar);\n                    }\n                    setProgressBarWidth(id, percent);\n                }\n            },\n            updateTotalProgress: function(loaded, total) {\n                this.updateProgress(null, loaded, total);\n            },\n            hideProgress: function(id) {\n                var bar = getProgress(id);\n                bar && hide(bar);\n            },\n            hideTotalProgress: function() {\n                this.hideProgress();\n            },\n            resetProgress: function(id) {\n                setProgressBarWidth(id, 0);\n                this.hideTotalProgress(id);\n            },\n            resetTotalProgress: function() {\n                this.resetProgress();\n            },\n            showCancel: function(id) {\n                if (!isCancelDisabled) {\n                    var cancel = getCancel(id);\n                    cancel && qq(cancel).removeClass(options.classes.hide);\n                }\n            },\n            hideCancel: function(id) {\n                hide(getCancel(id));\n            },\n            isCancel: function(el) {\n                return qq(el).hasClass(selectorClasses.cancel, true);\n            },\n            allowPause: function(id) {\n                show(getPause(id));\n                hide(getContinue(id));\n            },\n            uploadPaused: function(id) {\n                this.setStatusText(id, options.text.paused);\n                this.allowContinueButton(id);\n                hide(getSpinner(id));\n            },\n            hidePause: function(id) {\n                hide(getPause(id));\n            },\n            isPause: function(el) {\n                return qq(el).hasClass(selectorClasses.pause, true);\n            },\n            isContinueButton: function(el) {\n                return qq(el).hasClass(selectorClasses.continueButton, true);\n            },\n            allowContinueButton: function(id) {\n                show(getContinue(id));\n                hide(getPause(id));\n            },\n            uploadContinued: function(id) {\n                this.setStatusText(id, \"\");\n                this.allowPause(id);\n                show(getSpinner(id));\n            },\n            showDeleteButton: function(id) {\n                show(getDelete(id));\n            },\n            hideDeleteButton: function(id) {\n                hide(getDelete(id));\n            },\n            isDeleteButton: function(el) {\n                return qq(el).hasClass(selectorClasses.deleteButton, true);\n            },\n            isRetry: function(el) {\n                return qq(el).hasClass(selectorClasses.retry, true);\n            },\n            updateSize: function(id, text) {\n                var size = getSize(id);\n                if (size) {\n                    show(size);\n                    qq(size).setText(text);\n                }\n            },\n            setStatusText: function(id, text) {\n                var textEl = getTemplateEl(getFile(id), selectorClasses.statusText);\n                if (textEl) {\n                    if (text == null) {\n                        qq(textEl).clearText();\n                    } else {\n                        qq(textEl).setText(text);\n                    }\n                }\n            },\n            hideSpinner: function(id) {\n                qq(getFile(id)).removeClass(IN_PROGRESS_CLASS);\n                hide(getSpinner(id));\n            },\n            showSpinner: function(id) {\n                qq(getFile(id)).addClass(IN_PROGRESS_CLASS);\n                show(getSpinner(id));\n            },\n            generatePreview: function(id, optFileOrBlob, customResizeFunction) {\n                if (!this.isHiddenForever(id)) {\n                    thumbGenerationQueue.push({\n                        id: id,\n                        customResizeFunction: customResizeFunction,\n                        optFileOrBlob: optFileOrBlob\n                    });\n                    !thumbnailQueueMonitorRunning && generateNextQueuedPreview();\n                }\n            },\n            updateThumbnail: function(id, thumbnailUrl, showWaitingImg, customResizeFunction) {\n                if (!this.isHiddenForever(id)) {\n                    thumbGenerationQueue.push({\n                        customResizeFunction: customResizeFunction,\n                        update: true,\n                        id: id,\n                        thumbnailUrl: thumbnailUrl,\n                        showWaitingImg: showWaitingImg\n                    });\n                    !thumbnailQueueMonitorRunning && generateNextQueuedPreview();\n                }\n            },\n            hasDialog: function(type) {\n                return qq.supportedFeatures.dialogElement && !!getDialog(type);\n            },\n            showDialog: function(type, message, defaultValue) {\n                var dialog = getDialog(type), messageEl = getTemplateEl(dialog, selectorClasses.dialogMessage), inputEl = dialog.getElementsByTagName(\"INPUT\")[0], cancelBtn = getTemplateEl(dialog, selectorClasses.dialogCancelButton), okBtn = getTemplateEl(dialog, selectorClasses.dialogOkButton), promise = new qq.Promise(), closeHandler = function() {\n                    cancelBtn.removeEventListener(\"click\", cancelClickHandler);\n                    okBtn && okBtn.removeEventListener(\"click\", okClickHandler);\n                    promise.failure();\n                }, cancelClickHandler = function() {\n                    cancelBtn.removeEventListener(\"click\", cancelClickHandler);\n                    dialog.close();\n                }, okClickHandler = function() {\n                    dialog.removeEventListener(\"close\", closeHandler);\n                    okBtn.removeEventListener(\"click\", okClickHandler);\n                    dialog.close();\n                    promise.success(inputEl && inputEl.value);\n                };\n                dialog.addEventListener(\"close\", closeHandler);\n                cancelBtn.addEventListener(\"click\", cancelClickHandler);\n                okBtn && okBtn.addEventListener(\"click\", okClickHandler);\n                if (inputEl) {\n                    inputEl.value = defaultValue;\n                }\n                messageEl.textContent = message;\n                dialog.showModal();\n                return promise;\n            }\n        });\n    };\n    qq.UiEventHandler = function(s, protectedApi) {\n        \"use strict\";\n        var disposer = new qq.DisposeSupport(), spec = {\n            eventType: \"click\",\n            attachTo: null,\n            onHandled: function(target, event) {}\n        };\n        qq.extend(this, {\n            addHandler: function(element) {\n                addHandler(element);\n            },\n            dispose: function() {\n                disposer.dispose();\n            }\n        });\n        function addHandler(element) {\n            disposer.attach(element, spec.eventType, function(event) {\n                event = event || window.event;\n                var target = event.target || event.srcElement;\n                spec.onHandled(target, event);\n            });\n        }\n        qq.extend(protectedApi, {\n            getFileIdFromItem: function(item) {\n                return item.qqFileId;\n            },\n            getDisposeSupport: function() {\n                return disposer;\n            }\n        });\n        qq.extend(spec, s);\n        if (spec.attachTo) {\n            addHandler(spec.attachTo);\n        }\n    };\n    qq.FileButtonsClickHandler = function(s) {\n        \"use strict\";\n        var inheritedInternalApi = {}, spec = {\n            templating: null,\n            log: function(message, lvl) {},\n            onDeleteFile: function(fileId) {},\n            onCancel: function(fileId) {},\n            onRetry: function(fileId) {},\n            onPause: function(fileId) {},\n            onContinue: function(fileId) {},\n            onGetName: function(fileId) {}\n        }, buttonHandlers = {\n            cancel: function(id) {\n                spec.onCancel(id);\n            },\n            retry: function(id) {\n                spec.onRetry(id);\n            },\n            deleteButton: function(id) {\n                spec.onDeleteFile(id);\n            },\n            pause: function(id) {\n                spec.onPause(id);\n            },\n            continueButton: function(id) {\n                spec.onContinue(id);\n            }\n        };\n        function examineEvent(target, event) {\n            qq.each(buttonHandlers, function(buttonType, handler) {\n                var firstLetterCapButtonType = buttonType.charAt(0).toUpperCase() + buttonType.slice(1), fileId;\n                if (spec.templating[\"is\" + firstLetterCapButtonType](target)) {\n                    fileId = spec.templating.getFileId(target);\n                    qq.preventDefault(event);\n                    spec.log(qq.format(\"Detected valid file button click event on file '{}', ID: {}.\", spec.onGetName(fileId), fileId));\n                    handler(fileId);\n                    return false;\n                }\n            });\n        }\n        qq.extend(spec, s);\n        spec.eventType = \"click\";\n        spec.onHandled = examineEvent;\n        spec.attachTo = spec.templating.getFileList();\n        qq.extend(this, new qq.UiEventHandler(spec, inheritedInternalApi));\n    };\n    qq.FilenameClickHandler = function(s) {\n        \"use strict\";\n        var inheritedInternalApi = {}, spec = {\n            templating: null,\n            log: function(message, lvl) {},\n            classes: {\n                file: \"qq-upload-file\",\n                editNameIcon: \"qq-edit-filename-icon\"\n            },\n            onGetUploadStatus: function(fileId) {},\n            onGetName: function(fileId) {}\n        };\n        qq.extend(spec, s);\n        function examineEvent(target, event) {\n            if (spec.templating.isFileName(target) || spec.templating.isEditIcon(target)) {\n                var fileId = spec.templating.getFileId(target), status = spec.onGetUploadStatus(fileId);\n                if (status === qq.status.SUBMITTED) {\n                    spec.log(qq.format(\"Detected valid filename click event on file '{}', ID: {}.\", spec.onGetName(fileId), fileId));\n                    qq.preventDefault(event);\n                    inheritedInternalApi.handleFilenameEdit(fileId, target, true);\n                }\n            }\n        }\n        spec.eventType = \"click\";\n        spec.onHandled = examineEvent;\n        qq.extend(this, new qq.FilenameEditHandler(spec, inheritedInternalApi));\n    };\n    qq.FilenameInputFocusInHandler = function(s, inheritedInternalApi) {\n        \"use strict\";\n        var spec = {\n            templating: null,\n            onGetUploadStatus: function(fileId) {},\n            log: function(message, lvl) {}\n        };\n        if (!inheritedInternalApi) {\n            inheritedInternalApi = {};\n        }\n        function handleInputFocus(target, event) {\n            if (spec.templating.isEditInput(target)) {\n                var fileId = spec.templating.getFileId(target), status = spec.onGetUploadStatus(fileId);\n                if (status === qq.status.SUBMITTED) {\n                    spec.log(qq.format(\"Detected valid filename input focus event on file '{}', ID: {}.\", spec.onGetName(fileId), fileId));\n                    inheritedInternalApi.handleFilenameEdit(fileId, target);\n                }\n            }\n        }\n        spec.eventType = \"focusin\";\n        spec.onHandled = handleInputFocus;\n        qq.extend(spec, s);\n        qq.extend(this, new qq.FilenameEditHandler(spec, inheritedInternalApi));\n    };\n    qq.FilenameInputFocusHandler = function(spec) {\n        \"use strict\";\n        spec.eventType = \"focus\";\n        spec.attachTo = null;\n        qq.extend(this, new qq.FilenameInputFocusInHandler(spec, {}));\n    };\n    qq.FilenameEditHandler = function(s, inheritedInternalApi) {\n        \"use strict\";\n        var spec = {\n            templating: null,\n            log: function(message, lvl) {},\n            onGetUploadStatus: function(fileId) {},\n            onGetName: function(fileId) {},\n            onSetName: function(fileId, newName) {},\n            onEditingStatusChange: function(fileId, isEditing) {}\n        };\n        function getFilenameSansExtension(fileId) {\n            var filenameSansExt = spec.onGetName(fileId), extIdx = filenameSansExt.lastIndexOf(\".\");\n            if (extIdx > 0) {\n                filenameSansExt = filenameSansExt.substr(0, extIdx);\n            }\n            return filenameSansExt;\n        }\n        function getOriginalExtension(fileId) {\n            var origName = spec.onGetName(fileId);\n            return qq.getExtension(origName);\n        }\n        function handleNameUpdate(newFilenameInputEl, fileId) {\n            var newName = newFilenameInputEl.value, origExtension;\n            if (newName !== undefined && qq.trimStr(newName).length > 0) {\n                origExtension = getOriginalExtension(fileId);\n                if (origExtension !== undefined) {\n                    newName = newName + \".\" + origExtension;\n                }\n                spec.onSetName(fileId, newName);\n            }\n            spec.onEditingStatusChange(fileId, false);\n        }\n        function registerInputBlurHandler(inputEl, fileId) {\n            inheritedInternalApi.getDisposeSupport().attach(inputEl, \"blur\", function() {\n                handleNameUpdate(inputEl, fileId);\n            });\n        }\n        function registerInputEnterKeyHandler(inputEl, fileId) {\n            inheritedInternalApi.getDisposeSupport().attach(inputEl, \"keyup\", function(event) {\n                var code = event.keyCode || event.which;\n                if (code === 13) {\n                    handleNameUpdate(inputEl, fileId);\n                }\n            });\n        }\n        qq.extend(spec, s);\n        spec.attachTo = spec.templating.getFileList();\n        qq.extend(this, new qq.UiEventHandler(spec, inheritedInternalApi));\n        qq.extend(inheritedInternalApi, {\n            handleFilenameEdit: function(id, target, focusInput) {\n                var newFilenameInputEl = spec.templating.getEditInput(id);\n                spec.onEditingStatusChange(id, true);\n                newFilenameInputEl.value = getFilenameSansExtension(id);\n                if (focusInput) {\n                    newFilenameInputEl.focus();\n                }\n                registerInputBlurHandler(newFilenameInputEl, id);\n                registerInputEnterKeyHandler(newFilenameInputEl, id);\n            }\n        });\n    };\n})(window);\n//# sourceMappingURL=fine-uploader.js.map","\"use strict\";\n\nmodule.exports = require(\"../fine-uploader/fine-uploader\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = function(module) {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: function() {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(823);\n"],"names":["root","factory","global","window","defaults","ajaxActionName","ajaxUrl","ajaxContainerSelector","deleteButtonsSelector","fieldSelector","itemSelector","uploaderSelector","configCallback","Plugin","container","options","item","this","settings","JSON","parse","stringify","hasOwnProperty","initEnvironment","bindFormEventListeners","currentValue","field","value","submitForm","prototype","ajaxContainer","querySelector","deleteButtons","querySelectorAll","items","uploader","bindDeleteEventListeners","apply","initFineUploader","templateElement","innerHTML","replace","config","element","debug","template","request","endpoint","form","action","location","href","inputName","name","params","REQUEST_TOKEN","failedUploadTextDisplay","mode","maxChars","responseProperty","callbacks","onValidateBatch","bind","onStatusChange","onComplete","maxConnections","chunking","enabled","partSize","chunkSize","concurrent","extensions","minSizeLimit","sizeLimit","validation","allowedExtensions","minWidth","maxWidth","minHeight","maxHeight","image","uploadButtonTitle","text","fileInputTitle","messages","Array","isArray","fineUploader","FineUploader","setAjaxContainerContent","buffer","self","from","forEach","el","addEventListener","e","preventDefault","deleteFile","dataset","deleteId","files","count","split","length","limit","clearStoredFiles","_batchError","_options","tooManyItemsError","getInProgress","document","button","disabled","id","result","success","file","i","current","splice","join","itemId","parentElement","removeChild","define","exports","module","ContaoFineUploader","errorMessage","initUploader","makeSortable","onCompleteCallback","sortable","Sortable","dataIdAttr","store","get","set","toArray","arguments","classList","add","XMLHttpRequest","open","setRequestHeader","onload","status","response","alert","remove","onerror","send","ContaoFineUploaderFrontend","qq","hide","style","display","attach","type","fn","attachEvent","detach","removeEventListener","detachEvent","contains","descendant","compareDocumentPosition","insertBefore","elementB","parentNode","css","styles","Error","opacity","filters","filter","Math","round","extend","hasClass","considerParent","re","RegExp","test","className","addClass","removeClass","getByClass","first","candidates","getElementsByTagName","each","idx","val","push","getFirstByClass","children","child","firstChild","nodeType","nextSibling","setText","innerText","textContent","clearText","hasAttribute","attrName","attrVal","exec","getAttribute","undefined","ExifRestorer","div","canvasToBlob","canvas","mime","quality","dataUriToBlob","toDataURL","dataUri","arrayBuffer","byteString","intArray","mimeString","data","BlobBuilder","blobBuilder","indexOf","atob","decodeURI","ArrayBuffer","Uint8Array","character","charCodeAt","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","Blob","log","message","level","console","isObject","variable","Object","toString","call","isFunction","constructor","isItemList","maybeItemList","isNodeList","maybeNodeList","namedItem","isString","maybeString","trimStr","string","String","trim","format","str","args","slice","newStr","nextIdxToReplace","strBefore","substring","strAfter","isFile","maybeFile","File","isFileList","maybeFileList","FileList","isFileOrInput","maybeFileOrInput","isInput","maybeInput","notFile","evaluateType","normalizedType","toLowerCase","HTMLInputElement","tagName","isBlob","maybeBlob","isXhrUploadSupported","input","createElement","multiple","FormData","createXhrInstance","upload","ActiveXObject","error","isFolderDropSupported","dataTransfer","webkitGetAsEntry","isFileChunkingSupported","androidStock","webkitSlice","mozSlice","sliceBlob","fileOrBlob","start","end","arrayBufferToHex","bytesAsHex","bytes","byt","byteAsHexStr","readBlobToHex","blob","startOffset","initialBlob","fileReader","FileReader","promise","Promise","failure","readAsArrayBuffer","second","extendNested","prop","override","target","sourceFn","super_","source","srcPropName","srcPropVal","arr","elt","len","getUniqueId","c","r","random","ie","navigator","userAgent","ie7","ie8","ie10","ie11","edge","safari","vendor","chrome","opera","firefox","windows","platform","android","ios6","ios","ios7","ios8","ios800","iosChrome","iosSafari","iosSafariWebView","returnValue","toElement","html","iterableItem","callback","keyOrIndex","Storage","key","getItem","charAt","oldFunc","context","newArgs","concat","obj2url","obj","temp","prefixDone","uristrings","prefix","nextObj","nextTemp","encodeURIComponent","obj2FormData","formData","arrayKeyName","obj2Inputs","setAttribute","appendChild","parseJson","json","eval","getExtension","filename","extIdx","lastIndexOf","substr","getFilename","blobOrFileInput","fileName","DisposeSupport","disposers","dispose","disposer","shift","addDisposer","disposeFunction","version","supportedFeatures","supportsUploading","supportsUploadingBlobs","supportsFileDrop","supportsAjaxFileUploading","supportsFolderDrop","supportsChunking","supportsResume","supportsUploadViaPaste","supportsUploadCors","supportsDeleteFileXdr","supportsDeleteFileCorsXhr","supportsDeleteFileCors","supportsFolderSelection","supportsImagePreviews","supportsUploadProgress","span","isCrossOriginXhrSupported","withCredentials","isXdrSupported","XDomainRequest","tempInput","supported","ex","testSupportsFileInputElement","localStorage","setItem","isLocalStorageSupported","match","postMessage","webkitdirectory","ajaxUploading","blobUploading","canDetermineSize","deleteFileCors","deleteFileCorsXdr","deleteFileCorsXhr","dialogElement","HTMLDialogElement","fileDrop","folderDrop","folderSelection","imagePreviews","imageValidation","itemSizeValidation","pause","progressBar","resume","scaling","tiffPreviews","unlimitedScaledImageSize","uploading","uploadCors","uploadCustomHeaders","uploadNonMultipart","uploadViaPaste","isGenericPromise","maybePromise","then","successArgs","failureArgs","successCallbacks","failureCallbacks","doneCallbacks","state","onSuccess","onFailure","done","BlobProxy","referenceBlob","onCreate","create","UploadButton","o","buttonId","disposeSupport","acceptFiles","focusClass","folders","hoverClass","ios8BrowserCrashWorkaround","onChange","title","createInput","BUTTON_ID_ATTR_NAME","setMultiple","position","right","top","fontFamily","fontSize","margin","padding","cursor","height","overflow","direction","getInput","getButtonId","isMultiple","optInput","removeAttribute","setAcceptFiles","reset","UploadData","uploaderProxy","byUuid","byStatus","byProxyGroupId","byBatchId","getDataByIds","idOrIds","entries","addFile","spec","SUBMITTING","originalName","uuid","size","batchId","proxyGroupId","onBeforeStatusChange","retrieve","optionalFilter","uuids","getDataByUuids","statusResults","statuses","index","statusEnum","statusResultIndexes","dataIndex","removeFileRef","record","setStatus","newStatus","oldStatus","byStatusOldStatusIndex","uuidChanged","newUuid","oldUuid","updateName","newName","updateSize","newSize","setParentId","targetId","parentId","getIdsInProxyGroup","getIdsInBatch","SUBMITTED","REJECTED","QUEUED","CANCELED","PAUSED","UPLOADING","UPLOAD_FINALIZING","UPLOAD_RETRYING","UPLOAD_SUCCESSFUL","UPLOAD_FAILED","DELETE_FAILED","DELETING","DELETED","basePublicApi","addBlobs","blobDataOrArray","addFiles","addInitialFiles","cannedFileList","cannedFile","_addCannedFile","_maybeHandleIos8SafariWorkaround","_storedIds","_currentBatchId","processBlob","_handleNewFile","blobs","defaultName","verifiedFiles","processBlobData","blobData","processCanvas","processCanvasData","canvasData","normalizedQuality","processFileOrInput","fileOrInput","fileContainer","_prepareItemsForUpload","cancel","uploadData","_uploadData","getName","_handler","cancelAll","storedIdsCopy","storedFileId","continueUpload","_uploadFile","_onSubmitDelete","doesExist","fileOrBlobId","isValid","drawThumbnail","fileId","imgOrCanvas","maxSize","fromServer","customResizeFunction","fileOrUrl","promiseToReturn","_imageGenerator","_thumbnailUrls","scale","getFile","generate","modifiedContainer","reason","getButton","_getButton","_buttonIdsForFileIds","getEndpoint","_endpointStore","uploadDataRecord","getParentId","uploadDataEntry","getUploads","getResumableFilesData","getSize","getNetUploads","_netUploaded","getRemainingAllowedItems","allowedItems","_currentItemLimit","_netUploadedOrQueued","getUuid","isResumable","hasResumeRecord","pauseUpload","expunge","_autoRetries","_retryTimeouts","_preventRetries","_buttons","_paramsStore","_pasteHandler","session","refreshOnReset","_refreshSessionData","_succeededSinceLastAllComplete","_failedSinceLastAllComplete","_totalProgress","_customResumeDataStore","retry","_manualRetry","scaleImage","specs","Scaler","setCustomHeaders","headers","_customHeadersStore","setCustomResumeData","setDeleteFileCustomHeaders","_deleteFileCustomHeadersStore","setDeleteFileEndpoint","_deleteFileEndpointStore","setDeleteFileParams","_deleteFileParamsStore","setEndpoint","setForm","elementOrId","_updateFormSupportAndParams","setItemLimit","newItemLimit","setName","setParams","setUuid","_onDeleteComplete","uploadStoredFiles","_itemError","_uploadStoredFiles","basePrivateApi","sessionData","deleteFileEndpoint","deleteFileParams","thumbnailUrl","_annotateWithButtonId","associatedInput","qqButtonId","_getButtonId","onError","_createDeleteHandler","DeleteFileAjaxRequester","method","toUpperCase","uuidParamName","uuidName","customHeaders","paramsStore","endpointStore","cors","onDelete","_onDelete","onDeleteComplete","xhrOrXdr","isError","_createPasteHandler","PasteSupport","targetElement","paste","pasteReceived","_handleCheckedCallback","onPasteReceived","_handlePasteSuccess","identifier","_createStore","initialValue","_readOnlyValues_","catchall","perIdReadOnlyValues","readOnlyValues","copy","orig","includeReadOnlyValues","existing","values","addReadOnly","_createUploadDataTracker","_onUploadStatusChange","_maybeAllComplete","setTimeout","_createUploadButton","accept","classes","buttonFocus","buttonHover","workarounds","ios8BrowserCrash","iosEmptyVideos","_isAllowedExtension","_onInputChange","_disposeSupport","_createUploadHandler","additionalOptions","namespace","lastOnProgress","preventRetryParam","preventRetryResponseProperty","onProgress","loaded","total","_onProgress","xhr","retVal","_onComplete","onCancel","cancelFinalizationEffort","_onCancel","onUploadPrep","_onUploadPrep","onUpload","_onUpload","onUploadResult","onUploadChunk","chunkData","_onUploadChunk","onUploadChunkResult","partIndex","onUploadChunkSuccess","_onUploadChunkSuccess","onResume","customResumeData","onAutoRetry","responseJSON","_onAutoRetry","onUuidChanged","setSize","_setSize","getDataByUuid","isQueued","isInProgress","getCustomResumeData","_getCustomResumeData","UploadHandlerController","_fileOrBlobRejected","_formatSize","sizeSymbols","max","toFixed","_generateExtraButtonSpecs","_extraButtonSpecs","extraButtons","extraButtonOptionEntry","extraButtonSpec","_initExtraButton","extraButtonsSpec","_defaultButtonId","buttonOrFileInputOrFile","inputs","fileInput","fileBlobOrInput","_getNotFinished","_getValidationBase","_getValidationDescriptor","fileWrapper","_getValidationDescriptors","fileWrappers","fileDescriptors","_handleCameraAccess","camera","acceptIosCamera","optionRoot","details","callbackRetVal","successParam","newFileWrapperList","actualFile","handler","_customNewFileHandler","_handleNewFileGeneric","addFileToHandler","_trackButton","fileList","extSuppliedName","extension","_handleDeleteSuccess","_handleDeleteFailed","_initFormSupportAndParams","_formSupport","FormSupport","attachedToForm","getFormInputsAsObject","autoUpload","newAutoUpload","newEndpoint","_isDeletePossible","expected","allowXdr","allowed","valid","allowedExt","extRegex","code","maybeNameOrNames","extensionsForMessage","placeholderMatch","names","validationBase","replacement","allowedExtension","formatFileName","placeholder","_onBeforeManualRetry","notFinished","_onAllComplete","ios8SafariUploads","unsupportedBrowserIos8Safari","_maybeParseAndSendUploadError","errorReason","defaultResponseError","_maybeProcessNextItemAfterOnValidateCallback","validItem","stopOnFirstInvalidFile","validationDescriptor","onValidate","_onValidateCallbackSuccess","_onValidateCallbackFailure","successful","failed","onAllComplete","_shouldAutoRetry","retryWaitPeriod","autoAttemptDelay","_onBeforeAutoRetry","itemLimit","onManualRetry","clearTimeout","storedItemIndex","fileIndex","onIndividualProgress","_onSubmit","_onSubmitCallbackSuccess","_onSubmitted","onSubmitted","_storeForLater","onSuccessCallback","additionalMandatedParams","adjustedOnSuccessCallback","onSubmitDelete","_deleteHandler","sendDelete","_onTotalProgress","onTotalProgress","enableAuto","_onValidateBatchCallbackFailure","_onValidateBatchCallbackSuccess","validationDescriptors","proposedNetFilesUploadedOrQueued","nextIndex","_validateFileOrBlobData","_upload","_preventLeaveInProgress","event","onLeave","Session","_session","addFileRecord","refresh","_sessionRequestComplete","onSessionRequestComplete","onNewSize","maxAutoAttempts","formElementOrId","onSubmit","idToUpload","stillSubmitting","validityChecker","allowEmpty","ImageValidation","validate","errorCode","_wrapCallbacks","safeCallback","errorMsg","exception","callbackName","callbackFunc","FineUploaderBasic","disableCancelForFormUploads","warnBeforeUnload","filenameParam","forceMultipart","omitDefaultParams","paramsInBody","requireSuccessJson","totalFileSizeName","maybeXhr","maybeXhrOrXdr","attemptNumber","fileOrBlobData","typeError","sizeError","minSizeError","emptyError","noFilesError","maxHeightImageError","maxWidthImageError","minHeightImageError","minWidthImageError","retryFailTooManyItems","mandatory","paramNames","partByteOffset","totalFileSize","totalParts","jsonPayload","resetOnStatus","recordsExpireIn","resuming","customKeys","fileOrBlobName","sendCredentials","interceptSubmit","customResizer","sendOriginal","orient","defaultType","defaultQuality","failureText","includeExif","sizes","ImageGenerator","_scaler","handleNewFile","TotalProgress","entry","AjaxRequester","shouldParamsBeInQueryString","queue","requestData","acceptHeader","validMethods","contentType","mandatedParams","allowXRequestedWithAndCacheControl","successfulResponseCodes","DELETE","PATCH","POST","PUT","GET","onSend","isXdr","getXhrOrXdr","suppliedXhr","ontimeout","onprogress","getCorsAjaxTransport","dequeue","sendRequest","xdrError","responseCode","optXhr","url","onDemandParams","additionalParams","getParams","payload","additionalQueryParams","addToPath","createUrl","getXdrLoadHandler","getXdrErrorHandler","onreadystatechange","readyState","getXhrReadyStateChangeHandler","lengthComputable","registerForUploadProgress","onDemandHeaders","additionalHeaders","allHeaders","containsNonSimple","header","setHeaders","initTransport","path","cacheBuster","withPath","appendToPath","withParams","withQueryParams","_additionalQueryParams_","withHeaders","withPayload","thePayload","withCacheBuster","qqtimestamp","Date","getTime","prepareToSend","canceled","UploadHandler","proxy","fileState","fileItem","getThirdPartyFileId","_getFileState","_setThirdPartyFileId","thirdPartyFileId","_wasCanceled","preventRetryResponse","controller","chunkingPossible","concurrentChunkingPossible","chunked","chunkIdx","_getChunkData","attemptingResume","chunkProgress","_getChunkDataForCallback","finalize","finalizeChunks","normaizedResponse","normalizeResponse","_maybeDeletePersistedChunkData","cleanup","normalizedResponse","handleFailure","clearCachedChunk","inProgressIdx","responseToReport","inProgressChunksArray","inProgress","remaining","unshift","ignoreFailure","keys","_getXhrs","ckid","ckXhr","abort","_cancelled","moveInProgressToRemaining","connectionManager","free","hasMoreParts","nextPart","nextIdx","_getTotalChunks","reevaluateChunking","sendNext","inProgressChunks","available","requestOverrides","uploadChunkData","overrides","uploadChunk","inProgressChunkIdx","_maybePersistChunkedState","clearXhr","_open","_openChunks","_waiting","openChunkEntriesCount","openChunksCount","openChunkIndexes","dontAllowNext","nextId","allowNext","waitingIndex","connectionsIndex","getProxyOrBlob","getWaitingOrConnected","waitingOrConnected","chunks","parseInt","isUsingConnection","pop","openChunksEntry","simple","uploadFile","maybeNewUuid","_clearXhrs","getProxy","initHandler","handlerType","traditional","handlerModuleSubtype","onFinalizing","_removeExpiredChunkingRecords","isDeferredEligibleForUpload","maybeDefer","generatedBlob","updateBlob","maybeSendDeferredFiles","errorResponse","idsInGroup","uploadedThisId","idInGroup","now","originalResponse","_shouldChunkThisFile","blobToUpload","cancelRetVal","isProxied","_getLocalStorageId","isAttemptingResume","WindowReceiveMessage","callbackWrapperDetachers","receiveMessage","stopReceivingMessages","detacher","FormUploadHandler","formHandlerInstanceId","onloadCallbacks","detachLoadEvents","postMessageCallbackTimers","isCors","corsMessageReceiver","getFileIdForIframeName","iframeName","iframe","getElementById","_getIframeName","expungeFile","_attachLoadEvent","responseDescriptor","onloadCallback","_parseJsonResponse","_detachLoadEvent","registerPostMessageCallback","contentDocument","body","_createIframe","initIframeForUpload","_initFormForUpload","targetName","innerHtmlOrMessage","XhrUploadHandler","getChunkSize","chunkFiles","resumeEnabled","xhrId","ajaxRequester","_getAjaxRequester","blobOrProxy","_initTempState","_maybePrepareForResume","cachedChunks","tempState","xhrs","ajaxRequesters","responseParser","lastChunkIdx","_getXhr","resumableFilesData","_iterateResumeRecords","notResumable","optInProgress","optRemaining","chunkingState","reverse","paused","totalChunks","parts","newBlob","chunkId","_createXhr","optChunkIdx","_registerXhr","chunkIndex","fileSize","startBytes","endBytes","part","startByte","endByte","localStorageId","_getMimeType","_getPersistableData","ceil","_markNotResumable","removeItem","persistedData","lastUpdated","_registerProgressHandler","progressCalculator","totalSuccessfullyLoadedForFile","loadedForRequest","totalForRequest","estActualChunkLoaded","totalLoadedForFile","chunkLoaded","optAjaxRequester","xhrsId","expirationDays","expirationDate","setDate","getDate","requester","_method","renderImageToCanvas","img","doSquash","modifiedDimensions","iw","naturalWidth","ih","naturalHeight","width","ctx","getContext","save","resize","resizeInfo","imageHeight","imageWidth","orientation","sourceCanvas","sourceCanvasContext","targetCanvas","targetHeight","targetWidth","transformCoordinate","drawImage","qqImageRendered","renderImageToCanvasWithCustomResizer","maxPixels","origHeight","origWidth","newHeight","sqrt","newWidth","maybeCalculateDownsampledDimensions","getImageData","detectSubsampling","tmpCtx","sx","dx","d","tmpCanvas","vertSquashRatio","ratio","sy","ey","py","detectVerticalSquash","dw","dh","dy","clearRect","restore","translate","rotate","PI","MegaPixImage","srcImage","errorCallback","Image","URL","createObjectURL","webkitURL","src","listeners","imageLoadListeners","render","opt","oldTargetSrc","imgWidth","imgHeight","optionsKey","optionsValue","renderImageToDataURL","onrender","isImg","isCanvas","determineMimeOfFileName","nameWithPath","pathSegments","isCrossOrigin","targetProtocol","targetHostname","targetPort","targetAnchor","protocol","port","hostname","registerThumbnailRenderedListener","registered","registerImgLoadListeners","registerCanvasDrawImageListener","drawOnCanvasOrImgFromUrl","canvasOrImg","draw","tempImg","tempImgRender","crossOrigin","drawOnImgFromUrlWithCssScaling","drawFromUrl","fileBlobOrUrl","drawPreview","Identify","megapixErrorHandler","isPreviewable","dummyExif","exif","Exif","mpImg","Orientation","failureMsg","_testing","TAG_IDS","TAG_INFO","parseLittleEndian","hex","pow","seekToApp1","offset","theOffset","thePromise","segmentLength","getApp1Offset","parser","onParseFailure","app1Offset","app1Start","littleEndian","getDirEntryCount","dirEntryCount","dirEntries","getIfd","ifdHex","getDirEntries","tagValues","tagsToFind","vals","tagValHex","tagValLength","idHex","tagsToFindIdx","getTagValues","previewable","isPreviewableSync","PREVIEWABLE_MIME_TYPES","questionableBytes","identifiable","magicBytesEntries","magicBytesArrayEntry","fileMime","isRecognizedImage","limits","sizeDetermination","validationEffort","atLeastOne","hasNonZeroLimits","dimensions","failingLimit","limitName","limitValue","limitMatcher","dimensionPropName","actualValue","getFailingLimit","handleFileItems","fileItems","someItemsIgnored","isJsonResponseValid","err","refreshEffort","requesterOptions","SessionAjaxRequester","queryServer","responseText","includeOriginal","failedToScaleText","_getSortedSizes","getFileRecords","originalFileUuid","originalFileName","originalBlobOrBlobData","records","originalBlob","sizeRecord","outputType","_determineOutputType","requestedType","refType","_getName","_generateScaledImage","failedText","api","param","scaledIds","originalId","blobSize","scaledId","qqparentuuid","qqparentsize","scalingEffort","scalingOptions","scaler","referenceType","scaledVersionProperties","startOfExt","versionType","scaledName","scaledExt","nameAppendage","sort","a","b","sourceFile","imageGenerator","scaledImageDataUri","signalSuccess","_insertExifHeader","scaledImageDataUriWithExif","originalImage","reader","insertionEffort","originalImageDataUri","readAsDataURL","_dataUriToBlob","_createBlob","chr1","chr2","enc1","enc2","enc3","output","chr3","enc4","isNaN","KEY_STR","origFileBase64","resizedFileBase64","expectedBase64Header","rawImage","decode64","segments","slice2Segments","exifManipulation","encode64","exifArray","getExifArray","newImageArray","insertExif","seg","x","imageData","buf","separatePoint","mae","ato","array","rawImageArray","head","endPoint","perFileProgress","totalLoaded","totalSize","lastLoadedSent","lastTotalSent","callbackProxy","onNew","updateTotalProgress","newLoaded","newTotal","oldLoaded","oldTotal","retryable","none","failedId","noRetryableFiles","detachPasteHandler","clipboardData","isImage","getAsFile","startUpload","formEl","validateForm","nativeSubmit","checkValidity","_form2Obj","determineNewEndpoint","submit","maybeUploadOnSubmit","determineFormEl","ignoreValue","checked","elements","select","selected","selectValue","createForm","responseFromMessage","doc","innerHtml","contentWindow","nodeValue","getIframeContentJson","multipart","allChunksDoneRequester","AllChunksDoneAjaxRequester","createReadyStateChangedHandler","onUploadOrChunkComplete","isErrorUploadResponse","parseResponse","sendChunksCompleteRequest","complete","getChunksCompleteParams","setParamsAndGetEntityToSend","entityToSendParams","xhrOverrides","customParams","defaultParams","xhrOverrideParams","setUploadHeaders","headersOptions","headerOverrides","headerName","headerValue","extraHeaders","uploadChunkParams","toSend","addChunkingSpecificParams","promises","endpointHandler","DragAndDrop","dropZones","maybeHideDropZones","HIDE_ZONES_EVENT_NAME","HIDE_BEFORE_ENTER_ATTR","uploadDropZones","droppedFiles","traverseFileTree","parseEntryPromise","qqPath","extractDirectoryPath","fileError","dropLog","fullPath","isDirectory","getFilesInDirectory","entriesLeft","indexOfNameInFullPath","accumEntries","existingPromise","dirReader","createReader","readEntries","newEntries","setupDropzone","dropArea","dropZone","UploadDropZone","onEnter","dropActive","stopPropagation","onLeaveNotDescendants","onDrop","uploadDropZone","pendingFolderPromises","handleDataTransferPromise","processingDroppedFiles","dropDisabled","allowMultipleItems","processingDroppedFilesComplete","dropError","filesAsArray","getElement","uploadDroppedFiles","isFileDrag","dragEvent","fileDrag","types","dropZoneElements","HTMLElement","y","leavingDocumentOut","setupExtraDropzone","removeDropzone","dzs","targetEl","errorSpecifics","preventDrop","dropOutsideDisabled","dragoverShouldBeCanceled","isValidFileDrag","effectTest","dt","isSafari","effectAllowed","includes","isOrSetDropDisabled","isDisabled","dropEffect","effect","relatedTarget","elementFromPoint","clientX","clientY","hideZonesEvent","triggerUsingOldApi","createEvent","initEvent","CustomEvent","dispatchEvent","triggerHidezonesEvent","uiPublicApi","_parent","_templating","addCacheToDom","clearFiles","addExtraDropzone","_dnd","removeExtraDropzone","getItemByFileId","isHiddenForever","getFileContainer","_setupDragAndDrop","_totalFilesInBatch","_filesInBatchAddedToUi","_setupClickAndEditEventHandlers","formattedFilename","updateFilename","uploadPaused","continued","uploadContinued","getId","fileContainerOrChildEl","getFileId","getDropTarget","qqDropTarget","uiPrivateApi","_removeFileItem","removeFile","_fileButtonsClickHandler","FileButtonsClickHandler","_bindFileButtonsClickEvent","_focusinEventSupported","_isEditFilenameEnabled","_filenameClickHandler","_bindFilenameClickEvent","_filenameInputFocusInHandler","_bindFilenameInputFocusInEvent","_filenameInputFocusHandler","_bindFilenameInputFocusEvent","dragAndDrop","extraDropzones","templating","defaultDropZone","getDropZone","showDropProcessing","hideDropProcessing","errorData","lvl","onDeleteFile","onRetry","onPause","onContinue","onGetName","isEditFilenamePossible","FilenameClickHandler","FilenameInputFocusHandler","_filenameEditHandler","onGetUploadStatus","onSetName","onEditingStatusChange","isEditing","qqInput","getEditInput","qqFileContainer","hideFilename","hideEditIcon","showFilename","showEditIcon","markFilenameEditable","hideRetry","setStatusText","_classes","retrying","hidePause","FilenameInputFocusInHandler","hideSpinner","resetTotalProgress","reportDirectoryPaths","qqpath","_addToList","addHandler","updateProgress","hideCancel","hideProgress","waitingForResponse","_displayFileSize","parentRetVal","completeUpload","_markFileAsSuccessful","fail","showCancel","isRetryPossible","showRetry","_controlFailureTextDisplay","newResult","showDeleteButton","_maybeUpdateThumbnail","showSpinner","allowPause","retryNumForDisplay","maxAuto","retryNote","_showCancelLink","showAutoRetryNote","autoRetryNote","resetProgress","_onSubmitDeleteSuccess","forceConfirm","_showDeleteConfirm","_sendDeleteRequest","deletingFailedText","hideDeleteButton","deletingStatusText","confirmMessage","deleteRequestArgs","showConfirm","canned","prependData","prependIndex","dontDisplay","hideScaled","prependFiles","disableCancel","_handledProxyGroup","_clearList","addFileToCache","updateThumbnail","thumbnails","generatePreview","fileSizeOnSubmit","loadedSize","sizeForDisplay","_formatProgress","uploadedSize","formatProgress","failureReason","failUpload","enableTooltip","_showTooltip","showMessage","_setupPastePrompt","namePromptMessage","defaultVal","showPrompt","placeholders","waitUntilResponse","listElement","editable","tooManyFilesError","unsupportedBrowser","promptForName","maxCount","notAvailablePath","waitingPath","timeBetweenThumbs","hasDialog","showDialog","confirm","defaultValue","prompt","Templating","templateIdOrEl","containerEl","fileContainerEl","maxThumbs","waitUntilUpdate","thumbnailNotAvailable","waitingForThumbnail","renderFailure","isEditElementsExist","isRetryElementExist","templateDom","showThumbnails","serverScale","FILE_ID_ATTR","FILE_CLASS_PREFIX","DROPZPONE_TEXT_ATTR","IN_PROGRESS_CLASS","HIDDEN_FOREVER_CLASS","fileBatch","content","createDocumentFragment","map","isCancelDisabled","generatedThumbnails","thumbnailQueueMonitorRunning","thumbGenerationQueue","thumbnailMaxSize","selectorClasses","alertDialog","dialogCancelButton","confirmDialog","dialogMessage","dialogOkButton","promptDialog","drop","list","progressBarContainer","totalProgressBarContainer","totalProgressBar","spinner","continueButton","deleteButton","statusText","editFilenameInput","editNameIcon","dropText","dropProcessing","dropProcessingSpinner","thumbnail","previewGeneration","cachedThumbnailNotAvailableImg","cachedWaitingForThumbnailImg","displayWaitingImg","waitingImgPlacement","maybeScalePlaceholderViaCss","show","generateNextQueuedPreview","queuedThumbRequest","update","processUpdateQueuedPreviewRequest","processNewQueuedPreviewRequest","getCancel","getTemplateEl","getContinue","getDialog","getDelete","getDropProcessing","getEditIcon","getPause","getProgress","getRetry","getSpinner","cssClass","getThumbnail","maybeSetDisplayNotAvailableImg","previewing","notAvailableImgPlacement","optFileOrBlob","relatedThumbnailId","qqThumbnailId","useCachedPreview","generateNewPreview","showWaitingImg","setProgressBarWidth","percent","bar","progressBarSelector","targetThumbnailId","cachedThumbnailId","targetThumbnail","cachedThumbnail","scriptEl","scriptHtml","fileListNode","tempTemplateEl","fileListEl","defaultButton","dropTextEl","uploaderEl","cloneNode","fileTemplate","parseAndGetTemplate","notAvailableUrl","waitingUrl","updatedImg","cacheThumbnailPlaceholders","hideTotalProgress","cantRenderEl","prependInfo","hideForever","batch","thumb","fileEl","fileNameEl","parentEl","beforeEl","prependFile","waitingImg","currentNode","getFileList","filenameEl","isFileName","icon","isEditIcon","isEditInput","isCancel","allowContinueButton","isPause","isContinueButton","isDeleteButton","isRetry","textEl","dialog","messageEl","inputEl","cancelBtn","okBtn","closeHandler","cancelClickHandler","okClickHandler","close","showModal","UiEventHandler","s","protectedApi","eventType","attachTo","onHandled","srcElement","getFileIdFromItem","qqFileId","getDisposeSupport","buttonHandlers","buttonType","firstLetterCapButtonType","inheritedInternalApi","handleFilenameEdit","FilenameEditHandler","handleNameUpdate","newFilenameInputEl","origExtension","origName","getOriginalExtension","focusInput","filenameSansExt","focus","registerInputBlurHandler","keyCode","which","registerInputEnterKeyHandler","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","amdO","n","getter","__esModule","definition","defineProperty","enumerable","g","globalThis","Function","hmd","__webpack_exports__"],"sourceRoot":""}